{"componentChunkName":"component---src-templates-post-js","path":"/modificacion-del-escenario-de-open-stack","result":{"data":{"markdownRemark":{"html":"<p>Vamos a modificar el escenario que tenemos actualmente en OpenStack para que se adecúe a la realización de todas las prácticas en todos los módulos de 2º, en particular para que tenga una estructura más real a la de varios equipos detrás de un cortafuegos, separando los servidores en dos redes: red interna y DMZ. Para ello vamos a reutilizar todo lo hecho hasta ahora y añadiremos una máquina más: Frestón</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/2d493/escenariodmz.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.90291262135922%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB+0lEQVQ4y4WTW3eaQBSF/f//wpc+1ipp0mZVNDFJQY3xFoyxYhSlXkIKQVQuw+4wIBVoV89aLIaZMx/7zD6TO++qSARx4Q+/0LcHn376vs+mb+Y30A86G/uex97beh32bBbORXm5QluFob+h2WpBUWZw39eAxNEEkgBeK9dZoCDAnk7DOUJYbu5DXcFyo6FQLEG4rcHXZPj9Alv8P1CE/fKCSGII/JwuOVD2dJEp+V8KHUWJgazkUnvBBq4XlejsgcEZ5SaBV8pVDCRHoEjPsNOB1G6D53ksFgvkiikgXBsYVzNnKKgijIMRVxGE1e+DjGW0qDn5fB7D4RC5b9KSLXokAngO/On3UCGFERJu7m16MPY69taO/tNmubteDw6FjCQJHMdBluUkMBxQhVMB6bhfP+DxbYAL/hKfqIFr04Q7+gFntQq3eaGAuORThRhdwvg5RoUvQ6wLGAwa+PpYxK/NHIYyx6TbxV7XsWs24ahq0hQuDQzOsP8RnrFE674JkTq5W65ReTqHtqI9Z1r0MeHTst8rlWxjl1JAuIewbVJRU2+hu2bocrTZCm5K1Id/BbIFCgRVE5hCTkypnfQh8dw/fZhVqGYU2t0CA54mlidlaJaW6EPz7g5baszx6jHg2cMsCaSmbDvFWMURWJ1U8Wq+JoGNBvTn5wTwN1bOJ4cJiNhNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/36727/escenariodmz.png\"\n        srcset=\"/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/acf4b/escenariodmz.png 173w,\n/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/fc834/escenariodmz.png 345w,\n/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/36727/escenariodmz.png 690w,\n/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/2d493/escenariodmz.png 1030w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>Creación de la red DMZ:</p>\n<ul>\n<li>Nombre: DMZ de <nombre de usuario></li>\n<li>10.0.2.0/24\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/27aa4/escenariodmz2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.761904761904762%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAO0lEQVQI1x2LWwoAMAjDdv+7KgwfOBU69Cs0oeeq471EVcHdQUTL7l6KCDITZoaIgKquZ+Z10+Y7fvYHRsdNldkAPoAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/36727/escenariodmz2.png\"\n        srcset=\"/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/acf4b/escenariodmz2.png 173w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/fc834/escenariodmz2.png 345w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/36727/escenariodmz2.png 690w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/17fa4/escenariodmz2.png 1035w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/a5044/escenariodmz2.png 1380w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/27aa4/escenariodmz2.png 1680w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n</li>\n<li>\n<p>Creación de las instancias:</p>\n<ul>\n<li>\n<p>freston:</p>\n<ul>\n<li>Debian Buster sobre volumen de 10GB con sabor m1.mini</li>\n<li>Conectada a la red interna</li>\n<li>Accesible indirectamente a través de dulcinea</li>\n<li>IP estática\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/f475c/escenariodmz3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.531902206320812%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAO0lEQVQI1x2MuQ0AMQzDsv+u/s+Ac40CuSBYiNAxD3Q3MhNVBTPDzODeH1EfVBURsbj7dkRE1uy58YN+IkVMn6Qkwu0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/36727/escenariodmz3.png\"\n        srcset=\"/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/acf4b/escenariodmz3.png 173w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/fc834/escenariodmz3.png 345w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/36727/escenariodmz3.png 690w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/17fa4/escenariodmz3.png 1035w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/a5044/escenariodmz3.png 1380w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/f475c/escenariodmz3.png 1677w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Desde el cliente de openstack deshabilitamos la seguridad.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~$  <span class=\"token builtin class-name\">source</span> ~/.virtualenvs/openstackclient/bin/activate\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ <span class=\"token builtin class-name\">source</span> Proyecto<span class=\"token punctuation\">\\</span> de<span class=\"token punctuation\">\\</span> francisco.madu-openrc.sh \nPlease enter your OpenStack Password <span class=\"token keyword\">for</span> project Proyecto de francisco.madu as user francisco.madu: \n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack server remove security group Freston default\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port list\n+--------------------------------------+----------------------------------------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token operator\">|</span> ID                                   <span class=\"token operator\">|</span> Name                                   <span class=\"token operator\">|</span> MAC Address       <span class=\"token operator\">|</span> Fixed IP Addresses                                                       <span class=\"token operator\">|</span> Status <span class=\"token operator\">|</span>\n+--------------------------------------+----------------------------------------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token operator\">|</span> 00f11b41-5147-43b4-96b4-b4afbc541eaf <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:79:4a:4f <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.2.10'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'be50df48-1769-4b53-9886-7f5352bc086f'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 280e513f-5016-44b5-a66e-fb6960e4f8fa <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:23:87:b2 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.7'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 3148cbad-a46e-41ea-829e-5cfcd1f00f78 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:01:01:01 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.10'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 3d001afd-f6d2-4348-abb0-70b8babaf005 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:8a:5c:d5 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.8'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 4e921875-0585-4258-b7e9-d8c63e23c5c4 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:fc:a2:8c <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.8'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 53665f0f-e35a-44d9-896a-313861310021 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:18:49:cd <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.1'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 5f4ef06d-17cf-49e3-b30e-54bcd8a04465 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:36:da:86 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.2'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> b4099ac2-bcb7-401f-997c-e826f949e117 <span class=\"token operator\">|</span> escenario1-r1_network_ext-wajhseltwj2t <span class=\"token operator\">|</span> fa:16:3e:71:9a:c3 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.12'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> f3fcc1b8-40fa-45b8-86f3-f98793d75800 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:68:b4:c0 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.3'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n+--------------------------------------+----------------------------------------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port <span class=\"token builtin class-name\">set</span> --disable-port-security 00f11b41-5147-43b4-96b4-b4afbc541eaf</code></pre></div>\n<ul>\n<li>\n<p>Modificación de la ubicación de quijote</p>\n<ul>\n<li>Pasa de la red interna a la DMZ y su direccionamiento tiene que modificarse apropiadamente.</li>\n</ul>\n</li>\n</ul>\n<p>Añadiremos la nueva interfaz a Dulcinea por OpenStacks y seguido modificamos el fichero de Dulcinea /etc/network/interfaces:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/network/interfaces\n\nauto eth2\niface eth2 inet static\n address <span class=\"token number\">10.0</span>.2.10\n netmask <span class=\"token number\">255.255</span>.255.0\n broadcast <span class=\"token number\">10.0</span>.2.255\n gateway <span class=\"token number\">10.0</span>.2.1\n\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> systemctl restart networking</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<p>Añadimos nueva reglas a nuestro cortafuegos:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">iptables -t nat -A POSTROUTING -s <span class=\"token number\">10.0</span>.2.0/24 -o eth2 -j MASQUERADE</code></pre></div>\n<p>Antes de meter a Freston en la nueva red, la incorporamos en nuestra red a la que se le puede asignar una IP Flotante, para poder añadirle una contraseña al usuario debian.</p>\n<p>Una vez configurado esto, la quitamos de la red, y la metemos en la red anteriormente creada.</p>","timeToRead":4,"excerpt":"Vamos a modificar el escenario que tenemos actualmente en OpenStack para que se adecúe a la realización de todas las prácticas en todos los…","frontmatter":{"title":"Modificación del escenario de OpenStack","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-12-10T00:00:00.000Z","categories":["HLC"],"tags":["OpenStack","DMZ"]},"fields":{"slug":"/modificacion-del-escenario-de-open-stack","date":"December 09, 2020"}}},"pageContext":{"slug":"/modificacion-del-escenario-de-open-stack","nexttitle":"Instalación y configuración inicial de OpenLDAP","nextslug":"/instalacion-y-configuracion-inicial-de-open-ldap","prevtitle":"Práctica 2: rclone - Gestionando nuestro almacenamiento en la nube (unidad 1)","prevslug":"/practica-2-rclone-gestionando-nuestro-almacenamiento-en-la-nube-unidad-1"}}}