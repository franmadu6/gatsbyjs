{"componentChunkName":"component---src-templates-post-js","path":"/modificacion-del-escenario-de-open-stack","result":{"data":{"markdownRemark":{"html":"<p>Vamos a modificar el escenario que tenemos actualmente en OpenStack para que se adecúe a la realización de todas las prácticas en todos los módulos de 2º, en particular para que tenga una estructura más real a la de varios equipos detrás de un cortafuegos, separando los servidores en dos redes: red interna y DMZ. Para ello vamos a reutilizar todo lo hecho hasta ahora y añadiremos una máquina más: Frestón</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/2d493/escenariodmz.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.90291262135922%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB+0lEQVQ4y4WTW3eaQBSF/f//wpc+1ipp0mZVNDFJQY3xFoyxYhSlXkIKQVQuw+4wIBVoV89aLIaZMx/7zD6TO++qSARx4Q+/0LcHn376vs+mb+Y30A86G/uex97beh32bBbORXm5QluFob+h2WpBUWZw39eAxNEEkgBeK9dZoCDAnk7DOUJYbu5DXcFyo6FQLEG4rcHXZPj9Alv8P1CE/fKCSGII/JwuOVD2dJEp+V8KHUWJgazkUnvBBq4XlejsgcEZ5SaBV8pVDCRHoEjPsNOB1G6D53ksFgvkiikgXBsYVzNnKKgijIMRVxGE1e+DjGW0qDn5fB7D4RC5b9KSLXokAngO/On3UCGFERJu7m16MPY69taO/tNmubteDw6FjCQJHMdBluUkMBxQhVMB6bhfP+DxbYAL/hKfqIFr04Q7+gFntQq3eaGAuORThRhdwvg5RoUvQ6wLGAwa+PpYxK/NHIYyx6TbxV7XsWs24ahq0hQuDQzOsP8RnrFE674JkTq5W65ReTqHtqI9Z1r0MeHTst8rlWxjl1JAuIewbVJRU2+hu2bocrTZCm5K1Id/BbIFCgRVE5hCTkypnfQh8dw/fZhVqGYU2t0CA54mlidlaJaW6EPz7g5baszx6jHg2cMsCaSmbDvFWMURWJ1U8Wq+JoGNBvTn5wTwN1bOJ4cJiNhNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/36727/escenariodmz.png\"\n        srcset=\"/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/acf4b/escenariodmz.png 173w,\n/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/fc834/escenariodmz.png 345w,\n/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/36727/escenariodmz.png 690w,\n/gatsbyjs/static/6e99fcbd86851b25ba96e9f794875f57/2d493/escenariodmz.png 1030w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>Creación de la red DMZ:</p>\n<ul>\n<li>Nombre: DMZ de <nombre de usuario></li>\n<li>10.0.2.0/24\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/27aa4/escenariodmz2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.761904761904762%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAO0lEQVQI1x2LWwoAMAjDdv+7KgwfOBU69Cs0oeeq471EVcHdQUTL7l6KCDITZoaIgKquZ+Z10+Y7fvYHRsdNldkAPoAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/36727/escenariodmz2.png\"\n        srcset=\"/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/acf4b/escenariodmz2.png 173w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/fc834/escenariodmz2.png 345w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/36727/escenariodmz2.png 690w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/17fa4/escenariodmz2.png 1035w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/a5044/escenariodmz2.png 1380w,\n/gatsbyjs/static/2997dadf9a1f51db271a6f3d295808b0/27aa4/escenariodmz2.png 1680w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n</li>\n<li>\n<p>Creación de las instancias:</p>\n<ul>\n<li>\n<p>freston:</p>\n<ul>\n<li>Debian Buster sobre volumen de 10GB con sabor m1.mini</li>\n<li>Conectada a la red interna</li>\n<li>Accesible indirectamente a través de dulcinea</li>\n<li>IP estática\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/f475c/escenariodmz3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.531902206320812%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAO0lEQVQI1x2MuQ0AMQzDsv+u/s+Ac40CuSBYiNAxD3Q3MhNVBTPDzODeH1EfVBURsbj7dkRE1uy58YN+IkVMn6Qkwu0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/36727/escenariodmz3.png\"\n        srcset=\"/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/acf4b/escenariodmz3.png 173w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/fc834/escenariodmz3.png 345w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/36727/escenariodmz3.png 690w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/17fa4/escenariodmz3.png 1035w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/a5044/escenariodmz3.png 1380w,\n/gatsbyjs/static/4486484d57b3ec1934cee10925d4a5d9/f475c/escenariodmz3.png 1677w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Desde el cliente de openstack deshabilitamos la seguridad.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~$  <span class=\"token builtin class-name\">source</span> ~/.virtualenvs/openstackclient/bin/activate\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ <span class=\"token builtin class-name\">source</span> Proyecto<span class=\"token punctuation\">\\</span> de<span class=\"token punctuation\">\\</span> francisco.madu-openrc.sh \nPlease enter your OpenStack Password <span class=\"token keyword\">for</span> project Proyecto de francisco.madu as user francisco.madu: \n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack server remove security group Freston default\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port list\n+--------------------------------------+----------------------------------------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token operator\">|</span> ID                                   <span class=\"token operator\">|</span> Name                                   <span class=\"token operator\">|</span> MAC Address       <span class=\"token operator\">|</span> Fixed IP Addresses                                                       <span class=\"token operator\">|</span> Status <span class=\"token operator\">|</span>\n+--------------------------------------+----------------------------------------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token operator\">|</span> 00f11b41-5147-43b4-96b4-b4afbc541eaf <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:79:4a:4f <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.2.10'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'be50df48-1769-4b53-9886-7f5352bc086f'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 280e513f-5016-44b5-a66e-fb6960e4f8fa <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:23:87:b2 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.7'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 3148cbad-a46e-41ea-829e-5cfcd1f00f78 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:01:01:01 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.10'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 3d001afd-f6d2-4348-abb0-70b8babaf005 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:8a:5c:d5 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.8'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 4e921875-0585-4258-b7e9-d8c63e23c5c4 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:fc:a2:8c <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.8'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 53665f0f-e35a-44d9-896a-313861310021 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:18:49:cd <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.1'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 5f4ef06d-17cf-49e3-b30e-54bcd8a04465 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:36:da:86 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.2'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> b4099ac2-bcb7-401f-997c-e826f949e117 <span class=\"token operator\">|</span> escenario1-r1_network_ext-wajhseltwj2t <span class=\"token operator\">|</span> fa:16:3e:71:9a:c3 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.12'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> f3fcc1b8-40fa-45b8-86f3-f98793d75800 <span class=\"token operator\">|</span>                                        <span class=\"token operator\">|</span> fa:16:3e:68:b4:c0 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.3'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n+--------------------------------------+----------------------------------------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port <span class=\"token builtin class-name\">set</span> --disable-port-security 00f11b41-5147-43b4-96b4-b4afbc541eaf</code></pre></div>\n<ul>\n<li>\n<p>Modificación de la ubicación de quijote</p>\n<ul>\n<li>\n<p>Pasa de la red interna a la DMZ y su direccionamiento tiene que modificarse apropiadamente.</p>\n<hr>\n</li>\n</ul>\n</li>\n</ul>\n<p>Añadiremos la nueva interfaz a Dulcinea por OpenStacks y seguido modificamos el fichero de Dulcinea /etc/network/interfaces:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/network/interfaces\n\nallow-hotplug eth2\niface eth2 inet static\n address <span class=\"token number\">10.0</span>.2.7\n netmask <span class=\"token number\">255.255</span>.255.0\n broadcast <span class=\"token number\">10.0</span>.2.255\n gateway <span class=\"token number\">10.0</span>.2.1\n\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> systemctl restart networking</code></pre></div>\n<p>Añadimos nueva reglas a nuestro cortafuegos en este caso usaré ntfs y ademas la añadire al fichero /etc/ntfstables.conf para que de esta manera nos podamos olvidar de estar añadiendolas cada vez que reiniciemos.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#Descargar el paquete de ntftable</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> nftables\n<span class=\"token comment\">#Habilitar ntftables</span>\ndebian@francisco-madu:~$ <span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span>  nftables.service\nCreated symlink /etc/systemd/system/sysinit.target.wants/nftables.service → /lib/systemd/system/nftables.service.\n<span class=\"token comment\">#Añadir la nueva regla</span>\nnft <span class=\"token function\">add</span> rule inet nat postrouting oifname <span class=\"token string\">\"eth1\"</span> <span class=\"token function\">ip</span> saddr <span class=\"token number\">10.0</span>.2.0/24 counter masquerade \n<span class=\"token comment\">#Añadir la regla del ejercicios pasado</span>\nnft <span class=\"token function\">add</span> rule inet nat postrouting oifname <span class=\"token string\">\"eth1\"</span> <span class=\"token function\">ip</span> saddr <span class=\"token number\">10.0</span>.1.0/24 counter masquerade \n<span class=\"token comment\">#Mostrar las reglas</span>\ndebian@francisco-madu:~$ <span class=\"token function\">sudo</span> nft list ruleset\ntable <span class=\"token function\">ip</span> nat <span class=\"token punctuation\">{</span>\n\tchain PREROUTING <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token builtin class-name\">type</span> nat hook prerouting priority -100<span class=\"token punctuation\">;</span> policy accept<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tchain INPUT <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token builtin class-name\">type</span> nat hook input priority <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> policy accept<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tchain POSTROUTING <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token builtin class-name\">type</span> nat hook postrouting priority <span class=\"token number\">100</span><span class=\"token punctuation\">;</span> policy accept<span class=\"token punctuation\">;</span>\n\t\toifname <span class=\"token string\">\"eth1\"</span> <span class=\"token function\">ip</span> saddr <span class=\"token number\">10.0</span>.1.0/24 counter packets <span class=\"token number\">2034</span> bytes <span class=\"token number\">143017</span> masquerade\n\t\toifname <span class=\"token string\">\"eth1\"</span> <span class=\"token function\">ip</span> saddr <span class=\"token number\">10.0</span>.2.0/24 counter packets <span class=\"token number\">0</span> bytes <span class=\"token number\">0</span> masquerade \n\t\t\n\t<span class=\"token punctuation\">}</span>\n\n\tchain OUTPUT <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token builtin class-name\">type</span> nat hook output priority -100<span class=\"token punctuation\">;</span> policy accept<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">#Guardarlo en /etc/ntfstables.conf</span></code></pre></div>\n<p>Le añadimos claves para el usuario debian y root.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@freston:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span> debian\nNew password: \nRetype new password: \npasswd: password updated successfully\ndebian@freston:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span> root\nNew password: \nRetype new password: \npasswd: password updated successfully</code></pre></div>\n<p>Una vez configurado esto, la quitamos de la red, y la metemos en la red anteriormente creada.</p>\n<p>Configuramos la ip estatica en freston:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># The normal eth0</span>\nallow-hotplug eth0\niface eth0 inet static\n address <span class=\"token number\">10.0</span>.1.14\n netmask <span class=\"token number\">255.255</span>.255.0\n broadcast <span class=\"token number\">10.0</span>.1.255\n gateway <span class=\"token number\">10.0</span>.1.8</code></pre></div>\n<p> Reiniciamos el servicio networking y comprobamos la conectividad a las máquinas:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#dulcinea a freston</span>\ndebian@francisco-madu:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.14\nPING <span class=\"token number\">10.0</span>.1.14 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.14<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.14: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">1.44</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.14: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.858</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.14 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 3ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.858</span>/1.146/1.435/0.290 ms\n\n<span class=\"token comment\">#freston a sancho</span>\ndebian@freston:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.7\nPING <span class=\"token number\">10.0</span>.1.7 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">2.44</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.904</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.7 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 3ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.904</span>/1.671/2.438/0.767 ms\n\n<span class=\"token comment\">#freston a quijote</span>\ndebian@freston:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.10\nPING <span class=\"token number\">10.0</span>.1.10 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">2.57</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.583</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.790</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.10 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 14ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.583</span>/1.312/2.565/0.890 ms\n\n<span class=\"token comment\">#hacia internet</span>\ndebian@freston:~$ <span class=\"token function\">ping</span> <span class=\"token number\">8.8</span>.8.8\nPING <span class=\"token number\">8.8</span>.8.8 <span class=\"token punctuation\">(</span><span class=\"token number\">8.8</span>.8.8<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.8</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.7</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.4</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">4</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.5</span> ms\n^C\n--- <span class=\"token number\">8.8</span>.8.8 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">4</span> packets transmitted, <span class=\"token number\">4</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 7ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">42.437</span>/42.623/42.803/0.254 ms</code></pre></div>\n<p>Ahora tenemos conectado correctamente <strong>freston</strong> a nuestra red.</p>\n<h3 id=\"quijote\"><a href=\"#quijote\" aria-label=\"quijote permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Quijote</h3>\n<p>Para comenzar le añadimos la nueva red DMZ y le quitamos su antigua red.</p>\n<p>Accederemos desde Horizon y modificaremos su bridge.\nEn /etc/sysconfig/network-scripts/ifcfg-eth0</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Created by cloud-init on instance boot automatically, do not edit.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"eth0\"</span>\n<span class=\"token assign-left variable\">BOOTPROTO</span><span class=\"token operator\">=</span><span class=\"token string\">\"static\"</span>\n<span class=\"token assign-left variable\">IPADDR</span><span class=\"token operator\">=</span><span class=\"token string\">\"10.0.2.3\"</span>\n<span class=\"token assign-left variable\">NETMASK</span><span class=\"token operator\">=</span><span class=\"token string\">\"255.255.255.0\"</span>\n<span class=\"token assign-left variable\">NETWORK</span><span class=\"token operator\">=</span><span class=\"token string\">\"10.0.2.0\"</span>\n<span class=\"token assign-left variable\">GATEWAY</span><span class=\"token operator\">=</span><span class=\"token string\">\"10.0.2.7\"</span>\n<span class=\"token assign-left variable\">ONBOOT</span><span class=\"token operator\">=</span><span class=\"token string\">\"yes\"</span>\n<span class=\"token assign-left variable\">TYPE</span><span class=\"token operator\">=</span><span class=\"token string\">\"Ethernet\"</span></code></pre></div>\n<p><strong>Pruebas de conexión</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#dulcinea a quijote</span>\ndebian@francisco-madu:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.2.3\nPING <span class=\"token number\">10.0</span>.2.3 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.2.3<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.2.3: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">2.84</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.2.3: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.685</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.2.3 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 2ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.685</span>/1.760/2.835/1.075 ms\n\n<span class=\"token comment\">#quijote dulcinea</span>\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.2.7\nPING <span class=\"token number\">10.0</span>.2.7 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.2.7<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.2.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.798</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.2.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.763</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.2.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.872</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.2.7 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 4ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.763</span>/0.811/0.872/0.045 ms\n\n<span class=\"token comment\">#quijote sancho</span>\n\n<span class=\"token comment\">#quijote freston</span></code></pre></div>","timeToRead":7,"excerpt":"Vamos a modificar el escenario que tenemos actualmente en OpenStack para que se adecúe a la realización de todas las prácticas en todos los…","frontmatter":{"title":"Modificación del escenario de OpenStack","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-12-10T00:00:00.000Z","categories":["HLC"],"tags":["OpenStack","DMZ"]},"fields":{"slug":"/modificacion-del-escenario-de-open-stack","date":"December 09, 2020"}}},"pageContext":{"slug":"/modificacion-del-escenario-de-open-stack","nexttitle":"LDAPs","nextslug":"/lda-ps","prevtitle":"OpenStack: Servidores Web, Base de Datos y DNS","prevslug":"/open-stack-servidores-web-base-de-datos-y-dns"}}}