{"componentChunkName":"component---src-templates-post-js","path":"/open-stack-servidores-web-base-de-datos-y-dns","result":{"data":{"markdownRemark":{"html":"<p><a href=\"https://dit.gonzalonazareno.org/redmine/projects/asir2/wiki/Servidores_Web_y_DNS\">https://dit.gonzalonazareno.org/redmine/projects/asir2/wiki/Servidores_Web_y_DNS</a></p>\n<p>vista externa (172.22.0.0/15)\nzona resolución directa\ndulcinea 172.22.x.x\nwww cname dulcinea\nzona resolucón inversa\nno tiene</p>\n<p>vista interna (10.0.1.0/24)\nzona resolución directa\ndulcinea 10.0.1.X\nsancho 10.0.1.X\nquijote 10.0.2.X\nwww cname quijote\nbd cname sancho</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">zona resolución inversa\n    2 zonas : una para 10.0.1.0/24 y otra para 10.0.2.0/24</code></pre></div>\n<p>vista dmz(10.0.2.0/24)\nzona resolución directa\nNS freston\ndulcinea 10.0.2.X\nsancho 10.0.1.X\nquijote 10.0.2.X\nwww cname quijote\nbd cname sancho</p>\n<p>1 configuro bind con vistas\n2 regla dnat en dulcinea para redirigir trafico dns a freston\n3 pruebo bind con clientes en las distintas redes</p>\n<h2 id=\"servidor-dns\"><a href=\"#servidor-dns\" aria-label=\"servidor dns permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Servidor DNS</h2>\n<hr>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<h2 id=\"servidor-web\"><a href=\"#servidor-web\" aria-label=\"servidor web permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Servidor Web</h2>\n<p>En quijote (CentOs)(Servidor que está en la DMZ) vamos a instalar un servidor web apache. Configura el servidor para que sea capaz de ejecutar código php (para ello vamos a usar un servidor de aplicaciones php-fpm). Entrega una captura de pantalla accediendo a www.tunombre.gonzalonazareno.org/info.php donde se vea la salida del fichero info.php. Investiga la reglas DNAT de cortafuegos que tienes que configurar en dulcinea para, cuando accedemos a la IP flotante se acceda al servidor web.</p>\n<p><strong>Instalación del servidor.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<p><strong>Configuración del uso de php.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<p><strong>Configuración del fichero apache2.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<p><strong>Accediendo a www.tunombre.gonzalonazareno.org/info.php</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<p><strong>Investiga la reglas DNAT de cortafuegos que tienes que configurar en dulcinea para, cuando accedemos a la IP flotante se acceda al servidor web.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<h2 id=\"servidor-de-base-de-datos\"><a href=\"#servidor-de-base-de-datos\" aria-label=\"servidor de base de datos permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Servidor de base de datos</h2>\n<p>En sancho (Ubuntu) vamos a instalar un servidor de base de datos mariadb (bd.tu_nombre.gonzalonazareno.org). Entrega una prueba de funcionamiento donde se vea como se realiza una conexión a la base de datos desde quijote.</p>\n<p><strong>Instalación del servidor.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ubuntu@sancho:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> mariadb-server\nubuntu@sancho:~$ <span class=\"token function\">sudo</span> mysql_secure_installation</code></pre></div>\n<p><strong>Configuración de Mariadb.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ubuntu@sancho:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/mysql/mariadb.conf.d/50-server.cnf \n<span class=\"token comment\">#modificamos la linea bind-address</span>\nbind-address            <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span>.0.0</code></pre></div>\n<p><strong>Creación de usuario remoto.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> mysql -u root\nCREATE <span class=\"token environment constant\">USER</span> <span class=\"token string\">'maduremote'</span>@<span class=\"token string\">'%'</span> IDENTIFIED BY <span class=\"token string\">'madu'</span><span class=\"token punctuation\">;</span>\nGRANT ALL PRIVILEGES ON *.* TO <span class=\"token string\">'maduremote'</span>@<span class=\"token string\">'%'</span><span class=\"token punctuation\">;</span>\nFLUSH PRIVILEGES<span class=\"token punctuation\">;</span>\n<span class=\"token builtin class-name\">exit</span></code></pre></div>\n<p><strong>Creación de la base de datos.</strong></p>\n<p>Nos descargaremos una base de datos de prueba llama world.sql</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">MariaDB <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>none<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> create database world<span class=\"token punctuation\">;</span>\nubuntu@sancho:~$ <span class=\"token function\">sudo</span> mysql -u maduremote -p world <span class=\"token operator\">&lt;</span> world.sql\nMariaDB <span class=\"token punctuation\">[</span>world<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> show tables<span class=\"token punctuation\">;</span>\n+-----------------+\n<span class=\"token operator\">|</span> Tables_in_world <span class=\"token operator\">|</span>\n+-----------------+\n<span class=\"token operator\">|</span> city            <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> country         <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> countrylanguage <span class=\"token operator\">|</span>\n+-----------------+\n<span class=\"token number\">3</span> rows <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.001</span> sec<span class=\"token punctuation\">)</span>\nMariaDB <span class=\"token punctuation\">[</span>world<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token keyword\">select</span> * from city<span class=\"token punctuation\">;</span>\n+------+------------------------------------+-------------+------------------------+------------+\n<span class=\"token operator\">|</span> ID   <span class=\"token operator\">|</span> Name                               <span class=\"token operator\">|</span> CountryCode <span class=\"token operator\">|</span> District               <span class=\"token operator\">|</span> Population <span class=\"token operator\">|</span>\n+------+------------------------------------+-------------+------------------------+------------+\n<span class=\"token operator\">|</span>    <span class=\"token number\">1</span> <span class=\"token operator\">|</span> Kabul                              <span class=\"token operator\">|</span> AFG         <span class=\"token operator\">|</span> Kabol                  <span class=\"token operator\">|</span>    <span class=\"token number\">1780000</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token number\">2</span> <span class=\"token operator\">|</span> Qandahar                           <span class=\"token operator\">|</span> AFG         <span class=\"token operator\">|</span> Qandahar               <span class=\"token operator\">|</span>     <span class=\"token number\">237500</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token number\">3</span> <span class=\"token operator\">|</span> Herat                              <span class=\"token operator\">|</span> AFG         <span class=\"token operator\">|</span> Herat                  <span class=\"token operator\">|</span>     <span class=\"token number\">186800</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token number\">4</span> <span class=\"token operator\">|</span> Mazar-e-Sharif                     <span class=\"token operator\">|</span> AFG         <span class=\"token operator\">|</span> Balkh                  <span class=\"token operator\">|</span>     <span class=\"token number\">127800</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token number\">5</span> <span class=\"token operator\">|</span> Amsterdam                          <span class=\"token operator\">|</span> NLD         <span class=\"token operator\">|</span> Noord-Holland          <span class=\"token operator\">|</span>     <span class=\"token number\">731200</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token number\">6</span> <span class=\"token operator\">|</span> Rotterdam                          <span class=\"token operator\">|</span> NLD         <span class=\"token operator\">|</span> Zuid-Holland           <span class=\"token operator\">|</span>     <span class=\"token number\">593321</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token number\">7</span> <span class=\"token operator\">|</span> Haag                               <span class=\"token operator\">|</span> NLD         <span class=\"token operator\">|</span> Zuid-Holland           <span class=\"token operator\">|</span>     <span class=\"token number\">440900</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token number\">8</span> <span class=\"token operator\">|</span> Utrecht                            <span class=\"token operator\">|</span> NLD         <span class=\"token operator\">|</span> Utrecht                <span class=\"token operator\">|</span>     <span class=\"token number\">234323</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>    <span class=\"token number\">9</span> <span class=\"token operator\">|</span> Eindhoven                          <span class=\"token operator\">|</span> NLD         <span class=\"token operator\">|</span> Noord-Brabant          <span class=\"token operator\">|</span>     <span class=\"token number\">201843</span> <span class=\"token operator\">|</span>\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n<p><strong>Prueba de funcionamiento.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>","timeToRead":3,"excerpt":"https://dit.gonzalonazareno.org/redmine/projects/asir2/wiki/Servidores_Web_y_DNS vista externa (172.22.0.0/15)\n    zona resolución directa…","frontmatter":{"title":"OpenStack: Servidores Web, Base de Datos y DNS","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-12-15T00:00:00.000Z","categories":["SRI"],"tags":["OpenStack","Servidor Web","Base de datos","DNS"]},"fields":{"slug":"/open-stack-servidores-web-base-de-datos-y-dns","date":"December 14, 2020"}}},"pageContext":{"slug":"/open-stack-servidores-web-base-de-datos-y-dns","nexttitle":"Modificación del escenario de OpenStack","nextslug":"/modificacion-del-escenario-de-open-stack","prevtitle":"Práctica 2: rclone - Gestionando nuestro almacenamiento en la nube (unidad 1)","prevslug":"/practica-2-rclone-gestionando-nuestro-almacenamiento-en-la-nube-unidad-1"}}}