{"componentChunkName":"component---src-templates-post-js","path":"/ejercicio-4-mapear-url-a-ubicaciones-de-un-sistema-de-ficheros","result":{"data":{"markdownRemark":{"html":"<p>Crea un nuevo host virtual que es accedido con el nombre www.mapeo.com, cuyo DocumentRoot sea /srv/mapeo.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">&lt;</span>VirtualHost *:8<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>></span>\n        ServerName www.mapeo.com\n\n        ServerAdmin webmaster@localhost\n        DocumentRoot /srv/mapeo\n\n        ErrorLog <span class=\"token variable\">${APACHE_LOG_DIR}</span>/error.log\n        CustomLog <span class=\"token variable\">${APACHE_LOG_DIR}</span>/access.log combined\n<span class=\"token operator\">&lt;</span>/VirtualHost<span class=\"token operator\">></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#configuramos virtualhost</span>\nfran@debian:/etc/apache2/sites-available$ <span class=\"token function\">sudo</span> a2ensite mapeo.conf\nEnabling site mapeo.\nTo activate the new configuration, you need to run:\n  systemctl reload apache2\n\n<span class=\"token comment\">#le damos permisos de propietario adecuados</span>\nfran@debian:/etc/apache2/sites-available$ <span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R www-data:www-data /srv/mapeo/\n\n<span class=\"token comment\">#por ultimo recargamos apache para que se inicie la configuración nueva</span>\nfran@debian:/etc/apache2/sites-available$ systemctl reload apache2</code></pre></div>\n<ol>\n<li>\n<p>Cuando se entre a la dirección www.mapeo.com se redireccionará automáticamente a www.mapeo.com/principal, donde se mostrará el mensaje de bienvenida.*\nmuevo el index.html a /srv/mapeo/principal</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#en mapeo.conf</span>\nRedirect <span class=\"token number\">301</span> /index.html        /principal</code></pre></div>\n</li>\n<li>\n<p>En el directorio principal no se permite ver la lista de los ficheros, no se permite que se siga los enlaces simbólicos y no se permite negociación de contenido. Muestra al profesor el funcionamiento. ¿Qué configuración tienes que poner?</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">    <span class=\"token operator\">&lt;</span>Directory <span class=\"token string\">\"/srv/mapeo\"</span><span class=\"token operator\">></span>\n            Options -Indexes -FollowSymLinks -Multiviews\n    <span class=\"token operator\">&lt;</span>/Directory<span class=\"token operator\">></span></code></pre></div>\n</li>\n<li>Si accedes a la página www.mapeo.com/principal/documentos se visualizarán los documentos que hay en /home/usuario/doc. Por lo tanto se permitirá el listado de fichero y el seguimiento de enlaces simbólicos siempre que el propietario del enlace y del fichero al que apunta sean el mismo usuario. Explica bien y pon una prueba de funcionamiento donde se vea bien el seguimiento de los enlaces simbólicos.</li>\n</ol>\n<p><em>Creo un directorio llamado documentos en mi carpeta principal y creo los enlaces simbolicos:</em></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># sudo ln -s /home/fran/Documentos/prueba.txt </span>\nroot@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># sudo chown -R www-data:www-data prueba.txt </span>\n\nroot@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># ln -s /root/prueba/pruebaroot.txt </span>\nroot@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># chown www-data:www-data pruebaroot.txt </span>\n\n\nroot@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># ls -l</span>\ntotal <span class=\"token number\">0</span>\nlrwxrwxrwx <span class=\"token number\">1</span> root     root     <span class=\"token number\">27</span> oct <span class=\"token number\">22</span> 09:34 pruebaroot.txt -<span class=\"token operator\">></span> /root/prueba/pruebaroot.txt\nlrwxrwxrwx <span class=\"token number\">1</span> www-data www-data <span class=\"token number\">32</span> oct <span class=\"token number\">21</span> <span class=\"token number\">13</span>:20 prueba.txt -<span class=\"token operator\">></span> /home/fran/Documentos/prueba.txt</code></pre></div>\n<p>He creado varios documentos para probar de diferentes formas he dejado la creación de dos de ellos para que se pueda ver como crear un enlace simbólico.</p>\n<p><em>Creo la redirección y doy los permisos al directorio /home/fran/Documentos</em></p>\n<p>Usando:\n<em>Indexes</em>\nSi se solicita una URL que se asigna a un directorio, y no hay DirectoryIndex ( por ejemplo , index.html) en ese directorio, mod_autoindexse devolverá una lista formateada del directorio.\n<em>SymLinksIfOwnerMatch</em>\nEl servidor solo seguirá enlaces simbólicos para los cuales el archivo o directorio de destino es propiedad del mismo ID de usuario que el enlace.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">&lt;</span>VirtualHost *:8<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>></span>\n\n        ServerName www.mapeo.com\n\n        ServerAdmin webmaster@localhost\n        DocumentRoot /srv/mapeo/\n\n        Redirect <span class=\"token number\">301</span> /index.html        /principal\n        Redirect <span class=\"token number\">301</span> /srv/mapeo/principal/documentos    /principal/documentos\n\n        <span class=\"token operator\">&lt;</span>Directory <span class=\"token string\">\"/home/fran/Documentos\"</span><span class=\"token operator\">></span>\n                Options Indexes SymLinksIfOwnerMatch\n        <span class=\"token operator\">&lt;</span>/Directory<span class=\"token operator\">></span>\n\n\n        ErrorLog <span class=\"token variable\">${APACHE_LOG_DIR}</span>/error.log\n        CustomLog <span class=\"token variable\">${APACHE_LOG_DIR}</span>/access.log combined\n\n<span class=\"token operator\">&lt;</span>/VirtualHost<span class=\"token operator\">></span></code></pre></div>\n<p>!mapeoroot.png!</p>\n<p><em>Como podemos ver en la captura no podemos ver el archivo que he creado con el usuario root</em></p>\n<p><em>4. En todo el host virtual se debe redefinir los mensajes de error de objeto no encontrado y no permitido. Para el ello se crearan dos ficheros html dentro del directorio error. Entrega las modificaciones necesarias en la configuración y una comprobación del buen funcionamiento.</em></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@debian:/srv/mapeo<span class=\"token comment\"># mkdir error</span>\nroot@debian:/srv/mapeo/error<span class=\"token comment\"># nano error403.html</span>\nroot@debian:/srv/mapeo/error<span class=\"token comment\"># nano error404.html</span>\n\n<span class=\"token comment\">#Añadimos las siguientes lineas a nuestro archivo de configuración:</span>\n        ErrorDocument <span class=\"token number\">403</span> /error/error403.html\n        ErrorDocument <span class=\"token number\">404</span> /error/error404.html\n\n<span class=\"token comment\">#Añado la ruta de mi carpeta css y la restrinjo</span>\n          <span class=\"token operator\">&lt;</span>Directory <span class=\"token string\">\"/srv/mapeo/css\"</span><span class=\"token operator\">></span>\n                Require all denied\n        <span class=\"token operator\">&lt;</span>/Directory<span class=\"token operator\">></span></code></pre></div>\n<p>!mapeo403.png!\n!mapeo404.png!</p>","timeToRead":3,"excerpt":"Crea un nuevo host virtual que es accedido con el nombre www.mapeo.com, cuyo DocumentRoot sea /srv/mapeo. Cuando se entre a la dirección www…","frontmatter":{"title":"Ejercicio 4: Mapear URL a ubicaciones de un sistema de ficheros","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-10-22T00:00:00.000Z","categories":["Servicios"],"tags":["Mapeo","URL"]},"fields":{"slug":"/ejercicio-4-mapear-url-a-ubicaciones-de-un-sistema-de-ficheros","date":"October 21, 2020"}}},"pageContext":{"slug":"/ejercicio-4-mapear-url-a-ubicaciones-de-un-sistema-de-ficheros","nexttitle":"Instalación de Brackets en Debian","nextslug":"/instalacion-de-brackets-en-debian","prevtitle":"Compilación de un programa en C utilizando un Makefile","prevslug":"/compilacion-de-un-programa-en-c-utilizando-un-makefile"}}}