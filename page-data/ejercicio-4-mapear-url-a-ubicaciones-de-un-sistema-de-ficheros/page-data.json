{"componentChunkName":"component---src-templates-post-js","path":"/ejercicio-4-mapear-url-a-ubicaciones-de-un-sistema-de-ficheros","result":{"data":{"markdownRemark":{"html":"<p>Crea un nuevo host virtual que es accedido con el nombre www.mapeo.com, cuyo DocumentRoot sea /srv/mapeo.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">&lt;</span>VirtualHost *:8<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>></span>\n        ServerName www.mapeo.com\n\n        ServerAdmin webmaster@localhost\n        DocumentRoot /srv/mapeo\n\n        ErrorLog <span class=\"token variable\">${APACHE_LOG_DIR}</span>/error.log\n        CustomLog <span class=\"token variable\">${APACHE_LOG_DIR}</span>/access.log combined\n<span class=\"token operator\">&lt;</span>/VirtualHost<span class=\"token operator\">></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#configuramos virtualhost</span>\nfran@debian:/etc/apache2/sites-available$ <span class=\"token function\">sudo</span> a2ensite mapeo.conf\nEnabling site mapeo.\nTo activate the new configuration, you need to run:\n  systemctl reload apache2\n\n<span class=\"token comment\">#le damos permisos de propietario adecuados</span>\nfran@debian:/etc/apache2/sites-available$ <span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> -R www-data:www-data /srv/mapeo/\n\n<span class=\"token comment\">#por ultimo recargamos apache para que se inicie la configuración nueva</span>\nfran@debian:/etc/apache2/sites-available$ systemctl reload apache2</code></pre></div>\n<ol>\n<li>\n<p>Cuando se entre a la dirección www.mapeo.com se redireccionará automáticamente a www.mapeo.com/principal, donde se mostrará el mensaje de bienvenida.*\nmuevo el index.html a /srv/mapeo/principal</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#en mapeo.conf</span>\nRedirect <span class=\"token number\">301</span> /index.html        /principal</code></pre></div>\n</li>\n<li>\n<p>En el directorio principal no se permite ver la lista de los ficheros, no se permite que se siga los enlaces simbólicos y no se permite negociación de contenido. Muestra al profesor el funcionamiento. ¿Qué configuración tienes que poner?</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">    <span class=\"token operator\">&lt;</span>Directory <span class=\"token string\">\"/srv/mapeo\"</span><span class=\"token operator\">></span>\n            Options -Indexes -FollowSymLinks -Multiviews\n    <span class=\"token operator\">&lt;</span>/Directory<span class=\"token operator\">></span></code></pre></div>\n</li>\n<li>Si accedes a la página www.mapeo.com/principal/documentos se visualizarán los documentos que hay en /home/usuario/doc. Por lo tanto se permitirá el listado de fichero y el seguimiento de enlaces simbólicos siempre que el propietario del enlace y del fichero al que apunta sean el mismo usuario. Explica bien y pon una prueba de funcionamiento donde se vea bien el seguimiento de los enlaces simbólicos.</li>\n</ol>\n<p><em>Creo un directorio llamado documentos en mi carpeta principal y creo los enlaces simbolicos:</em></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># sudo ln -s /home/fran/Documentos/prueba.txt </span>\nroot@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># sudo chown -R www-data:www-data prueba.txt </span>\n\nroot@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># ln -s /root/prueba/pruebaroot.txt </span>\nroot@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># chown www-data:www-data pruebaroot.txt </span>\n\n\nroot@debian:/srv/mapeo/principal/documentos<span class=\"token comment\"># ls -l</span>\ntotal <span class=\"token number\">0</span>\nlrwxrwxrwx <span class=\"token number\">1</span> root     root     <span class=\"token number\">27</span> oct <span class=\"token number\">22</span> 09:34 pruebaroot.txt -<span class=\"token operator\">></span> /root/prueba/pruebaroot.txt\nlrwxrwxrwx <span class=\"token number\">1</span> www-data www-data <span class=\"token number\">32</span> oct <span class=\"token number\">21</span> <span class=\"token number\">13</span>:20 prueba.txt -<span class=\"token operator\">></span> /home/fran/Documentos/prueba.txt</code></pre></div>\n<p>He creado varios documentos para probar de diferentes formas he dejado la creación de dos de ellos para que se pueda ver como crear un enlace simbólico.</p>\n<p><strong>Creo la redirección y doy los permisos al directorio /home/fran/Documentos</strong></p>\n<p>Usando:</p>\n<ul>\n<li>Indexes :<br>\nSi se solicita una URL que se asigna a un directorio, y no hay DirectoryIndex ( por ejemplo , index.html) en ese directorio, mod_autoindexse devolverá una lista formateada del directorio.</li>\n<li>SymLinksIfOwnerMatch :<br>\nEl servidor solo seguirá enlaces simbólicos para los cuales el archivo o directorio de destino es propiedad del mismo ID de usuario que el enlace.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">&lt;</span>VirtualHost *:8<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>></span>\n\n        ServerName www.mapeo.com\n\n        ServerAdmin webmaster@localhost\n        DocumentRoot /srv/mapeo/\n\n        Redirect <span class=\"token number\">301</span> /index.html        /principal\n        Redirect <span class=\"token number\">301</span> /srv/mapeo/principal/documentos    /principal/documentos\n\n        <span class=\"token operator\">&lt;</span>Directory <span class=\"token string\">\"/home/fran/Documentos\"</span><span class=\"token operator\">></span>\n                Options Indexes SymLinksIfOwnerMatch\n        <span class=\"token operator\">&lt;</span>/Directory<span class=\"token operator\">></span>\n\n\n        ErrorLog <span class=\"token variable\">${APACHE_LOG_DIR}</span>/error.log\n        CustomLog <span class=\"token variable\">${APACHE_LOG_DIR}</span>/access.log combined\n\n<span class=\"token operator\">&lt;</span>/VirtualHost<span class=\"token operator\">></span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 551px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/811bebe1cda8ea3735f160f2d0adfbc1/66920/mapeoroot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.5989110707804%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACUUlEQVQ4y52SWU8aURiG59cgCRgBUaCgyBIM4UoTbYCL/sqa2BtAkEWookBFGytQtmGmA4xQdt6ec9i0ctOe5M23zvN9Z2Y4o9GIw8ND7O3t4eDgAFarlVgr7HYbTCYTaH1rawsqlQoKhQIbGxvvpFQql+IsBORyuWCz2eBwOAjIDodzZvf39xmQand3FzqdDlqtdmmpNBoNNjc3l+I+kGaTwcA2tFgsbCvTzg6DmM1m9jCt0dhA+ra3t6HX699YClKr1Uycx+3CJ/9H+Px+eL1eHB8f44hs7Ce+z+/D6ekpTk5O4PF44Ha7mV2Ixk6n8424z2dnCAQCCIVCSKdvEYvFEI3GSHyBi4swYtE4gsEgzs+/4CpxhXA4gsvLKCKRCJLJJGq1GnieX4qjyVQqhUz2DuVqAaVSCYlEHPcPWdxlr/H1Jo5v91lkc2k8POZwc5skvTdkeBr5fB5/H44C6Bn1AKG4KryIgFQB+B9ATwbaPNCqz3JyY9U3nU4xmUyW4gqFwgwgD1EvDTGajNHrDcH/7KP63Ef5ex9NYUBiotIA5ac+GuUBJuMZgAIXYLZhMBRE7voerYpMpkvgnyQMfg/m8ye0dW7HczvTAjCrv7pyKBzA410dxcwU/PMY0xG5UltGpVKFJDUhCCJkWSZb99+9rxX0FTCXy6LZlNFqdglAxkuH+K0W8SW0223mU1G/0+kwONVwOFwL5TKZDARRwC9JRL1eQ7VaJbZONhPIoCYDNxoNlhdFkeXp79HtdtcDi8Ui/vesvfLiKy++2L9oHfQPQJJ/N4TT8S4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/811bebe1cda8ea3735f160f2d0adfbc1/66920/mapeoroot.png\"\n        srcset=\"/gatsbyjs/static/811bebe1cda8ea3735f160f2d0adfbc1/acf4b/mapeoroot.png 173w,\n/gatsbyjs/static/811bebe1cda8ea3735f160f2d0adfbc1/fc834/mapeoroot.png 345w,\n/gatsbyjs/static/811bebe1cda8ea3735f160f2d0adfbc1/66920/mapeoroot.png 551w\"\n        sizes=\"(max-width: 551px) 100vw, 551px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><strong>Como podemos ver en la captura no podemos ver el archivo que he creado con el usuario root</strong></p>\n<ol start=\"4\">\n<li>En todo el host virtual se debe redefinir los mensajes de error de objeto no encontrado y no permitido. Para el ello se crearan dos ficheros html dentro del directorio error. Entrega las modificaciones necesarias en la configuración y una comprobación del buen funcionamiento.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@debian:/srv/mapeo<span class=\"token comment\"># mkdir error</span>\nroot@debian:/srv/mapeo/error<span class=\"token comment\"># nano error403.html</span>\nroot@debian:/srv/mapeo/error<span class=\"token comment\"># nano error404.html</span>\n\n<span class=\"token comment\">#Añadimos las siguientes lineas a nuestro archivo de configuración:</span>\n        ErrorDocument <span class=\"token number\">403</span> /error/error403.html\n        ErrorDocument <span class=\"token number\">404</span> /error/error404.html\n\n<span class=\"token comment\">#Añado la ruta de mi carpeta css y la restrinjo</span>\n          <span class=\"token operator\">&lt;</span>Directory <span class=\"token string\">\"/srv/mapeo/css\"</span><span class=\"token operator\">></span>\n                Require all denied\n        <span class=\"token operator\">&lt;</span>/Directory<span class=\"token operator\">></span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 504px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/8d04cd6114fce188c3f0ad2acd44f5b0/1654f/mapeo403.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.396825396825395%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAABGElEQVQY042NXWuCABSG/UkRVFpRoA6yMiqX05sa9OU0rTEW7D/Waih00x+o7oOKembuauxmBx7Ow/ngFfr9PpZloes6ptmJMdEbDaq1GrWYer2OVqkg5fOUciK5TIZMNkuxWKRQKCBJEqIokk6nSaVSCOPRiF63i2EY2LZF77nHU+cRo92mHWM0m7RaLRRFoao8oMgysiInYZqmJaiqSrlcIh+HCsOuydQbMpu94k8mvLguH57D2zTA9TzGts0sCJjEO9dzCaY/7jgOg8GA+fwd3/cJ4hs3/hWiKORrvWaxWLDZbIiiiM/ViuVySRiGiW+3Ww6HA7vd7hf7/f7PTLher1wuF47HY9LvnE6nhLufz2dutxv/rW+ZlA4jZbr9PgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/8d04cd6114fce188c3f0ad2acd44f5b0/1654f/mapeo403.png\"\n        srcset=\"/gatsbyjs/static/8d04cd6114fce188c3f0ad2acd44f5b0/acf4b/mapeo403.png 173w,\n/gatsbyjs/static/8d04cd6114fce188c3f0ad2acd44f5b0/fc834/mapeo403.png 345w,\n/gatsbyjs/static/8d04cd6114fce188c3f0ad2acd44f5b0/1654f/mapeo403.png 504w\"\n        sizes=\"(max-width: 504px) 100vw, 504px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 508px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/c31c7d625903eb462441acda97a0e7fa/6b519/mapeo404.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.173228346456696%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABFklEQVQoz62OwWrCQBRF55PEVdOSiMbGWDeN0ZoSLRXdNBtjJgkUKv3KIqi4iV9RE48TS1ctQqUPDm/evXDniiiSTCZTer0eo9GI8XjMw8DDcbq4XUW/r94ORq2Gqd2ga9dcaRr1eh3TNDEMA13XqVarVCoVxPOTz9B/xHVdPG+A7/t4bhnm0FWB950OrgpstVrc3VrYlkWz2aTdbmPbNh3ll16j0aCmPhXBdEgcBsg4QUYRoeI9mvEaS2bzOYFqLcOQOEmYqztNU6SUioggeGGxeDtpaZqcNJHtdqxWa3ZqrzcbttstH8slWZZxOBzIFfv9/leKovihiSLPyRWlWe4v4/N0XzLinFk2/CvinPkd+m8NL5kjhkIE97e1Ba0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/c31c7d625903eb462441acda97a0e7fa/6b519/mapeo404.png\"\n        srcset=\"/gatsbyjs/static/c31c7d625903eb462441acda97a0e7fa/acf4b/mapeo404.png 173w,\n/gatsbyjs/static/c31c7d625903eb462441acda97a0e7fa/fc834/mapeo404.png 345w,\n/gatsbyjs/static/c31c7d625903eb462441acda97a0e7fa/6b519/mapeo404.png 508w\"\n        sizes=\"(max-width: 508px) 100vw, 508px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","timeToRead":3,"excerpt":"Crea un nuevo host virtual que es accedido con el nombre www.mapeo.com, cuyo DocumentRoot sea /srv/mapeo. Cuando se entre a la dirección www…","frontmatter":{"title":"Ejercicio 4: Mapear URL a ubicaciones de un sistema de ficheros","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-10-22T00:00:00.000Z","categories":["SRI"],"tags":["Mapeo","URL"]},"fields":{"slug":"/ejercicio-4-mapear-url-a-ubicaciones-de-un-sistema-de-ficheros","date":"October 21, 2020"}}},"pageContext":{"slug":"/ejercicio-4-mapear-url-a-ubicaciones-de-un-sistema-de-ficheros","nexttitle":"Práctica 2: Cifrado asimétrico con gpg y openssl","nextslug":"/practica-2-cifrado-asimetrico-con-gpg-y-openssl","prevtitle":"Compilación de un programa en C utilizando un Makefile","prevslug":"/compilacion-de-un-programa-en-c-utilizando-un-makefile"}}}