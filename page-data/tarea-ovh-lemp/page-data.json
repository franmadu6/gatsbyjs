{"componentChunkName":"component---src-templates-post-js","path":"/tarea-ovh-lemp","result":{"data":{"markdownRemark":{"html":"<h2 id=\"configuración-inicial-de-ovh\"><a href=\"#configuraci%C3%B3n-inicial-de-ovh\" aria-label=\"configuración inicial de ovh permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuración inicial de OVH</h2>\n<p>Añadir clave de los profesores:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#con wget desde la pag de redmine.</span>\ndebian@valhalla:~/claves$ <span class=\"token function\">ls</span>\nclave-openstack.pub  id_rsa.pub  nota.txt  rafa.pub\n<span class=\"token comment\">#la mia con scp</span>\nroot@debian:/home/fran/.ssh<span class=\"token comment\"># scp maduovh.pub debian@valhalla.iesgn11.es:/home/debian/claves</span>\nThe authenticity of <span class=\"token function\">host</span> <span class=\"token string\">'valhalla.iesgn11.es (146.59.196.81)'</span> can<span class=\"token string\">'t be established.\nECDSA key fingerprint is SHA256:HBSKW/gGZRGIBLQ1M28AGyb8jKujW2w9A+NuisTLqic.\nAre you sure you want to continue connecting (yes/no)? ye\nPlease type '</span><span class=\"token function\">yes</span><span class=\"token string\">' or '</span>no<span class=\"token string\">': yes\nWarning: Permanently added '</span>valhalla.iesgn11.es<span class=\"token string\">' (ECDSA) to the list of known hosts.\ndebian@valhalla.iesgn11.es'</span>s password: \nmaduovh.pub     \n<span class=\"token comment\">#añadir a .ssh/authorized_keys</span>\ndebian@valhalla:~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">cat</span> claves/id_rsa.pub<span class=\"token variable\">`</span></span> <span class=\"token operator\">>></span> .ssh/authorized_keys\ndebian@valhalla:~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">cat</span> claves/rafa.pub<span class=\"token variable\">`</span></span> <span class=\"token operator\">>></span> .ssh/authorized_keys\ndebian@valhalla:~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">cat</span> claves/clave-openstack.pub<span class=\"token variable\">`</span></span> <span class=\"token operator\">>></span> .ssh/authorized_keys\ndebian@valhalla:~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">cat</span> claves/maduovh.pub<span class=\"token variable\">`</span></span> <span class=\"token operator\">>></span> .ssh/authorized_keys</code></pre></div>\n<p>Resolución de nombres</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#en /etc/hostname</span>\nvalhalla.iesgn11.es\n<span class=\"token comment\">#en /etc/hosts</span>\n<span class=\"token number\">127.0</span>.1.1       valhalla.iesgn11.es</code></pre></div>\n<p>Reiniciamos la maquina.</p>\n<p>Accedemos y verificamos su nombre:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@valhalla:~$ <span class=\"token function\">hostname</span> -f\nvalhalla.iesgn11.es</code></pre></div>\n<p>Añadimos registro de tipo A en la zona DNS de mi dominio.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 594px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/7608f5532af93c393fcb72324bf4036e/262c7/ovhdns.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.8989898989899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACTklEQVQ4y4VUy47UMBCMxAfwXVw58ktIXBFfgcQJuHDmxKJldwUCMcm8Z/J0nMSx4xTdnckkGpbBUqU67U673HYnSLIEWZEiV6mw2MVoJ2fm+TRPwPHMgpmdU8z94oig73sYY6GrBg0x21VtBru1Zy51A+ccON57P6D36LruDPYFoLHcJLj5FiJcxQiXMb6QHZH9Ozrg52KPX4sDvt5FUGXD4ZJ0HE1jUJaaRNTyLgqd7dC2jhQMbAiWfHXdwpJvPjh+jsu5gJ70sYPWBoWqRUXdWKpZQ7WpYCixp+CO4hiecnjhwW6dFwHMknBcpaWkcVJKrdjDCXXVij0lGNCPSWlOUUySVVAkqBOFFzUZt+Joedt5QddPCtm2flTbY/yyl29PNRwT8inx1jkwLWrs41KUzhPyNkvjZcGTggk4KXxU5Wxlf4H+Cs4KWR3XkBVakhTGGuGxJGikpoMiX+H+jZzg+pnCS5WGAkY0tkfd+uuwXkolCnVloPhUSR3bOdVPbDpx9ruLu3htBJ6KGycK212GY1wI1psUh2Mhvg2BE3NrcetdQz9uOUliRNEC2+0G+/0Oh8Me6/UKu90W69VSWKlSUJYTF4Wiy6+Q5QNbSipbttZSy9mB5zaxI3Zugj298xzg/jr/4H810XTnYtUJjB3um3Ve5m5Dg1fvErx+n+HNh0xigstmP1+j04lvU4eHpcF9RIdVeeSZpr9Qyt2Nl28TBM/u8PTFdzx5/oDPP+qplx/7c8jvia5EpjtB68aOGngVW3y80fh0y6igG48/oiB1Cl0wm9UAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/7608f5532af93c393fcb72324bf4036e/262c7/ovhdns.png\"\n        srcset=\"/gatsbyjs/static/7608f5532af93c393fcb72324bf4036e/acf4b/ovhdns.png 173w,\n/gatsbyjs/static/7608f5532af93c393fcb72324bf4036e/fc834/ovhdns.png 345w,\n/gatsbyjs/static/7608f5532af93c393fcb72324bf4036e/262c7/ovhdns.png 594w\"\n        sizes=\"(max-width: 594px) 100vw, 594px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/64d5aa347aa03d8587673a53d87a5e07/9288f/ovhdns2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 3.463587921847247%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAMklEQVQI11WLORIAEBAE/f+xSiSwR9tBIuiqOVtkcuFRGlgeWJHSFniV8n3MgzLt/i9sg61PA4A2v2MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/64d5aa347aa03d8587673a53d87a5e07/36727/ovhdns2.png\"\n        srcset=\"/gatsbyjs/static/64d5aa347aa03d8587673a53d87a5e07/acf4b/ovhdns2.png 173w,\n/gatsbyjs/static/64d5aa347aa03d8587673a53d87a5e07/fc834/ovhdns2.png 345w,\n/gatsbyjs/static/64d5aa347aa03d8587673a53d87a5e07/36727/ovhdns2.png 690w,\n/gatsbyjs/static/64d5aa347aa03d8587673a53d87a5e07/17fa4/ovhdns2.png 1035w,\n/gatsbyjs/static/64d5aa347aa03d8587673a53d87a5e07/9288f/ovhdns2.png 1126w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@debian:/home/fran<span class=\"token comment\"># ssh -i .ssh/maduovh.pub debian@valhalla.iesgn11.es</span>\nLinux valhalla.iesgn11.es <span class=\"token number\">4.19</span>.0-11-cloud-amd64 <span class=\"token comment\">#1 SMP Debian 4.19.146-1 (2020-09-17) x86_64</span>\n\nThe programs included with the Debian GNU/Linux system are <span class=\"token function\">free</span> software<span class=\"token punctuation\">;</span>\nthe exact distribution terms <span class=\"token keyword\">for</span> each program are described <span class=\"token keyword\">in</span> the\nindividual files <span class=\"token keyword\">in</span> /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Fri Nov <span class=\"token number\">13</span> 09:49:57 <span class=\"token number\">2020</span> from <span class=\"token number\">85.55</span>.236.72\ndebian@valhalla:~$ </code></pre></div>\n<h2 id=\"instalación-de-un-servidor-lemp-servicios\"><a href=\"#instalaci%C3%B3n-de-un-servidor-lemp-servicios\" aria-label=\"instalación de un servidor lemp servicios permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Instalación de un servidor LEMP (Servicios)</h2>\n<ol>\n<li>\n<p>Instala un servidor web nginx</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@valhalla:/home/debian<span class=\"token comment\"># apt-get install nginx</span></code></pre></div>\n</li>\n<li>\n<p>Instala un servidor de base de datos MariaDB. Ejecuta el programa necesario para asegurar el servicio, ya que lo vamos a tener corriendo en el entorno de producción.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@valhalla:/home/debian<span class=\"token comment\"># apt-get apt-get install mariadb-server</span>\nroot@valhalla:/home/debian<span class=\"token comment\"># mysql_secure_installation</span></code></pre></div>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB\n      SERVERS IN PRODUCTION USE<span class=\"token operator\">!</span>  PLEASE READ EACH STEP CAREFULLY<span class=\"token operator\">!</span>\n\nIn order to log into MariaDB to secure it, well need the current\npassword <span class=\"token keyword\">for</span> the root user.  If you ve just installed MariaDB, and\nyou havent <span class=\"token builtin class-name\">set</span> the root password yet, the password will be blank,\nso you should just press enter here.\n\nEnter current password <span class=\"token keyword\">for</span> root <span class=\"token punctuation\">(</span>enter <span class=\"token keyword\">for</span> none<span class=\"token punctuation\">)</span>: \nOK, successfully used password, moving on<span class=\"token punctuation\">..</span>.\n\nSetting the root password ensures that nobody can log into the MariaDB\nroot user without the proper authorisation.\n\nSet root password? <span class=\"token punctuation\">[</span>Y/n<span class=\"token punctuation\">]</span> y\n\nNew password: root\nRe-enter new password: root\nPassword updated successfully<span class=\"token operator\">!</span>\nReloading privilege tables<span class=\"token punctuation\">..</span>\n <span class=\"token punctuation\">..</span>. Success<span class=\"token operator\">!</span>\n\n\nBy default, a MariaDB installation has an anonymous user, allowing anyone\nto log into MariaDB without having to have a user account created <span class=\"token keyword\">for</span>\nthem.  This is intended only <span class=\"token keyword\">for</span> testing, and to <span class=\"token function\">make</span> the installation\ngo a bit smoother.  You should remove them before moving into a\nproduction environment.\n\nRemove anonymous users? <span class=\"token punctuation\">[</span>Y/n<span class=\"token punctuation\">]</span> y\n <span class=\"token punctuation\">..</span>. Success<span class=\"token operator\">!</span>\n\nNormally, root should only be allowed to connect from localhost.  This\nensures that someone cannot guess at the root password from the network.\n\nDisallow root login remotely? <span class=\"token punctuation\">[</span>Y/n<span class=\"token punctuation\">]</span> y\n <span class=\"token punctuation\">..</span>. Success<span class=\"token operator\">!</span>\n\nBy default, MariaDB comes with a database named <span class=\"token builtin class-name\">test</span> that anyone can\naccess.  This is also intended only <span class=\"token keyword\">for</span> testing, and should be removed\nbefore moving into a production environment.\n\nRemove <span class=\"token builtin class-name\">test</span> database and access to it? <span class=\"token punctuation\">[</span>Y/n<span class=\"token punctuation\">]</span> y\n - Dropping <span class=\"token builtin class-name\">test</span> database<span class=\"token punctuation\">..</span>.\n <span class=\"token punctuation\">..</span>. Success<span class=\"token operator\">!</span>\n - Removing privileges on <span class=\"token builtin class-name\">test</span> database<span class=\"token punctuation\">..</span>.\n <span class=\"token punctuation\">..</span>. Success<span class=\"token operator\">!</span>\n\nReloading the privilege tables will ensure that all changes made so far\nwill take effect immediately.\n\nReload privilege tables now? <span class=\"token punctuation\">[</span>Y/n<span class=\"token punctuation\">]</span> y\n <span class=\"token punctuation\">..</span>. Success<span class=\"token operator\">!</span>\n\nCleaning up<span class=\"token punctuation\">..</span>.\n\nAll done<span class=\"token operator\">!</span>  If you ve completed all of the above steps, your MariaDB\ninstallation should now be secure.\n\nThanks <span class=\"token keyword\">for</span> using MariaDB<span class=\"token operator\">!</span></code></pre></div>\n<ol start=\"3\">\n<li>\n<p>Instala un servidor de aplicaciones php php-fpm.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@valhalla:/home/debian<span class=\"token comment\"># apt-get install php php-fpm</span></code></pre></div>\n</li>\n<li>Crea un virtualhost al que vamos acceder con el nombre www.iesgnXX.es. Recuerda que tendrás que crear un registro CNAME en la zona DNS.</li>\n</ol>\n<p>Primero borrare las 3 configuraciones predeterminadas que habia hacer www.iesgn11.es y luego añadire la siguiente:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 599px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/9858015cf1ad0434112b5392011ec2c3/3d4e8/ovh7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.48414023372287%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACb0lEQVQ4y41TXW7bMAzO0+6xE+2hh9hZdpABG3aCPQ3D2odhwNB1XdLmr6mTNLYbx7Zsyz+S/Y2UbNcJinUKvpCmKIr8SI0msxnG0xmmixluSJ+wPre2W5KL5RzzFqwv7k7Q2mfLJS5+XGFU1xpAbdAY2bSg76azWTv7Kq2ghyAbo6HfYxBiRJ6YLl38GjtwtgHGt1tcXt9Txi4WKw+3ix3+kO3n1QpRLNmdLkIv00xCJAmqSiFJUowasuZ5SRsF8qKiTUkbOaS0toJsSmlzoK5tpnwGLVi3diCOhQ3IzhzAIK9QlIqClUgoYKWsc08EB2iepKY/3QdMbEBeHMz1YpMdO+3DDLqx7GnyeQ6K9veRhLdPkBUKIQe0XLSkoONmmMWxbiptfYb6UcmdQVF5nKmiCAdqgB8kEFT6UZa0J4q6PfPEY1/yaYbmAhyXWveDZcEXDmvqvvoMeWldw38UpuMlkbfyEzyEOQQRFVctlMXQxnogFbxDBiHaDLvVjQU3I8k10lIjpwMdZFU/i4zAWfddrmjOmD/OsjIzp01wrekV0HdJY8TypWVK5iCeH2P7ENLYREZ31oEZofUmwM6NcO/sjb2/5ASqvSzigKz4vo/dbgfXdeE4jvnebjYkPWRZSp3PjEzoiQ0RE2cRlRlGgvYlgjC2ATuHNE2JWHEki6LoUZb0csrSgHU0FfecUJn+h8Mu/88idiBkjTirUVKTLu8KfDwX+HQh8OU6RxSJpzl8CaYSqXGzKfD7vkCYapy9W2P0ZoxXZxO8frvEA/HeZ/ivTPuXRPMUJBp+rJDTqHyfSrz/GuHDtwifLyUOxOFfs01vMg83uXgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/9858015cf1ad0434112b5392011ec2c3/3d4e8/ovh7.png\"\n        srcset=\"/gatsbyjs/static/9858015cf1ad0434112b5392011ec2c3/acf4b/ovh7.png 173w,\n/gatsbyjs/static/9858015cf1ad0434112b5392011ec2c3/fc834/ovh7.png 345w,\n/gatsbyjs/static/9858015cf1ad0434112b5392011ec2c3/3d4e8/ovh7.png 599w\"\n        sizes=\"(max-width: 599px) 100vw, 599px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Crearemos un fichero para www.iesgn11.es, para ello copiaremos el fichero default y lo modificaremos</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@valhalla:/etc/nginx/sites-available$ <span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> default iesgn11\ndebian@valhalla:/etc/nginx/sites-available$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> iesgn11\nserver <span class=\"token punctuation\">{</span>\n\tlisten <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n\tlisten <span class=\"token punctuation\">[</span>::<span class=\"token punctuation\">]</span>:80<span class=\"token punctuation\">;</span>\n\n\troot /var/www/iesgn11<span class=\"token punctuation\">;</span>\n\n\tindex index.html index.htm index.nginx-debian.html<span class=\"token punctuation\">;</span>\n\n\tserver_name www.iesgn11.es<span class=\"token punctuation\">;</span>\n\n\tlocation / <span class=\"token punctuation\">{</span>\n\n\t\ttry_files <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span>/ <span class=\"token operator\">=</span><span class=\"token number\">404</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Crearemos el document root copiando de nuevo el default para el ejemplo.</p>\n<p>Crearemos el enlace simbólico:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@valhalla:/etc/nginx/sites-available$ <span class=\"token function\">sudo</span> <span class=\"token function\">ln</span> -s /etc/nginx/sites-available/iesgn11 /etc/nginx/sites-enabled/</code></pre></div>\n<p>Añadimos la ruta en nuestro /hosts local.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/366ed53c3c46395a55fded0c773a7075/2623a/ovh3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.57046979865772%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAA3klEQVQoz41Pyw6CMBDs52kKBOSgHkwM6tcSwoEPQDiIBU6Ex0Fh7G6k6sWwyWT2MTvbisv5hCAIcDwcsN/usHE9+P4GrutCrlewLKlhce15nmHHcbhv2zYzQUoJcS8KKKVQqjtzVVUoy1JzzXld11zHcYwoipAkCcIwRJpeea70Hs1JR7XAwij04SzLkOe5Nku1QYW27dE0PZ7Ph9GJcRzxD9M0MdPryYxwuyl9oGGzroPREP6+kIQEimEY9HKHvu9ArXebVEZD+aIvfxZ+uubgPCcWS4y+Fz/4nc/xAkcu+oVdVDBeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/366ed53c3c46395a55fded0c773a7075/36727/ovh3.png\"\n        srcset=\"/gatsbyjs/static/366ed53c3c46395a55fded0c773a7075/acf4b/ovh3.png 173w,\n/gatsbyjs/static/366ed53c3c46395a55fded0c773a7075/fc834/ovh3.png 345w,\n/gatsbyjs/static/366ed53c3c46395a55fded0c773a7075/36727/ovh3.png 690w,\n/gatsbyjs/static/366ed53c3c46395a55fded0c773a7075/17fa4/ovh3.png 1035w,\n/gatsbyjs/static/366ed53c3c46395a55fded0c773a7075/2623a/ovh3.png 1341w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"5\">\n<li>Cuando se acceda al virtualhost por defecto default nos tiene que redirigir al virtualhost que hemos creado en el punto anterior.</li>\n</ol>\n<p>crearemos un directorio en la ubicación de la paguina por defecto llamado /default.</p>\n<p>Modificaremos el archivo de configuración default:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">server <span class=\"token punctuation\">{</span>\n        listen <span class=\"token number\">80</span> default_server<span class=\"token punctuation\">;</span>\n        listen <span class=\"token punctuation\">[</span>::<span class=\"token punctuation\">]</span>:80 default_server<span class=\"token punctuation\">;</span>\n\n        root /var/www/html/default<span class=\"token punctuation\">;</span>\n\n        index index.html index.htm index.nginx-debian.html<span class=\"token punctuation\">;</span>\n\n        server_name _<span class=\"token punctuation\">;</span>\n        <span class=\"token builtin class-name\">return</span> <span class=\"token number\">301</span> <span class=\"token variable\">$scheme</span>://www.iesgn11.es<span class=\"token variable\">$request_uri</span><span class=\"token punctuation\">;</span>\n\n        location / <span class=\"token punctuation\">{</span>\n\n                try_files <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span>/ <span class=\"token operator\">=</span><span class=\"token number\">404</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>y por ultimo añadimos la ruta en /etc/hosts.</p>\n<ol start=\"6\">\n<li>Cuando se acceda a www.iesgnXX.es se nos redigirá a la página www.iesgnXX.es/principal</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">        location / <span class=\"token punctuation\">{</span>\n\n                try_files <span class=\"token variable\">$uri</span> <span class=\"token variable\">$uri</span>/ <span class=\"token operator\">=</span><span class=\"token number\">404</span><span class=\"token punctuation\">;</span>\n                <span class=\"token builtin class-name\">return</span> <span class=\"token number\">301</span> /principal/index.html<span class=\"token punctuation\">;</span>\n                location /principal <span class=\"token punctuation\">{</span>\n                        autoindex off<span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Crearemos el directorio y el index.html.</p>\n<ol start=\"7\">\n<li>En la página www.iesgnXX.es/principal se debe mostrar una página web estática (utiliza alguna plantilla para que tenga hoja de estilo). En esta página debe aparecer tu nombre, y una lista de enlaces a las aplicaciones que vamos a ir desplegando posteriormente.</li>\n</ol>\n<p>He descargado esta plantilla <a href=\"https://plantillashtmlgratis.com/todas-las-plantillas/plantilla/plantillas-html-css-para-descargar-gratis-flame/\">https://plantillashtmlgratis.com/todas-las-plantillas/plantilla/plantillas-html-css-para-descargar-gratis-flame/</a> y la he modificado un poco para hacerla mas simple y accesible para este proyecto, la he subido a github modificada así que la descargare desde ahi con git.\nRepositorio: <a href=\"https://github.com/franmadu6/FlameOvh\">https://github.com/franmadu6/FlameOvh</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/a714e8aec1c10baf03eba2badddbd02d/a987b/ovh4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACxUlEQVQoz0WS3VMaZxSHFwjLpwjyjcguC6sB5WOVL5eSRSQaiMZMrIkkEURN0pKYGJNMc9HpVS962Zve9KL/6pOXTDu9eOad884553fOnJ/UtSx+aLcxDINKpUKpVKJSLn+nPKdUFn//v/+x8S/znHk8r23U60hudwK3ZxmPK4XPk8HnyyLJGRwuBadHw+vL4Q/kWAjphMJzVr8TC+WJCoJLecKxNbyBDM9GUyTFoWCJBquBNXaDeSKxMttRnaZIXhfEF3R8/jwhr4bsUrnjVHHKCi6B063iciv4F3LY5BTj87dI6UiVwbLBvt7it2KNbqPHL81tdtp7/PGgx27nAfc7fX7vtlgpWeSrFvvNNt1aC0XbIh4vEIoV8Arx8fQ9kitWw6912OgMMfqPsE5H7Dwd0T05Zfj0OZ2Hx5i7j+haA7b6jxmYO3w0N+lstbGMFudmg5bZ416jxV+/fkGySys4HFm8EYPt/ogfxz9zdfuVN5++Mp79xOGLMy6/XDO5mXE8OWf69hUXlxMOH5/QOThhOhlxODwgmdrgdvYRySZFcUhJXE6FZvOI/eGEweCMTvsJewdjhseXPDx4yfHoDaOrG55dzHj56prL609MPrzD3DuiKaY/EiJ//vO3WFkKYrdHkT051GSVldAa6aSBqjZYT66jRtdZzbUwiiaZRJV8qkJxs0/mrkUwUCSt1sk2B8R0k+nVZyTJEcEnLKI5AoSFPeJqm5ZqoIeLRNJ18nqTTLSAtqihaXUyQmhN2ESP6CiJEvlsjWS8gk1Kc3U2Q9p1LTG1O3HLaZRokRNXiIJ9iUXVpJetcm8hTURYKpnvUFGrpMQG0VCBbLpKMGYQCxcox1UiNj+vL8SVT21u5Dsq+mKGm6QX3baEb7nGE0VjTzTueaLUSib3U3fZlBOsystkE2VUQcorvChrFD0h/OIWz8e3fAN6aVT7O+cUGgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/a714e8aec1c10baf03eba2badddbd02d/36727/ovh4.png\"\n        srcset=\"/gatsbyjs/static/a714e8aec1c10baf03eba2badddbd02d/acf4b/ovh4.png 173w,\n/gatsbyjs/static/a714e8aec1c10baf03eba2badddbd02d/fc834/ovh4.png 345w,\n/gatsbyjs/static/a714e8aec1c10baf03eba2badddbd02d/36727/ovh4.png 690w,\n/gatsbyjs/static/a714e8aec1c10baf03eba2badddbd02d/17fa4/ovh4.png 1035w,\n/gatsbyjs/static/a714e8aec1c10baf03eba2badddbd02d/a5044/ovh4.png 1380w,\n/gatsbyjs/static/a714e8aec1c10baf03eba2badddbd02d/a987b/ovh4.png 1920w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"8\">\n<li>Configura el nuevo virtualhost, para que pueda ejecutar PHP. Determina que configuración tiene por defecto php-fpm (socket unix o socket TCP) para configurar nginx de forma adecuada.</li>\n</ol>\n<p>Deberemos tener instalado php-fpm (ya instalado en el punto 3).</p>\n<p>Para que nginx pueda ejecutar php modificaremos nuestro fichero de nuevo:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">location ~ <span class=\"token punctuation\">\\</span>.php$ <span class=\"token punctuation\">{</span>\n\n        include snippets/fastcgi-php.conf<span class=\"token punctuation\">;</span>\n        fastcgi_pass unix:/var/run/php/php7.3-fpm.sock<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol start=\"9\">\n<li>Crea un fichero info.php que demuestre que está funcionando el servidor LEMP.</li>\n</ol>\n<p>creamos el fichero info.php y dentro le añadiremos lo siguiente:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token function\">phpinfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token delimiter important\">?></span></span></code></pre></div>\n<p>le he añadido un logo que vuelva a la pagina principal.</p>\n<p>Comprobaremos su funcionamiento, además añadiremos un link en nuestra pagina principal para que podamos acceder de manera inmediata.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/0b976328a1da7e5fe8463cacf554b6ae/a987b/ovh6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+klEQVQoz41S22oaURT1RdQHGwRNhtq0j/3IfEHAJPQDWgKlKXkNDWppTMZ4jaiZq+PcvKT2rUmgoHZuq/tMnZjSlnbDYrPPYa2z194nVq3yqF4Q+AucnJSwu3uIQuEQe/tvsR/iCHuFIzp7h4ODY+zsvMLrN+/RaNZRqVTAE58/PcUnwgdCDI8iIJjmPc7OvoDn7wl3BB31uoZGQ0ezqaP8sQtFteG5Dv4UMc/zwOC63koyQLlsoVickcASrZYAReljOFShaQoMQ6Nagq7riLie78MPAszn858dBlQwsHBdn7q5Izu3aLcd1GrXuLysknCbHmhRbtF9A4PBYO1sxV0ul2vL0aHnMcFbIrok6JKIhH6/C0mSHiCKIizLeuD8U7BYNHB+zkS/4+pKoW4Usjwky1qYWXej0eh/BQOUShYt5isJOuh02OzUUCyCqqp/F/TZQFcIAh+O44YdsqXUat/Isohut4NerwdBECDLcmjZNM1wIWtugMVi8eu3icIwJrRJi+xNiGjDtm1Mp1PMZjMo9gSypuPm5vPvRBKNjcdjan8cWmCDtuhl0zRCGIYOg3L/WoAoyVQbGKxmqVFmNes0yuwrxV6+eI5n29vgOA7ZbBZP0mls5DhscU+xmdtEbotDJpNBms5TqRQSiQSSyWSYHyMejyOfz+MHBBrtNDiqdvMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/0b976328a1da7e5fe8463cacf554b6ae/36727/ovh6.png\"\n        srcset=\"/gatsbyjs/static/0b976328a1da7e5fe8463cacf554b6ae/acf4b/ovh6.png 173w,\n/gatsbyjs/static/0b976328a1da7e5fe8463cacf554b6ae/fc834/ovh6.png 345w,\n/gatsbyjs/static/0b976328a1da7e5fe8463cacf554b6ae/36727/ovh6.png 690w,\n/gatsbyjs/static/0b976328a1da7e5fe8463cacf554b6ae/17fa4/ovh6.png 1035w,\n/gatsbyjs/static/0b976328a1da7e5fe8463cacf554b6ae/a5044/ovh6.png 1380w,\n/gatsbyjs/static/0b976328a1da7e5fe8463cacf554b6ae/a987b/ovh6.png 1920w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","timeToRead":6,"excerpt":"Configuración inicial de OVH Añadir clave de los profesores: Resolución de nombres Reiniciamos la maquina. Accedemos y verificamos su nombre…","frontmatter":{"title":"Tarea OVH. Lemp","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-11-11T00:00:00.000Z","categories":["Servicios"],"tags":["OVH","Lemp"]},"fields":{"slug":"/tarea-ovh-lemp","date":"November 10, 2020"}}},"pageContext":{"slug":"/tarea-ovh-lemp","nexttitle":"Reflexión vídeo OLIGOPOLY.","nextslug":"/reflexion-video-oligopoly","prevtitle":"Práctica 2: rclone - Gestionando nuestro almacenamiento en la nube (unidad 1)","prevslug":"/practica-2-rclone-gestionando-nuestro-almacenamiento-en-la-nube-unidad-1"}}}