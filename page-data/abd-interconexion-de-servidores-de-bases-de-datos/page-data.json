{"componentChunkName":"component---src-templates-post-js","path":"/abd-interconexion-de-servidores-de-bases-de-datos","result":{"data":{"markdownRemark":{"html":"<center><img alt=\"Interconexi&#xF3;n de Servidores\" src=\"https://www.juanluramirez.com/wp-content/uploads/2016/12/Portada-1.jpg\"></center>\n<p>Las interconexiones de servidores de bases de datos son operaciones que pueden ser muy útiles en diferentes contextos. Básicamente, se trata de acceder a datos que no están almacenados en nuestra base de datos, pudiendo combinarlos con los que ya tenemos.</p>\n<p>En esta práctica veremos varias formas de crear un enlace entre distintos servidores de bases de datos.</p>\n<p>Se pide:</p>\n<ul>\n<li>Realizar un enlace entre dos servidores de bases de datos ORACLE, explicando la configuración necesaria en ambos extremos y demostrando su funcionamiento.\n</li>\n<li>Realizar un enlace entre dos servidores de bases de datos Postgres, explicando la configuración necesaria en ambos extremos y demostrando su funcionamiento.\n</li>\n<li>Realizar un enlace entre un servidor ORACLE y otro Postgres o MySQL empleando Heterogeneus Services, explicando la configuración necesaria en ambos extremos y demostrando su funcionamiento.</li>\n</ul>\n<p>Los servidores enlazados siempre tendrán que estar instalados en máquinas diferentes.</p>\n<h2 id=\"enlace-entre-servidores-oracle\"><a href=\"#enlace-entre-servidores-oracle\" aria-label=\"enlace entre servidores oracle permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enlace entre servidores ORACLE.</h2>\n<p>Para los servidores de oracle he contado con dos maquinas centos7 y el oracle que utilizare en ellas sera el 12C, se llamarán oracle1 y oracle2.</p>\n<p><strong>Configuración Oracle Servidor</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@oracle1 vagrant<span class=\"token punctuation\">]</span><span class=\"token comment\"># nano /opt/oracle/product/12.2.0.1/dbhome_1/network/admin/listener.ora </span>\n<span class=\"token assign-left variable\">SID_LIST_LISTENER</span><span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>SID_LIST<span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span>SID_DESC<span class=\"token operator\">=</span>\n      <span class=\"token punctuation\">(</span>GLOBAL_DBNAME<span class=\"token operator\">=</span>orcl<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span>ORACLE_HOME<span class=\"token operator\">=</span>/u01/app/oracle/product/12.2.0.1/dbhome_1<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span>SID_NAME<span class=\"token operator\">=</span>orcl<span class=\"token punctuation\">))</span>\n  <span class=\"token punctuation\">)</span>\n\nLISTENER <span class=\"token operator\">=</span>\n<span class=\"token punctuation\">(</span>DESCRIPTION_LIST <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>DESCRIPTION <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span>ADDRESS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>PROTOCOL <span class=\"token operator\">=</span> IPC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>KEY <span class=\"token operator\">=</span> EXTPROC1521<span class=\"token punctuation\">))</span>\n    <span class=\"token punctuation\">(</span>ADDRESS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>PROTOCOL <span class=\"token operator\">=</span> TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST <span class=\"token operator\">=</span> <span class=\"token number\">172.22</span>.6.156<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT <span class=\"token operator\">=</span> <span class=\"token number\">1521</span><span class=\"token punctuation\">))</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span> </code></pre></div>\n<p><strong>Configuración Oracle Cliente</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@localhost vagrant<span class=\"token punctuation\">]</span><span class=\"token comment\"># nano /opt/oracle/product/12.2.0.1/dbhome_1/network/admin/tnsnames.ora</span>\nLISTENER_ORCL <span class=\"token operator\">=</span>\n <span class=\"token punctuation\">(</span>ADDRESS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>PROTOCOL <span class=\"token operator\">=</span> TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST <span class=\"token operator\">=</span> localhost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT <span class=\"token operator\">=</span> <span class=\"token number\">1521</span><span class=\"token punctuation\">))</span>\n\nORCL <span class=\"token operator\">=</span>\n <span class=\"token punctuation\">(</span>DESCRIPTION <span class=\"token operator\">=</span> Mi Servidor Oracle\n    <span class=\"token punctuation\">(</span>ADDRESS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>PROTOCOL <span class=\"token operator\">=</span> TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST <span class=\"token operator\">=</span> localhost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT <span class=\"token operator\">=</span> <span class=\"token number\">1521</span><span class=\"token punctuation\">))</span>\n    <span class=\"token punctuation\">(</span>CONNECT_DATA <span class=\"token operator\">=</span>\n        <span class=\"token punctuation\">(</span>SERVER <span class=\"token operator\">=</span> DEDICATED<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">(</span>SERVICE_NAME <span class=\"token operator\">=</span> orcl<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">)</span>\n\nOracleServer <span class=\"token operator\">=</span>\n <span class=\"token punctuation\">(</span>DESCRIPTION <span class=\"token operator\">=</span> Servidor Oracle1\n    <span class=\"token punctuation\">(</span>ADDRESS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>PROTOCOL <span class=\"token operator\">=</span> TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST <span class=\"token operator\">=</span> <span class=\"token number\">172.22</span>.8.230<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT <span class=\"token operator\">=</span> <span class=\"token number\">1521</span><span class=\"token punctuation\">))</span>\n    <span class=\"token punctuation\">(</span>CONNECT_DATA <span class=\"token operator\">=</span>\n        <span class=\"token punctuation\">(</span>SERVER <span class=\"token operator\">=</span> DEDICATED<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">(</span>SERVICE_NAME <span class=\"token operator\">=</span> orcl2<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>Reiniciaremos el servicio</strong></p>\n<ul>\n<li>lsnrctl stop: Detenemos el servicio.</li>\n<li>lsnrctl start: Iniciamos el servicio de nuevo.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>oracle@localhost ~<span class=\"token punctuation\">]</span>$ lsnrctl stop\n\nLSNRCTL <span class=\"token keyword\">for</span> Linux: Version <span class=\"token number\">12.2</span>.0.1.0 - Production on <span class=\"token number\">25</span>-FEB-2021 05:01:05\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1991</span>, <span class=\"token number\">2016</span>, Oracle.  All rights reserved.\n\nConnecting to <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>IPC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>KEY<span class=\"token operator\">=</span>EXTPROC1<span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\nThe <span class=\"token builtin class-name\">command</span> completed successfully\n<span class=\"token punctuation\">[</span>oracle@localhost ~<span class=\"token punctuation\">]</span>$ lsnrctl start\n\nLSNRCTL <span class=\"token keyword\">for</span> Linux: Version <span class=\"token number\">12.2</span>.0.1.0 - Production on <span class=\"token number\">25</span>-FEB-2021 05:01:10\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1991</span>, <span class=\"token number\">2016</span>, Oracle.  All rights reserved.\n\nStarting /opt/oracle/product/12.2.0.1/dbhome_1/bin/tnslsnr: please wait<span class=\"token punctuation\">..</span>.\n\nTNSLSNR <span class=\"token keyword\">for</span> Linux: Version <span class=\"token number\">12.2</span>.0.1.0 - Production\nSystem parameter <span class=\"token function\">file</span> is /opt/oracle/product/12.2.0.1/dbhome_1/network/admin/listener.ora\nLog messages written to /opt/oracle/diag/tnslsnr/localhost/listener/alert/log.xml\nListening on: <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>ipc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>KEY<span class=\"token operator\">=</span>EXTPROC1<span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\nListening on: <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\n\nConnecting to <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>IPC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>KEY<span class=\"token operator\">=</span>EXTPROC1<span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\nSTATUS of the LISTENER\n------------------------\nAlias                     LISTENER\nVersion                   TNSLSNR <span class=\"token keyword\">for</span> Linux: Version <span class=\"token number\">12.2</span>.0.1.0 - Production\nStart Date                <span class=\"token number\">25</span>-FEB-2021 05:01:10\nUptime                    <span class=\"token number\">0</span> days <span class=\"token number\">0</span> hr. <span class=\"token number\">0</span> min. <span class=\"token number\">0</span> sec\nTrace Level               off\nSecurity                  ON: Local OS Authentication\nSNMP                      OFF\nListener Parameter File   /opt/oracle/product/12.2.0.1/dbhome_1/network/admin/listener.ora\nListener Log File         /opt/oracle/diag/tnslsnr/localhost/listener/alert/log.xml\nListening Endpoints Summary<span class=\"token punctuation\">..</span>.\n  <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>ipc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>KEY<span class=\"token operator\">=</span>EXTPROC1<span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span><span class=\"token number\">0.0</span>.0.0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\nServices Summary<span class=\"token punctuation\">..</span>.\nService <span class=\"token string\">\"orcl2\"</span> has <span class=\"token number\">1</span> instance<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>.\n  Instance <span class=\"token string\">\"orcl2\"</span>, status UNKNOWN, has <span class=\"token number\">1</span> handler<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> this service<span class=\"token punctuation\">..</span>.</code></pre></div>\n<p><strong>Creación de Usuario</strong></p>\n<p>En el servidor.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>oracle@oracle1 ~<span class=\"token punctuation\">]</span>$ sqlplus / AS SYSDBA\n\nSQL*Plus: Release <span class=\"token number\">12.2</span>.0.1.0 Production on Thu Feb <span class=\"token number\">25</span> 05:08:55 <span class=\"token number\">2021</span>\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1982</span>, <span class=\"token number\">2016</span>, Oracle.  All rights reserved.\n\n\nConnected to:\nOracle Database 12c Enterprise Edition Release <span class=\"token number\">12.2</span>.0.1.0 - 64bit Production\n\nSQL<span class=\"token operator\">></span> create user usuariosv identified by fran<span class=\"token punctuation\">;</span>\n\nUser created.\n\nSQL<span class=\"token operator\">></span> grant create database <span class=\"token function\">link</span> to usuariosv<span class=\"token punctuation\">;</span>\n\nGrant succeeded.\n\n<span class=\"token comment\">#le daremos permisos y accederemos a oracle con la cuenta creada.</span>\n\nSQL<span class=\"token operator\">></span> create database <span class=\"token function\">link</span> cliente\n  <span class=\"token number\">2</span>  connect to usuariocliente\n  <span class=\"token number\">3</span>  identified by fran\n  <span class=\"token number\">4</span>  using <span class=\"token string\">'orcl2'</span><span class=\"token punctuation\">;</span>\n\nDatabase <span class=\"token function\">link</span> created.\n\n<span class=\"token keyword\">select</span> color,clave from perros@cliente , prueba<span class=\"token punctuation\">;</span>\nCOLOR\t\t\t  CLAVE\n------------------------- -------------------------\nBlanco\t \t\t  Podadora\nNegro  \t\t\t  Pepito            </code></pre></div>\n<h2 id=\"enlace-entre-servidores-postgres\"><a href=\"#enlace-entre-servidores-postgres\" aria-label=\"enlace entre servidores postgres permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enlace entre servidores Postgres.</h2>\n<h3 id=\"permitir-accesos-remotos\"><a href=\"#permitir-accesos-remotos\" aria-label=\"permitir accesos remotos permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Permitir Accesos Remotos</h3>\n<p><strong>Postgres1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@postgres1:/home/vagrant<span class=\"token comment\"># nano /etc/postgresql/11/main/postgresql.conf </span>\nlisten_addresses <span class=\"token operator\">=</span> <span class=\"token string\">'0'</span>\nroot@postgres1:/home/vagrant<span class=\"token comment\"># nano /etc/postgresql/11/main/pg_hba.conf </span>\n<span class=\"token function\">host</span>     all             all             <span class=\"token number\">0.0</span>.0.0/0\nroot@postgres1:/home/vagrant<span class=\"token comment\"># systemctl restart postgresql</span>\nroot@postgres1:/home/vagrant<span class=\"token comment\"># psql</span>\npsql: could not connect to server: No such <span class=\"token function\">file</span> or directory\n\tIs the server running locally and accepting\n\tconnections on Unix domain socket <span class=\"token string\">\"/var/run/postgresql/.s.PGSQL.5432\"</span>?</code></pre></div>\n<p>Para solucionar este error deberemos de tirar el cluster y volverlo a crear</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#como podemos comprobar el cluster esta apagado y no lo podemos encender</span>\nroot@postgres1:/home/vagrant<span class=\"token comment\"># pg_lsclusters</span>\nVer Cluster Port Status Owner    Data directory              Log <span class=\"token function\">file</span>\n<span class=\"token number\">11</span>  main    <span class=\"token number\">5432</span> down   postgres /var/lib/postgresql/11/main /var/log/postgresql/postgresql-11-main.log\n<span class=\"token comment\">#lo borraremos</span>\nroot@postgres1:/home/vagrant<span class=\"token comment\"># pg_dropcluster --stop 11 main</span>\n<span class=\"token comment\">#crearemos uno y lo iniciamos</span>\nroot@postgres1:/home/vagrant<span class=\"token comment\"># pg_createcluster --locale es_ES.UTF-8 --start 11 main</span>\nCreating new PostgreSQL cluster <span class=\"token number\">11</span>/main <span class=\"token punctuation\">..</span>.\n/usr/lib/postgresql/11/bin/initdb -D /var/lib/postgresql/11/main --auth-local peer --auth-host md5 --locale es_ES.UTF-8\nThe files belonging to this database system will be owned by user <span class=\"token string\">\"postgres\"</span><span class=\"token builtin class-name\">.</span>\nThis user must also own the server process.\n\nThe database cluster will be initialized with locale <span class=\"token string\">\"es_ES.UTF-8\"</span><span class=\"token builtin class-name\">.</span>\nThe default database encoding has accordingly been <span class=\"token builtin class-name\">set</span> to <span class=\"token string\">\"UTF8\"</span><span class=\"token builtin class-name\">.</span>\nThe default text search configuration will be <span class=\"token builtin class-name\">set</span> to <span class=\"token string\">\"spanish\"</span><span class=\"token builtin class-name\">.</span>\n\nData page checksums are disabled.\n\nfixing permissions on existing directory /var/lib/postgresql/11/main <span class=\"token punctuation\">..</span>. ok\ncreating subdirectories <span class=\"token punctuation\">..</span>. ok\nselecting default max_connections <span class=\"token punctuation\">..</span>. <span class=\"token number\">100</span>\nselecting default shared_buffers <span class=\"token punctuation\">..</span>. 128MB\nselecting default timezone <span class=\"token punctuation\">..</span>. UTC\nselecting dynamic shared memory implementation <span class=\"token punctuation\">..</span>. posix\ncreating configuration files <span class=\"token punctuation\">..</span>. ok\nrunning bootstrap script <span class=\"token punctuation\">..</span>. ok\nperforming post-bootstrap initialization <span class=\"token punctuation\">..</span>. ok\nsyncing data to disk <span class=\"token punctuation\">..</span>. ok\n\nSuccess. You can now start the database server using:\n\n    pg_ctlcluster <span class=\"token number\">11</span> main start\n\nVer Cluster Port Status Owner    Data directory              Log <span class=\"token function\">file</span>\n<span class=\"token number\">11</span>  main    <span class=\"token number\">5432</span> online postgres /var/lib/postgresql/11/main /var/log/postgresql/postgresql-11-main.log\nroot@postgres1:/home/vagrant<span class=\"token comment\"># pg_ctlcluster 11 main start</span>\n<span class=\"token comment\">#como podemos comprobar ya podemos utilizar postgres</span>\nroot@postgres1:/home/vagrant<span class=\"token comment\"># sudo -u postgres -i</span>\npostgres@postgres1:~$ psql\npsql <span class=\"token punctuation\">(</span><span class=\"token number\">11.10</span> <span class=\"token punctuation\">(</span>Debian <span class=\"token number\">11.10</span>-0+deb10u1<span class=\"token punctuation\">))</span>\nType <span class=\"token string\">\"help\"</span> <span class=\"token keyword\">for</span> help.\n\n<span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># </span></code></pre></div>\n<p><strong>Postgres2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@postgres2:/home/vagrant<span class=\"token comment\"># nano /etc/postgresql/11/main/postgresql.conf </span>\nlisten_addresses <span class=\"token operator\">=</span> <span class=\"token string\">'*'</span>\nroot@postgres2:/home/vagrant<span class=\"token comment\"># nano /etc/postgresql/11/main/pg_hba.conf </span>\n<span class=\"token function\">host</span>     all             all             <span class=\"token number\">0.0</span>.0.0/0\n<span class=\"token function\">host</span>    all             all             all                     md5\nroot@postgres2:/home/vagrant<span class=\"token comment\"># systemctl restart postgresql</span></code></pre></div>\n<h3 id=\"creamos-las-bases-de-datos-y-sus-respectivas-tablas\"><a href=\"#creamos-las-bases-de-datos-y-sus-respectivas-tablas\" aria-label=\"creamos las bases de datos y sus respectivas tablas permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Creamos las bases de datos y sus respectivas tablas</h3>\n<p><strong>Postgres1</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># CREATE USER postgres1 WITH PASSWORD 'fran';</span>\nCREATE ROLE\n<span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># CREATE DATABASE bdd1;</span>\nCREATE DATABASE\n<span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># GRANT ALL PRIVILEGES ON DATABASE bdd1 to postgres1;</span>\nGRANT</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres1:~$ psql -h localhost -U postgres1 -W -d bdd1\nPassword: \npsql <span class=\"token punctuation\">(</span><span class=\"token number\">11.10</span> <span class=\"token punctuation\">(</span>Debian <span class=\"token number\">11.10</span>-0+deb10u1<span class=\"token punctuation\">))</span>\nSSL connection <span class=\"token punctuation\">(</span>protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: <span class=\"token number\">256</span>, compression: off<span class=\"token punctuation\">)</span>\nType <span class=\"token string\">\"help\"</span> <span class=\"token keyword\">for</span> help.\n\n<span class=\"token assign-left variable\">bdd1</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">create table profesores<span class=\"token punctuation\">(</span>\ndni varchar<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span>,\nnombre varchar<span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span>,\napellido varchar<span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span>,\ndespacho varchar<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>,\ntelefono varchar<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span>,\nconstraint pk_dni primary key <span class=\"token punctuation\">(</span>dni<span class=\"token punctuation\">)</span>,\nconstraint ck_dni check<span class=\"token punctuation\">(</span>dni ~ <span class=\"token string\">'[0-9]{8}[A-Z]{1}$'</span> or dni ~ <span class=\"token string\">'[KLMXYZ]{1}[0-9]{7}[A-Z]{1}$'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'36987412P'</span>,<span class=\"token string\">'David'</span>,<span class=\"token string\">'Moreno Cruz'</span>,<span class=\"token string\">'01'</span>,<span class=\"token string\">'614576324'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'69874510G'</span>,<span class=\"token string\">'José Antonio'</span>,<span class=\"token string\">'Fernández Antona'</span>,<span class=\"token string\">'02'</span>,<span class=\"token string\">'655590038'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'53698745R'</span>,<span class=\"token string\">'Sara '</span>,<span class=\"token string\">'Serra Macia'</span>,<span class=\"token string\">'03'</span>,<span class=\"token string\">'674706264'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'36789874V'</span>,<span class=\"token string\">'Juan'</span>,<span class=\"token string\">'López Sirera'</span>,<span class=\"token string\">'04'</span>,<span class=\"token string\">'681829070'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'20247859Q'</span>,<span class=\"token string\">' Óscar'</span>,<span class=\"token string\">'Estévez González'</span>,<span class=\"token string\">'05'</span>,<span class=\"token string\">'699906800'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'28966631V'</span>,<span class=\"token string\">'José Manuel '</span>,<span class=\"token string\">'Pérez Fernández'</span>,<span class=\"token string\">'06'</span>,<span class=\"token string\">'634844973'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'45987785K'</span>,<span class=\"token string\">'Manuela '</span>,<span class=\"token string\">'Rubio Cabello'</span>,<span class=\"token string\">'07'</span>,<span class=\"token string\">'646837477'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'50236558G'</span>,<span class=\"token string\">'Carmen'</span>,<span class=\"token string\">'Sánchez Carvajal'</span>,<span class=\"token string\">'08'</span>,<span class=\"token string\">'696625669'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'46987845H'</span>,<span class=\"token string\">'Joaquín'</span>,<span class=\"token string\">'Aranda Almansaz'</span>,<span class=\"token string\">'09'</span>,<span class=\"token string\">'689117250'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'22025562A'</span>,<span class=\"token string\">'Lourdes'</span>,<span class=\"token string\">'Araujo Serna'</span>,<span class=\"token string\">'10'</span>,<span class=\"token string\">'621561960'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'49065878R'</span>,<span class=\"token string\">'Fernando'</span>,<span class=\"token string\">'Morilla García'</span>,<span class=\"token string\">'11'</span>,<span class=\"token string\">'685644007'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'36587899M'</span>,<span class=\"token string\">'Alfonso'</span>,<span class=\"token string\">'Urquía Moraleda'</span>,<span class=\"token string\">'12'</span>,<span class=\"token string\">'633145641'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'K5987455X'</span>,<span class=\"token string\">'Antonio'</span>,<span class=\"token string\">'Moreno Cano'</span>,<span class=\"token string\">'04'</span>,<span class=\"token string\">'614563124'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>Postgres2</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># CREATE USER postgres2 WITH PASSWORD 'fran';</span>\nCREATE ROLE\n<span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># CREATE DATABASE bdd2;</span>\nCREATE DATABASE\n<span class=\"token assign-left variable\">postgres</span><span class=\"token operator\">=</span><span class=\"token comment\"># GRANT ALL PRIVILEGES ON DATABASE bdd2 to postgres2;</span>\nGRANT</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres2:~$ psql -h localhost -U postgres2 -W -d bdd2\nPassword: \npsql <span class=\"token punctuation\">(</span><span class=\"token number\">11.10</span> <span class=\"token punctuation\">(</span>Debian <span class=\"token number\">11.10</span>-0+deb10u1<span class=\"token punctuation\">))</span>\nSSL connection <span class=\"token punctuation\">(</span>protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: <span class=\"token number\">256</span>, compression: off<span class=\"token punctuation\">)</span>\nType <span class=\"token string\">\"help\"</span> <span class=\"token keyword\">for</span> help.\n\n<span class=\"token assign-left variable\">bdd2</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> </code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">create table profesores<span class=\"token punctuation\">(</span>\ndni varchar<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span>,\nnombre varchar<span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span>,\napellido varchar<span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span>,\ndespacho varchar<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>,\ntelefono varchar<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span>,\nconstraint pk_dni primary key <span class=\"token punctuation\">(</span>dni<span class=\"token punctuation\">)</span>,\nconstraint ck_dni check<span class=\"token punctuation\">(</span>dni ~ <span class=\"token string\">'[0-9]{8}[A-Z]{1}$'</span> or dni ~ <span class=\"token string\">'[KLMXYZ]{1}[0-9]{7}[A-Z]{1}$'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'36987412P'</span>,<span class=\"token string\">'David'</span>,<span class=\"token string\">'Moreno Cruz'</span>,<span class=\"token string\">'01'</span>,<span class=\"token string\">'614576324'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into profesores\nvalues <span class=\"token punctuation\">(</span><span class=\"token string\">'69874510G'</span>,<span class=\"token string\">'José Antonio'</span>,<span class=\"token string\">'Fernández Antona'</span>,<span class=\"token string\">'02'</span>,<span class=\"token string\">'655590038'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"interconexiones\"><a href=\"#interconexiones\" aria-label=\"interconexiones permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Interconexiones</h3>\n<p>postgres1</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres1:~$ psql -d bdd1\npsql <span class=\"token punctuation\">(</span><span class=\"token number\">11.10</span> <span class=\"token punctuation\">(</span>Debian <span class=\"token number\">11.10</span>-0+deb10u1<span class=\"token punctuation\">))</span>\nType <span class=\"token string\">\"help\"</span> <span class=\"token keyword\">for</span> help.\n\n<span class=\"token assign-left variable\">bdd1</span><span class=\"token operator\">=</span><span class=\"token comment\"># create extension dblink;</span>\nCREATE EXTENSION\n<span class=\"token assign-left variable\">bdd1</span><span class=\"token operator\">=</span><span class=\"token comment\"># \\q</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres1:~$ psql -h localhost -U postgres1 -W -d bdd1\nPassword: \npsql <span class=\"token punctuation\">(</span><span class=\"token number\">11.10</span> <span class=\"token punctuation\">(</span>Debian <span class=\"token number\">11.10</span>-0+deb10u1<span class=\"token punctuation\">))</span>\nSSL connection <span class=\"token punctuation\">(</span>protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: <span class=\"token number\">256</span>, compression: off<span class=\"token punctuation\">)</span>\nType <span class=\"token string\">\"help\"</span> <span class=\"token keyword\">for</span> help.\n\n<span class=\"token assign-left variable\">bdd1</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token assign-left variable\">bdd1</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> SELECT * FROM dblink<span class=\"token punctuation\">(</span><span class=\"token string\">'dbname=bdd2 host=172.22.3.40 user=postgres2 password=fran'</span>, <span class=\"token string\">'select * from profesores'</span><span class=\"token punctuation\">)</span> AS profesores <span class=\"token punctuation\">(</span>dni varchar, nombre varchar, apellido varchar, despacho varchar, telefono varchar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    dni    <span class=\"token operator\">|</span>    nombre    <span class=\"token operator\">|</span>     apellido     <span class=\"token operator\">|</span> despacho <span class=\"token operator\">|</span> telefono  \n-----------+--------------+------------------+----------+-----------\n 36987412P <span class=\"token operator\">|</span> David        <span class=\"token operator\">|</span> Moreno Cruz      <span class=\"token operator\">|</span> 01       <span class=\"token operator\">|</span> <span class=\"token number\">614576324</span>\n 69874510G <span class=\"token operator\">|</span> José Antonio <span class=\"token operator\">|</span> Fernández Antona <span class=\"token operator\">|</span> 02       <span class=\"token operator\">|</span> <span class=\"token number\">655590038</span></code></pre></div>\n<p>postgres2</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres2:~$ psql -d bdd2\npsql <span class=\"token punctuation\">(</span><span class=\"token number\">11.10</span> <span class=\"token punctuation\">(</span>Debian <span class=\"token number\">11.10</span>-0+deb10u1<span class=\"token punctuation\">))</span>\nType <span class=\"token string\">\"help\"</span> <span class=\"token keyword\">for</span> help.\n\n<span class=\"token assign-left variable\">bdd2</span><span class=\"token operator\">=</span><span class=\"token comment\"># create extension dblink;</span>\nCREATE EXTENSION\n<span class=\"token assign-left variable\">bdd2</span><span class=\"token operator\">=</span><span class=\"token comment\"># \\q</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@postgres2:~$ psql -h localhost -U postgres2 -W -d bdd2\nPassword: \npsql <span class=\"token punctuation\">(</span><span class=\"token number\">11.10</span> <span class=\"token punctuation\">(</span>Debian <span class=\"token number\">11.10</span>-0+deb10u1<span class=\"token punctuation\">))</span>\nSSL connection <span class=\"token punctuation\">(</span>protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, bits: <span class=\"token number\">256</span>, compression: off<span class=\"token punctuation\">)</span>\nType <span class=\"token string\">\"help\"</span> <span class=\"token keyword\">for</span> help.\n\n<span class=\"token assign-left variable\">bdd2</span><span class=\"token operator\">=</span><span class=\"token operator\">></span> SELECT * FROM dblink<span class=\"token punctuation\">(</span><span class=\"token string\">'dbname=bdd1 host=172.22.5.30 user=postgres1 password=fran'</span>, <span class=\"token string\">'select * from profesores'</span><span class=\"token punctuation\">)</span> AS profesores <span class=\"token punctuation\">(</span>dni varchar, nombre varchar, apellido varchar, despacho varchar, telefono varchar<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    dni    <span class=\"token operator\">|</span>    nombre    <span class=\"token operator\">|</span>     apellido     <span class=\"token operator\">|</span> despacho <span class=\"token operator\">|</span> telefono  \n-----------+--------------+------------------+----------+-----------\n 36987412P <span class=\"token operator\">|</span> David        <span class=\"token operator\">|</span> Moreno Cruz      <span class=\"token operator\">|</span> 01       <span class=\"token operator\">|</span> <span class=\"token number\">614576324</span>\n 69874510G <span class=\"token operator\">|</span> José Antonio <span class=\"token operator\">|</span> Fernández Antona <span class=\"token operator\">|</span> 02       <span class=\"token operator\">|</span> <span class=\"token number\">655590038</span>\n 53698745R <span class=\"token operator\">|</span> Sara         <span class=\"token operator\">|</span> Serra Macia      <span class=\"token operator\">|</span> 03       <span class=\"token operator\">|</span> <span class=\"token number\">674706264</span>\n 36789874V <span class=\"token operator\">|</span> Juan         <span class=\"token operator\">|</span> López Sirera     <span class=\"token operator\">|</span> 04       <span class=\"token operator\">|</span> <span class=\"token number\">681829070</span>\n 20247859Q <span class=\"token operator\">|</span>  Óscar       <span class=\"token operator\">|</span> Estévez González <span class=\"token operator\">|</span> 05       <span class=\"token operator\">|</span> <span class=\"token number\">699906800</span>\n 28966631V <span class=\"token operator\">|</span> José Manuel  <span class=\"token operator\">|</span> Pérez Fernández  <span class=\"token operator\">|</span> 06       <span class=\"token operator\">|</span> <span class=\"token number\">634844973</span>\n 45987785K <span class=\"token operator\">|</span> Manuela      <span class=\"token operator\">|</span> Rubio Cabello    <span class=\"token operator\">|</span> 07       <span class=\"token operator\">|</span> <span class=\"token number\">646837477</span>\n 50236558G <span class=\"token operator\">|</span> Carmen       <span class=\"token operator\">|</span> Sánchez Carvajal <span class=\"token operator\">|</span> 08       <span class=\"token operator\">|</span> <span class=\"token number\">696625669</span>\n 46987845H <span class=\"token operator\">|</span> Joaquín      <span class=\"token operator\">|</span> Aranda Almansaz  <span class=\"token operator\">|</span> 09       <span class=\"token operator\">|</span> <span class=\"token number\">689117250</span>\n 22025562A <span class=\"token operator\">|</span> Lourdes      <span class=\"token operator\">|</span> Araujo Serna     <span class=\"token operator\">|</span> <span class=\"token number\">10</span>       <span class=\"token operator\">|</span> <span class=\"token number\">621561960</span>\n 49065878R <span class=\"token operator\">|</span> Fernando     <span class=\"token operator\">|</span> Morilla García   <span class=\"token operator\">|</span> <span class=\"token number\">11</span>       <span class=\"token operator\">|</span> <span class=\"token number\">685644007</span>\n 36587899M <span class=\"token operator\">|</span> Alfonso      <span class=\"token operator\">|</span> Urquía Moraleda  <span class=\"token operator\">|</span> <span class=\"token number\">12</span>       <span class=\"token operator\">|</span> <span class=\"token number\">633145641</span>\n K5987455X <span class=\"token operator\">|</span> Antonio      <span class=\"token operator\">|</span> Moreno Cano      <span class=\"token operator\">|</span> 04       <span class=\"token operator\">|</span> <span class=\"token number\">614563124</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">13</span> rows<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Como podemos comprobar ya podemos realizar insterconexiones entre ambas maquinas en la bdd2 añadí menos datos a las tablas para que podamos apreciar el cambio de una a otra.</p>\n<h2 id=\"enlace-entre-servidor-oracle-y-postgres-o-mysql-empleando-heterogeneus-services\"><a href=\"#enlace-entre-servidor-oracle-y-postgres-o-mysql-empleando-heterogeneus-services\" aria-label=\"enlace entre servidor oracle y postgres o mysql empleando heterogeneus services permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enlace entre servidor ORACLE y Postgres o MySQL empleando Heterogeneus Services.</h2>\n<h3 id=\"oracle-a-postgres\"><a href=\"#oracle-a-postgres\" aria-label=\"oracle a postgres permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Oracle a Postgres.</h3>\n<p>Instalación de la paquetería necesaria.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@oracle1 vagrant<span class=\"token punctuation\">]</span><span class=\"token comment\"># yum install postgresql-odbc</span></code></pre></div>\n<p>Una vez instalada la paqueteria accederemos al archivo /etc/odbcinst.ini, en el podremos ver los drivers existentes, en nuestro caso nos interesa el de postgres y nos fijaremos en como se llama especificamente.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@oracle1 vagrant<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/odbcinst.ini</span>\n<span class=\"token comment\"># Example driver definitions</span>\n\n<span class=\"token comment\"># Driver from the postgresql-odbc package</span>\n<span class=\"token comment\"># Setup from the unixODBC package</span>\n<span class=\"token punctuation\">[</span>PostgreSQL<span class=\"token punctuation\">]</span>\nDescription\t<span class=\"token operator\">=</span> ODBC <span class=\"token keyword\">for</span> PostgreSQL\nDriver\t\t<span class=\"token operator\">=</span> /usr/lib/psqlodbcw.so\nSetup\t\t<span class=\"token operator\">=</span> /usr/lib/libodbcpsqlS.so\nDriver64\t<span class=\"token operator\">=</span> /usr/lib64/psqlodbcw.so\nSetup64\t\t<span class=\"token operator\">=</span> /usr/lib64/libodbcpsqlS.so\nFileUsage\t<span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n\n<span class=\"token comment\"># Driver from the mysql-connector-odbc package</span>\n<span class=\"token comment\"># Setup from the unixODBC package</span>\n<span class=\"token punctuation\">[</span>MySQL<span class=\"token punctuation\">]</span>\nDescription\t<span class=\"token operator\">=</span> ODBC <span class=\"token keyword\">for</span> MySQL\nDriver\t\t<span class=\"token operator\">=</span> /usr/lib/libmyodbc5.so\nSetup\t\t<span class=\"token operator\">=</span> /usr/lib/libodbcmyS.so\nDriver64\t<span class=\"token operator\">=</span> /usr/lib64/libmyodbc5.so\nSetup64\t\t<span class=\"token operator\">=</span> /usr/lib64/libodbcmyS.so\nFileUsage\t<span class=\"token operator\">=</span> <span class=\"token number\">1</span></code></pre></div>\n<p>Crearemos un DSN llamado <strong>odbc.ini</strong> que determinará la conexión al gestor que especifiquemos.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@oracle1 vagrant<span class=\"token punctuation\">]</span><span class=\"token comment\"># nano /etc/odbc.ini</span>\n<span class=\"token punctuation\">[</span>PSQLU<span class=\"token punctuation\">]</span>\nDebug           <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nCommLog         <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nReadOnly        <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nDriver          <span class=\"token operator\">=</span> PostgreSQL\nServername\t<span class=\"token operator\">=</span> <span class=\"token number\">172.22</span>.3.40  \nUsername        <span class=\"token operator\">=</span> postgres2     \nPassword        <span class=\"token operator\">=</span> fran   \nPort            <span class=\"token operator\">=</span> <span class=\"token number\">5432</span>\nDatabase        <span class=\"token operator\">=</span> bdd2   \nTrace           <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\nTraceFile\t<span class=\"token operator\">=</span> /tmp/sql.log</code></pre></div>\n<p>Ya tendremos configurado el driver de ODBC, probaremos el resultado.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@oracle1 vagrant<span class=\"token punctuation\">]</span><span class=\"token comment\"># isql PSQLU</span>\n+---------------------------------------+\n<span class=\"token operator\">|</span> Connected<span class=\"token operator\">!</span>                            <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>                                       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> sql-statement                         <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token builtin class-name\">help</span> <span class=\"token punctuation\">[</span>tablename<span class=\"token punctuation\">]</span>                      <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> quit                                  <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>                                       <span class=\"token operator\">|</span>\n+---------------------------------------+\nSQL<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> * from profesores<span class=\"token punctuation\">;</span>\n+----------+----------------+---------------------------------------------------+-----------+----------+\n<span class=\"token operator\">|</span> dni      <span class=\"token operator\">|</span> nombre         <span class=\"token operator\">|</span> apellido                                          <span class=\"token operator\">|</span> despacho  <span class=\"token operator\">|</span> telefono <span class=\"token operator\">|</span>\n+----------+----------------+---------------------------------------------------+-----------+----------+\n<span class=\"token operator\">|</span> 36987412P<span class=\"token operator\">|</span> David          <span class=\"token operator\">|</span> Moreno Cruz                                       <span class=\"token operator\">|</span> 01        <span class=\"token operator\">|</span> <span class=\"token number\">614576324</span><span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 69874510G<span class=\"token operator\">|</span> José Antonio  <span class=\"token operator\">|</span> Fernández Antona                                 <span class=\"token operator\">|</span> 02        <span class=\"token operator\">|</span> <span class=\"token number\">655590038</span><span class=\"token operator\">|</span>\n+----------+----------------+---------------------------------------------------+-----------+----------+\nSQLRowCount returns <span class=\"token number\">2</span>\n<span class=\"token number\">2</span> rows fetched\nSQL<span class=\"token operator\">></span> create table coches<span class=\"token punctuation\">(</span>nombre varchar<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\nSQLRowCount returns <span class=\"token number\">0</span>\nSQL<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> * from coches<span class=\"token punctuation\">;</span>\n+-----------+\n<span class=\"token operator\">|</span> nombre    <span class=\"token operator\">|</span>\n+-----------+\n+-----------+\nSQLRowCount returns <span class=\"token number\">0</span>\nSQL<span class=\"token operator\">></span> insert into coches <span class=\"token punctuation\">(</span>nombre<span class=\"token punctuation\">)</span> values <span class=\"token punctuation\">(</span><span class=\"token string\">'Ferrari'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nSQLRowCount returns <span class=\"token number\">1</span>\nSQL<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> * from coches<span class=\"token punctuation\">;</span>\n+-----------+\n<span class=\"token operator\">|</span> nombre    <span class=\"token operator\">|</span>\n+-----------+\n<span class=\"token operator\">|</span> Ferrari   <span class=\"token operator\">|</span>\n+-----------+\nSQLRowCount returns <span class=\"token number\">1</span>\n<span class=\"token number\">1</span> rows fetched</code></pre></div>\n<p>Como podemos comprobar la configuración del driver ha sido exitosa, ahora procederemos a configurar Oracle para que pueda usar dicho driver exitosamente.</p>\n<p><strong>Heterogeneous Services</strong><br>\nEs un componente dentro del servidor de base de datos de Oracle que se requiere para acceder a un sistema de base de datos que no es de Oracle. </p>\n<p>Generaremos el siguiente fichero:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>oracle@oracle1 ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">nano</span> /opt/oracle/product/12.2.0.1/dbhome_1/hs/admin/initPSQLU.ora\nHS_FDS_CONNECT_INFO <span class=\"token operator\">=</span> PSQLU\nHS_FDS_TRACE_LEVEL <span class=\"token operator\">=</span> DEBUG\nHS_FDS_SHAREABLE_NAME <span class=\"token operator\">=</span> /usr/lib64/psqlodbcw.so\nHS_LANGUAGE <span class=\"token operator\">=</span> AMERICAN_AMERICA.WE8ISO8859P1\n<span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">ODBCINI</span><span class=\"token operator\">=</span>/etc/odbc.ini</code></pre></div>\n<p>Configuráremos el listener para que escuche peticiones hacia el driver ODBC:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@oracle1 vagrant<span class=\"token punctuation\">]</span><span class=\"token comment\"># nano /opt/oracle/product/12.2.0.1/dbhome_1/network/admin/listener.ora</span>\nLISTENER <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>DESCRIPTION_LIST <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span>DESCRIPTION <span class=\"token operator\">=</span>\n      <span class=\"token punctuation\">(</span>ADDRESS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>PROTOCOL <span class=\"token operator\">=</span> TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST <span class=\"token operator\">=</span> localhost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT <span class=\"token operator\">=</span> <span class=\"token number\">1521</span><span class=\"token punctuation\">))</span>\n      <span class=\"token punctuation\">(</span>ADDRESS <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>PROTOCOL <span class=\"token operator\">=</span> IPC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>KEY <span class=\"token operator\">=</span> EXTPROC1521<span class=\"token punctuation\">))</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n\n<span class=\"token assign-left variable\">SID_LIST_LISTENER</span><span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>SID_LIST<span class=\"token operator\">=</span>\n      <span class=\"token punctuation\">(</span>SID_DESC<span class=\"token operator\">=</span>\n         <span class=\"token punctuation\">(</span>SID_NAME<span class=\"token operator\">=</span>PSQLU<span class=\"token punctuation\">)</span>\n         <span class=\"token punctuation\">(</span>ORACLE_HOME<span class=\"token operator\">=</span>/opt/oracle/product/12.2.0.1/dbhome_1<span class=\"token punctuation\">)</span>\n         <span class=\"token punctuation\">(</span>PROGRAM<span class=\"token operator\">=</span>dg4odbc<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span></code></pre></div>\n<p>Modifiraremos el fichero de nombre que facilita el acceso a servidores remotos.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>root@oracle1 vagrant<span class=\"token punctuation\">]</span><span class=\"token comment\"># nano /opt/oracle/product/12.2.0.1/dbhome_1/network/admin/tnsnames.ora </span>\nPSQLU  <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span>localhost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">))</span>\n    <span class=\"token punctuation\">(</span>CONNECT_DATA<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>SID<span class=\"token operator\">=</span>PSQLU<span class=\"token punctuation\">))</span>\n    <span class=\"token punctuation\">(</span>HS<span class=\"token operator\">=</span>OK<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span></code></pre></div>\n<p>Accederemos al usuario Oracle de nuestro sistema y reiniciaremos el proceso de listener:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>oracle@oracle1 ~<span class=\"token punctuation\">]</span>$ lsnrctl stop\n\nLSNRCTL <span class=\"token keyword\">for</span> Linux: Version <span class=\"token number\">12.2</span>.0.1.0 - Production on <span class=\"token number\">25</span>-FEB-2021 08:48:28\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1991</span>, <span class=\"token number\">2016</span>, Oracle.  All rights reserved.\n\nConnecting to <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span>localhost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\nThe <span class=\"token builtin class-name\">command</span> completed successfully\n<span class=\"token punctuation\">[</span>oracle@oracle1 ~<span class=\"token punctuation\">]</span>$ lsnrctl start\n\nLSNRCTL <span class=\"token keyword\">for</span> Linux: Version <span class=\"token number\">12.2</span>.0.1.0 - Production on <span class=\"token number\">25</span>-FEB-2021 08:48:30\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1991</span>, <span class=\"token number\">2016</span>, Oracle.  All rights reserved.\n\nStarting /opt/oracle/product/12.2.0.1/dbhome_1/bin/tnslsnr: please wait<span class=\"token punctuation\">..</span>.\n\nTNSLSNR <span class=\"token keyword\">for</span> Linux: Version <span class=\"token number\">12.2</span>.0.1.0 - Production\nSystem parameter <span class=\"token function\">file</span> is /opt/oracle/product/12.2.0.1/dbhome_1/network/admin/listener.ora\nLog messages written to /opt/oracle/diag/tnslsnr/oracle1/listener/alert/log.xml\nListening on: <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span>oracle1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\nListening on: <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>ipc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>KEY<span class=\"token operator\">=</span>EXTPROC1521<span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\n\nConnecting to <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span>localhost<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\nSTATUS of the LISTENER\n------------------------\nAlias                     LISTENER\nVersion                   TNSLSNR <span class=\"token keyword\">for</span> Linux: Version <span class=\"token number\">12.2</span>.0.1.0 - Production\nStart Date                <span class=\"token number\">25</span>-FEB-2021 08:48:31\nUptime                    <span class=\"token number\">0</span> days <span class=\"token number\">0</span> hr. <span class=\"token number\">0</span> min. <span class=\"token number\">8</span> sec\nTrace Level               off\nSecurity                  ON: Local OS Authentication\nSNMP                      OFF\nListener Parameter File   /opt/oracle/product/12.2.0.1/dbhome_1/network/admin/listener.ora\nListener Log File         /opt/oracle/diag/tnslsnr/oracle1/listener/alert/log.xml\nListening Endpoints Summary<span class=\"token punctuation\">..</span>.\n  <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>tcp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST<span class=\"token operator\">=</span>oracle1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT<span class=\"token operator\">=</span><span class=\"token number\">1521</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">(</span>DESCRIPTION<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ADDRESS<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>PROTOCOL<span class=\"token operator\">=</span>ipc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>KEY<span class=\"token operator\">=</span>EXTPROC1521<span class=\"token punctuation\">))</span><span class=\"token punctuation\">)</span>\nServices Summary<span class=\"token punctuation\">..</span>.\nService <span class=\"token string\">\"PSQLU\"</span> has <span class=\"token number\">1</span> instance<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>.\n  Instance <span class=\"token string\">\"PSQLU\"</span>, status UNKNOWN, has <span class=\"token number\">1</span> handler<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> this service<span class=\"token punctuation\">..</span>.\nThe <span class=\"token builtin class-name\">command</span> completed successfully</code></pre></div>\n<p>Accederemos a nuestro usuario de oracle y crearemos un enlace para comprobar la configuración.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> create database <span class=\"token function\">link</span> postgresconn\n  <span class=\"token number\">2</span>  connect to <span class=\"token string\">\"postgres2\"</span> identified by <span class=\"token string\">\"fran\"</span>\n  <span class=\"token number\">3</span>  using <span class=\"token string\">'PSQLU'</span><span class=\"token punctuation\">;</span>\n\nDatabase <span class=\"token function\">link</span> created.\n\nSQL<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> * from coches@postgresconn<span class=\"token punctuation\">;</span>\n\nNOMBRE\n-------------------------\nFerrari</code></pre></div>\n<h3 id=\"postgres-a-oracle\"><a href=\"#postgres-a-oracle\" aria-label=\"postgres a oracle permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Postgres a Oracle.</h3>\n<p>Instalamos la paquetería requerida.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@postgres2:/home/vagrant<span class=\"token comment\"># apt install libaio1 postgresql-server-dev-all build-essential git</span></code></pre></div>\n<p>Accederemos al usuario postgres y descargaremos los paquetes del sitio oficial de Oracle:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@postgres2:~$ <span class=\"token function\">su</span> - postgres \nPassword: \npostgres@postgres2:~$\npostgres@postgres2:~$ <span class=\"token function\">wget</span> https://download.oracle.com/otn_software/linux/instantclient/211000/instantclient-basic-linux.x64-21.1.0.0.0.zip\npostgres@postgres2:~$ <span class=\"token function\">wget</span> https://download.oracle.com/otn_software/linux/instantclient/211000/instantclient-sdk-linux.x64-21.1.0.0.0.zip\npostgres@postgres2:~$ <span class=\"token function\">wget</span> https://download.oracle.com/otn_software/linux/instantclient/211000/instantclient-sqlplus-linux.x64-21.1.0.0.0.zip</code></pre></div>\n<p>Descomprimiremos los archivos con unzip.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres2:~$ <span class=\"token function\">unzip</span> instantclient-basic-linux.x64-21.1.0.0.0.zip\npostgres@postgres2:~$ <span class=\"token function\">unzip</span> instantclient-sqlplus-linux.x64-21.1.0.0.0.zip\npostgres@postgres2:~$ <span class=\"token function\">unzip</span> instantclient-sdk-linux.x64-21.1.0.0.0.zip</code></pre></div>\n<p>Despues de descomprimir los 3 archivos se nos creará una carpeta llamada instantclient<em>21</em>1.</p>\n<p>Estableceremos las nuevas variables de entorno:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres2:~$  <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">ORACLE_HOME</span><span class=\"token operator\">=</span>/var/lib/postgresql/instantclient_21_1\npostgres@postgres2:~$  <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">LD_LIBRARY_PATH</span><span class=\"token operator\">=</span><span class=\"token variable\">$LD_LIBRARY_PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$ORACLE_HOME</span>\npostgres@postgres2:~$  <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token environment constant\">$PATH</span><span class=\"token builtin class-name\">:</span><span class=\"token variable\">$ORACLE_HOME</span></code></pre></div>\n<p>Para comprobar si hemos puesto correctamente las variables utilizaremos el comando wich que nos deberá devolver la ruta.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres2:/var/lib$ <span class=\"token function\">which</span> sqlplus\n/var/lib/postgresql/instantclient_21_1/sqlplus</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">postgres@postgres2:~$ sqlplus usuariosv/fran@192.168.2.124/ORCL\n\nSQL*Plus: Release <span class=\"token number\">21.0</span>.0.0.0 - Production on Thu Feb <span class=\"token number\">25</span> <span class=\"token number\">19</span>:51:07 <span class=\"token number\">2021</span>\nVersion <span class=\"token number\">21.1</span>.0.0.0\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1982</span>, <span class=\"token number\">2020</span>, Oracle.  All rights reserved.\n\nLast Successful login time: Thu Feb <span class=\"token number\">25</span> <span class=\"token number\">2021</span> <span class=\"token number\">19</span>:48:17 +00:00\n\nConnected to:\nOracle Database 12c Enterprise Edition Release <span class=\"token number\">12.2</span>.0.1.0 - 64bit Production\n\nSQL<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> * from prueba<span class=\"token punctuation\">;</span>\n\nNOMBRE\t\t\t  CLAVE\n------------------------- -------------------------\nMariano \t\t  Podadora</code></pre></div>","timeToRead":14,"excerpt":"Las interconexiones de servidores de bases de datos son operaciones que pueden ser muy útiles en diferentes contextos. Básicamente, se trata…","frontmatter":{"title":"[ABD] - Interconexión de Servidores de Bases de Datos","cover":"https://img.icons8.com/ios/452/work.png","date":"2021-02-11T00:00:00.000Z","categories":["ABD"],"tags":["Interconexión de Servidores"]},"fields":{"slug":"/abd-interconexion-de-servidores-de-bases-de-datos","date":"February 10, 2021"}}},"pageContext":{"slug":"/abd-interconexion-de-servidores-de-bases-de-datos","nexttitle":"Instalación y configuración básica de VMWare ESXi","nextslug":"/instalacion-y-configuracion-basica-de-vm-ware-es-xi","prevtitle":"Sistema de copias de seguridad","prevslug":"/sistema-de-copias-de-seguridad"}}}