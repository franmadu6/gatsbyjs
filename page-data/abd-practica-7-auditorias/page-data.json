{"componentChunkName":"component---src-templates-post-js","path":"/abd-practica-7-auditorias","result":{"data":{"markdownRemark":{"html":"<center><img alt=\"Auditor&#xED;as base de datos\" src=\"https://miro.medium.com/max/413/1*z2Q0z24IbwF1RLPa4X6glw.png\"></center>\n<p>Realiza y documenta adecuadamente las siguientes operaciones:</p>\n<ol>\n<li>Activa desde SQL*Plus la auditoría de los intentos de acceso fallidos al sistema. Comprueba su funcionamiento. </li>\n</ol>\n<p>Visualizaremos los parametros de auditorias.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> SHOW PARAMETER AUDIT\n\nNAME\t\t\t\t     TYPE\t VALUE\n------------------------------------ ----------- ------------------------------\naudit_file_dest \t\t     string\t /opt/oracle/admin/ORCL/adump\naudit_sys_operations\t\t     boolean\t FALSE\naudit_syslog_level\t\t     string\naudit_trail\t\t\t     string\t NONE\nunified_audit_sga_queue_size\t     integer\t <span class=\"token number\">1048576</span></code></pre></div>\n<p>Activamos audit_trail:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> ALTER SYSTEM SET <span class=\"token assign-left variable\">audit_trail</span><span class=\"token operator\">=</span>db <span class=\"token assign-left variable\">scope</span><span class=\"token operator\">=</span>spfile<span class=\"token punctuation\">;</span>\n\nSystem altered.</code></pre></div>\n<p>Reiniciaremos Oracle.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> SHUTDOWN\nDatabase closed.\nDatabase dismounted.\nORACLE instance shut down.\nSQL<span class=\"token operator\">></span> STARTUP\nORACLE instance started.\n\nTotal System Global Area  <span class=\"token number\">629145600</span> bytes\nFixed Size\t\t    <span class=\"token number\">8623832</span> bytes\nVariable Size\t\t  <span class=\"token number\">524290344</span> bytes\nDatabase Buffers\t   <span class=\"token number\">88080384</span> bytes\nRedo Buffers\t\t    <span class=\"token number\">8151040</span> bytes\nDatabase mounted.\nDatabase opened.\nSQL<span class=\"token operator\">></span> ALTER <span class=\"token environment constant\">SESSION</span> SET <span class=\"token string\">\"_ORACLE_SCRIPT\"</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span>\n\nSession altered.\n\nSQL<span class=\"token operator\">></span> SHOW PARAMETER AUDIT\n\nNAME\t\t\t\t     TYPE\t VALUE\n------------------------------------ ----------- ------------------------------\naudit_file_dest \t\t     string\t /opt/oracle/admin/ORCL/adump\naudit_sys_operations\t\t     boolean\t FALSE\naudit_syslog_level\t\t     string\naudit_trail\t\t\t     string\t DB\nunified_audit_sga_queue_size\t     integer\t <span class=\"token number\">1048576</span></code></pre></div>\n<p>Activamos la auditoria.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> AUDIT CREATE <span class=\"token environment constant\">SESSION</span> WHENEVER NOT SUCCESSFUL<span class=\"token punctuation\">;</span>\n\nAudit succeeded.</code></pre></div>\n<p>Comprobamos su activación.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> AUDIT CREATE <span class=\"token environment constant\">SESSION</span> BY fran<span class=\"token punctuation\">;</span>      \n\nAudit succeeded.\n\nSQL<span class=\"token operator\">></span> SELECT * FROM DBA_PRIV_AUDIT_OPTS<span class=\"token punctuation\">;</span>\n\nUSER_NAME\n--------------------------------------------------------------------------------\nPROXY_NAME\n--------------------------------------------------------------------------------\nPRIVILEGE\t\t\t\t SUCCESS    FAILURE\n---------------------------------------- ---------- ----------\n\n\nCREATE <span class=\"token environment constant\">SESSION</span>\t\t\t\t NOT SET    BY ACCESS\n\nFRAN\n\nCREATE <span class=\"token environment constant\">SESSION</span>\t\t\t\t BY ACCESS  BY ACCESS\n\nUSER_NAME\n--------------------------------------------------------------------------------\nPROXY_NAME\n--------------------------------------------------------------------------------\nPRIVILEGE\t\t\t\t SUCCESS    FAILURE\n---------------------------------------- ---------- ----------</code></pre></div>\n<p>Probaremos la auditoria, intentando acceceder a nuestra base de datos.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>oracle@oracle1 ~<span class=\"token punctuation\">]</span>$ sqlplus\n\nSQL*Plus: Release <span class=\"token number\">12.2</span>.0.1.0 Production on Tue Mar <span class=\"token number\">9</span> <span class=\"token number\">17</span>:13:05 <span class=\"token number\">2021</span>\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">1982</span>, <span class=\"token number\">2016</span>, Oracle.  All rights reserved.\n\nEnter user-name: fran\nEnter password: \nERROR:\nORA-01017: invalid username/password<span class=\"token punctuation\">;</span> logon denied\n\n\nEnter user-name: fran\nEnter password: \nERROR:\nORA-01017: invalid username/password<span class=\"token punctuation\">;</span> logon denied\n\n\nEnter user-name: sys\nEnter password: \nERROR:\nORA-28009: connection as SYS should be as SYSDBA or SYSOPER\n\n\nSP2-0157: unable to CONNECT to ORACLE after <span class=\"token number\">3</span> attempts, exiting SQL*Plus</code></pre></div>\n<p>Visualizaremos los accesos fallidos.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> SELECT OS_USERNAME, USERNAME, EXTENDED_TIMESTAMP, ACTION_NAME, RETURNCODE\n  <span class=\"token number\">2</span>  FROM DBA_AUDIT_SESSION<span class=\"token punctuation\">;</span>\n\nOS_USERNAME\n--------------------------------------------------------------------------------\nUSERNAME\n--------------------------------------------------------------------------------\nEXTENDED_TIMESTAMP\n---------------------------------------------------------------------------\nACTION_NAME\t\t     RETURNCODE\n---------------------------- ----------\noracle\nFRAN\n09-MAR-21 05.12.49.102118 PM -03:00\nLOGON\t\t\t\t      <span class=\"token number\">0</span>\n\n\nOS_USERNAME\n--------------------------------------------------------------------------------\nUSERNAME\n--------------------------------------------------------------------------------\nEXTENDED_TIMESTAMP\n---------------------------------------------------------------------------\nACTION_NAME\t\t     RETURNCODE\n---------------------------- ----------\noracle\nFRAN\n09-MAR-21 05.13.09.178910 PM -03:00\nLOGON\t\t\t\t   <span class=\"token number\">1017</span>\n\n\nOS_USERNAME\n--------------------------------------------------------------------------------\nUSERNAME\n--------------------------------------------------------------------------------\nEXTENDED_TIMESTAMP\n---------------------------------------------------------------------------\nACTION_NAME\t\t     RETURNCODE\n---------------------------- ----------\noracle\nFRAN\n09-MAR-21 05.13.13.252421 PM -03:00\nLOGON\t\t\t\t   <span class=\"token number\">1017</span>\n\n\nOS_USERNAME\n--------------------------------------------------------------------------------\nUSERNAME\n--------------------------------------------------------------------------------\nEXTENDED_TIMESTAMP\n---------------------------------------------------------------------------\nACTION_NAME\t\t     RETURNCODE\n---------------------------- ----------\noracle\nFRAN\n09-MAR-21 05.13.03.893419 PM -03:00\nLOGOFF\t\t\t\t      <span class=\"token number\">0</span></code></pre></div>\n<p>Para finalizar, desactivaremos la auditoría.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> NOAUDIT CREATE <span class=\"token environment constant\">SESSION</span> WHENEVER NOT SUCCESSFUL<span class=\"token punctuation\">;</span>\n\nNoaudit succeeded.</code></pre></div>\n<ol start=\"2\">\n<li>Realiza un procedimiento en PL/SQL que te muestre los accesos fallidos junto con el motivo de los mismos, transformando el código de error almacenado en un mensaje de texto comprensible.</li>\n</ol>\n<p>Función para devolver el motivo del error:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">CREATE OR REPLACE FUNCTION DevolverMotivo\n<span class=\"token punctuation\">(</span>\n    p_error NUMBER\n<span class=\"token punctuation\">)</span>\nRETURN VARCHAR2\nIS\n    mensaje VARCHAR2<span class=\"token punctuation\">(</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nBEGIN\n    CASE p_error\n        WHEN <span class=\"token number\">1017</span> THEN \n            mensaje:<span class=\"token operator\">=</span><span class=\"token string\">'Contraseña Incorrecta'</span><span class=\"token punctuation\">;</span>\n        WHEN <span class=\"token number\">28000</span> THEN\n            mensaje:<span class=\"token operator\">=</span><span class=\"token string\">'Cuenta Bloqueada'</span><span class=\"token punctuation\">;</span>\n        ELSE\n            mensaje:<span class=\"token operator\">=</span><span class=\"token string\">'Error Desconocido'</span><span class=\"token punctuation\">;</span>\n    END CASE<span class=\"token punctuation\">;</span>\nRETURN mensaje<span class=\"token punctuation\">;</span>\nEND DevolverMotivo<span class=\"token punctuation\">;</span>\n/\n\nFunction created.</code></pre></div>\n<p>Procedimiento:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">CREATE OR REPLACE PROCEDURE MostrarAccesosFallidos\nIS\n    CURSOR c_accesos\n    IS \n    SELECT username, returncode, timestamp\n    FROM dba_audit_session \n    WHERE <span class=\"token assign-left variable\">action_name</span><span class=\"token operator\">=</span><span class=\"token string\">'LOGON'</span> \n    AND returncode <span class=\"token operator\">!=</span> <span class=\"token number\">0</span> \n    ORDER BY timestamp<span class=\"token punctuation\">;</span>\n\n    v_motivo VARCHAR2<span class=\"token punctuation\">(</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nBEGIN\n    DBMS_OUTPUT.PUT_LINE<span class=\"token punctuation\">(</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span><span class=\"token string\">'-- AUDITORÍA DE ACCESOS FALLIDOS --'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    DBMS_OUTPUT.PUT_LINE<span class=\"token punctuation\">(</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span><span class=\"token string\">'USUARIO'</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span><span class=\"token string\">'FECHA'</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>\n        <span class=\"token string\">'MOTIVO'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    DBMS_OUTPUT.PUT_LINE<span class=\"token punctuation\">(</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span><span class=\"token string\">'----------------------------------------------------------------'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    FOR acceso IN c_accesos LOOP\n        v_motivo:<span class=\"token operator\">=</span>DevolverMotivo<span class=\"token punctuation\">(</span>acceso.returncode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        DBMS_OUTPUT.PUT_LINE<span class=\"token punctuation\">(</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>acceso.username<span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>\n            TO_CHAR<span class=\"token punctuation\">(</span>acceso.timestamp,<span class=\"token string\">'YY/MM/DD DY HH24:MI'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>CHR<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">||</span>v_motivo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    END LOOP<span class=\"token punctuation\">;</span> \nEND MostrarAccesosFallidos<span class=\"token punctuation\">;</span>\n/</code></pre></div>\n<ol start=\"3\">\n<li>Activa la auditoría de las operaciones DML realizadas por SCOTT. Comprueba su funcionamiento.</li>\n</ol>\n<p>Activamos la auditoría.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">AUDIT INSERT TABLE, UPDATE TABLE, DELETE TABLE BY SCOTT BY ACCESS<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Donde:</p>\n<ul>\n<li>BY ACCESS : Realiza un registro por cada acción.</li>\n<li>BY SESSION : Realiza un registro de todas las acciones por cada sesión iniciada.</li>\n</ul>\n<p>Realizamos una prueba:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> CONN SCOTT/TIGER\nConnected.\nSQL<span class=\"token operator\">></span> INSERT INTO dept VALUES<span class=\"token punctuation\">(</span><span class=\"token number\">50</span>,<span class=\"token string\">'RRHH'</span>,<span class=\"token string\">'Dos Hermanas'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token number\">1</span> row created.\n\nSQL<span class=\"token operator\">></span> UPDATE dept SET <span class=\"token assign-left variable\">loc</span><span class=\"token operator\">=</span><span class=\"token string\">'Sevilla'</span> WHERE <span class=\"token assign-left variable\">deptno</span><span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token number\">1</span> row updated.\n\nSQL<span class=\"token operator\">></span> DELETE FROM dept WHERE <span class=\"token assign-left variable\">deptno</span><span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token number\">1</span> row deleted.\n\nSQL<span class=\"token operator\">></span> COMMIT<span class=\"token punctuation\">;</span>\n\nCommit complete.</code></pre></div>\n<p>Para ver las acciones realizadas por SCOTT:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SELECT obj_name, action_name, timestamp\nFROM dba_audit_object\nWHERE <span class=\"token assign-left variable\">username</span><span class=\"token operator\">=</span><span class=\"token string\">'SCOTT'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> SELECT obj_name, action_name, timestamp\n  <span class=\"token number\">2</span>  FROM dba_audit_object\n  <span class=\"token number\">3</span>  WHERE <span class=\"token assign-left variable\">username</span><span class=\"token operator\">=</span><span class=\"token string\">'SCOTT'</span><span class=\"token punctuation\">;</span>\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nSDO_GEOR_DDL__TABLE<span class=\"token variable\">$$</span>\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nSDO_GEOR_DDL__TABLE<span class=\"token variable\">$$</span>\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nSDO_GEOR_DDL__TABLE<span class=\"token variable\">$$</span>\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nSDO_GEOR_DDL__TABLE<span class=\"token variable\">$$</span>\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nSDO_GEOR_DDL__TABLE<span class=\"token variable\">$$</span>\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nEMP\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nDEPT\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nDEPT\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nDEPT\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nDEPT\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nSALGRADE\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nSALGRADE\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nSALGRADE\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nSALGRADE\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nSALGRADE\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nDUMMY\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nDEPT\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nDEPT\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nDEPT\nINSERT\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\nDEPT\nUPDATE\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\nOBJ_NAME\n--------------------------------------------------------------------------------\nACTION_NAME\t\t     TIMESTAMP\n---------------------------- ---------\nDEPT\nDELETE\t\t\t     <span class=\"token number\">10</span>-MAR-21\n\n\n<span class=\"token number\">34</span> rows selected.</code></pre></div>\n<p>En mi caso ha bastantes salidas puesto que he añadido al usuario SCOTT y su esquema a la base de datos ahora mismo.\n<a href=\"http://www.tecnoent.com/838-creando-esquema-scott-tiger-oracl\">Pasos a seguir para añadir el usuario SCOTT a tu base de datos Oracle</a>.</p>\n<ol start=\"4\">\n<li>Realiza una auditoría de grano fino para almacenar información sobre la inserción de empleados del departamento 10 en la tabla emp de scott.</li>\n</ol>\n<p>Creación de la auditoría de grano fino:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> BEGIN\n    DBMS_FGA.ADD_POLICY <span class=\"token punctuation\">(</span>\n        object_schema      <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token string\">'SCOTT'</span>,\n        object_name        <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token string\">'EMP'</span>,\n        policy_name        <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token string\">'mypolicy1'</span>,\n        audit_condition    <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token string\">'DEPTNO = 10'</span>,\n        statement_types    <span class=\"token operator\">=</span><span class=\"token operator\">></span>  <span class=\"token string\">'INSERT'</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nEND<span class=\"token punctuation\">;</span>\n/ \n\nPL/SQL procedure successfully completed.</code></pre></div>\n<p>Ver la política creada:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SQL<span class=\"token operator\">></span> SELECT object_schema,object_name,policy_name,policy_text\n  <span class=\"token number\">2</span>  FROM dba_audit_policies<span class=\"token punctuation\">;</span>\n\nOBJECT_SCHEMA\n--------------------------------------------------------------------------------\nOBJECT_NAME\n--------------------------------------------------------------------------------\nPOLICY_NAME\n--------------------------------------------------------------------------------\nPOLICY_TEXT\n--------------------------------------------------------------------------------\nSCOTT\nEMP\nMYPOLICY1\nDEPTNO <span class=\"token operator\">=</span> <span class=\"token number\">10</span></code></pre></div>\n<p>Realizamos una prueba:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">CONN SCOTT/TIGER\n\nINSERT INTO emp VALUES<span class=\"token punctuation\">(</span><span class=\"token number\">7950</span>,<span class=\"token string\">'Lora'</span>,<span class=\"token string\">'JEFE'</span>,null,sysdate,9999,9999,10<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO emp VALUES<span class=\"token punctuation\">(</span><span class=\"token number\">7951</span>,<span class=\"token string\">'Calde'</span>,<span class=\"token string\">'PROFE'</span>,null,sysdate,9999,9999,10<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nCOMMIT<span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"5\">\n<li>Explica la diferencia entre auditar una operación by access o by session.</li>\n<li>Documenta las diferencias entre los valores db y db, extended del parámetro audit_trail de ORACLE. Demuéstralas poniendo un ejemplo de la información sobre una operación concreta recopilada con cada uno de ellos.</li>\n<li>Localiza en Enterprise Manager las posibilidades para realizar una auditoría e intenta repetir con dicha herramienta los apartados 1, 3 y 4.</li>\n<li>Averigua si en Postgres se pueden realizar los apartados 1, 3 y 4. Si es así, documenta el proceso adecuadamente.</li>\n<li>Averigua si en MySQL se pueden realizar los apartados 1, 3 y 4. Si es así, documenta el proceso adecuadamente.</li>\n<li>Averigua las posibilidades que ofrece MongoDB para auditar los cambios que va sufriendo un documento.</li>\n<li>Averigua si en MongoDB se pueden auditar los accesos al sistema.</li>\n</ol>","timeToRead":6,"excerpt":"Realiza y documenta adecuadamente las siguientes operaciones: Activa desde SQL*Plus la auditoría de los intentos de acceso fallidos al…","frontmatter":{"title":"[ABD] Práctica 7 - Auditorías","cover":"https://img.icons8.com/ios/452/work.png","date":"2021-03-09T00:00:00.000Z","categories":["ABD"],"tags":["Auditorías"]},"fields":{"slug":"/abd-practica-7-auditorias","date":"March 08, 2021"}}},"pageContext":{"slug":"/abd-practica-7-auditorias","nexttitle":"[ABD] - Práctica 6 Almacenamiento","nextslug":"/abd-practica-6-almacenamiento","prevtitle":"Práctica 2: rclone - Gestionando nuestro almacenamiento en la nube (unidad 1)","prevslug":"/practica-2-rclone-gestionando-nuestro-almacenamiento-en-la-nube-unidad-1"}}}