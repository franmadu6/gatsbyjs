{"componentChunkName":"component---src-templates-post-js","path":"/practica-servidor-dns","result":{"data":{"markdownRemark":{"html":"<h3 id=\"escenario\"><a href=\"#escenario\" aria-label=\"escenario permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Escenario</h3>\n<ol>\n<li>En nuestra red local tenemos un servidor Web que sirve dos páginas web: www.iesgn.org, departamentos.iesgn.org</li>\n<li>Vamos a instalar en nuestra red local un servidor DNS (lo puedes instalar en el mismo equipo que tiene el servidor web)</li>\n<li>Voy a suponer en este documento que el nombre del servidor DNS va a ser pandora.iesgn.org. El nombre del servidor de tu prácticas será tunombre.iesgn.org.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># -*- mode: ruby -*-</span>\n<span class=\"token comment\"># vi: set ft=ruby :</span>\n\nVagrant.configure<span class=\"token punctuation\">(</span><span class=\"token string\">\"2\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>config<span class=\"token operator\">|</span>\n\n        config.vm.define :servidordns <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>servidordns<span class=\"token operator\">|</span>\n                servidordns.vm.box <span class=\"token operator\">=</span> <span class=\"token string\">\"generic/debian10\"</span>\n                servidordns.vm.hostname <span class=\"token operator\">=</span> <span class=\"token string\">\"servidorDNS\"</span>\n                servidordns.vm.network :public_network,:bridge<span class=\"token operator\">=</span><span class=\"token operator\">></span><span class=\"token string\">\"wlo1\"</span>\n                servidordns.vm.network :private_network, ip: <span class=\"token string\">\"192.168.100.155\"</span>\n        end\n\n        config.vm.define :cliente <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>cliente<span class=\"token operator\">|</span>\n                cliente.vm.box <span class=\"token operator\">=</span> <span class=\"token string\">\"generic/debian10\"</span>\n                cliente.vm.hostname <span class=\"token operator\">=</span> <span class=\"token string\">\"cliente\"</span>\n                cliente.vm.network :public_network,:bridge<span class=\"token operator\">=</span><span class=\"token operator\">></span><span class=\"token string\">\"wlo1\"</span>\n                cliente.vm.network :private_network, ip: <span class=\"token string\">\"192.168.100.156\"</span>\n        end\nend</code></pre></div>\n<hr>\n<h2 id=\"servidor-dnsmasq\"><a href=\"#servidor-dnsmasq\" aria-label=\"servidor dnsmasq permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Servidor DNSmasq</h2>\n<p>Instala el servidor dns dnsmasq en pandora.iesgn.org y configúralo para que los clientes puedan conocer los nombres necesarios.</p>\n<div style=\"background-color:#ff5733; border-radius:0.5em;  border-color: black;\">\n<ul>\n<li>\n<p>Tarea 1 (1 punto): Modifica los clientes para que utilicen el nuevo servidor dns. Realiza una consulta a www.iesgn.org, y a www.josedomingo.org. Realiza una prueba de funcionamiento para comprobar que el servidor dnsmasq funciona como cache dns. Muestra el fichero hosts del cliente para demostrar que no estás utilizando resolución estática. Realiza una consulta directa al servidor dnsmasq. ¿Se puede realizar resolución inversa?. Documenta la tarea en redmine.</p>\n</div>\n</li>\n</ul>\n<p><strong>Configuración del Servidor:</strong></p>\n<p>Intalamos dnsmasq:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@servidor:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> dnsmasq</code></pre></div>\n<p><strong>Creamos las paginas www.iesgn.org y departamentos.iesgn.org con apache2</strong></p>\n<p>Modificamos /etc/hosts:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token number\">192.168</span>.100.155 www.iesgn.org\n<span class=\"token number\">192.168</span>.100.155 departamentos.iesgn.org</code></pre></div>\n<p>Modificamos el fichero /etc/dnsmasq.conf:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">strict-order\n<span class=\"token assign-left variable\">interface</span><span class=\"token operator\">=</span>eth2</code></pre></div>\n<p>En /etc/resolv.conf</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nameserver <span class=\"token number\">192.168</span>.100.1</code></pre></div>\n<p>Reiniciamos servicios</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> systemctl restart dnsmasq.service</code></pre></div>\n<p><strong>Configuración del cliente:</strong></p>\n<p>Instralamos la paqueteria:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> dnsutils</code></pre></div>\n<p>En /etc/resolv.conf</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nameserver <span class=\"token number\">192.168</span>.100.1</code></pre></div>\n<p>Comprobación:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> www.josedomingo.org\n\n<span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> www.josedomingo.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">57262</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">2</span>, AUTHORITY: <span class=\"token number\">5</span>, ADDITIONAL: <span class=\"token number\">6</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: 79aa374f36939b00c83fb1ce5fc8992c80d0da518c9221f2 <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>www.josedomingo.org.\t\tIN\tA\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\nwww.josedomingo.org.\t<span class=\"token number\">56</span>\tIN\tCNAME\tplayerone.josedomingo.org.\nplayerone.josedomingo.org. <span class=\"token number\">717</span>\tIN\tA\t<span class=\"token number\">137.74</span>.161.90\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\njosedomingo.org.\t<span class=\"token number\">35965</span>\tIN\tNS\tns5.cdmondns-01.com.\njosedomingo.org.\t<span class=\"token number\">35965</span>\tIN\tNS\tns3.cdmon.net.\njosedomingo.org.\t<span class=\"token number\">35965</span>\tIN\tNS\tns2.cdmon.net.\njosedomingo.org.\t<span class=\"token number\">35965</span>\tIN\tNS\tns1.cdmon.net.\njosedomingo.org.\t<span class=\"token number\">35965</span>\tIN\tNS\tns4.cdmondns-01.org.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ADDITIONAL SECTION:\nns1.cdmon.net.\t\t<span class=\"token number\">106292</span>\tIN\tA\t<span class=\"token number\">35.189</span>.106.232\nns2.cdmon.net.\t\t<span class=\"token number\">106292</span>\tIN\tA\t<span class=\"token number\">35.195</span>.57.29\nns3.cdmon.net.\t\t<span class=\"token number\">106292</span>\tIN\tA\t<span class=\"token number\">35.157</span>.47.125\nns4.cdmondns-01.org.\t<span class=\"token number\">35965</span>\tIN\tA\t<span class=\"token number\">52.58</span>.66.183\nns5.cdmondns-01.com.\t<span class=\"token number\">106292</span>\tIN\tA\t<span class=\"token number\">52.59</span>.146.62\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">1</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.1<span class=\"token comment\">#53(192.168.100.1)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 07:52:12 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">322</span>\n\nvagrant@cliente:~$ <span class=\"token function\">dig</span> www.iesgn.org\n\n<span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> www.iesgn.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">65398</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">0</span>, ADDITIONAL: <span class=\"token number\">1</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>www.iesgn.org.\t\t\tIN\tA\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\nwww.iesgn.org.\t\t<span class=\"token number\">0</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.155\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.1<span class=\"token comment\">#53(192.168.100.1)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 07:52:54 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">58</span>\n\nvagrant@cliente:~$ <span class=\"token function\">dig</span> departamentos.iesgn.org\n\n<span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> departamentos.iesgn.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">7942</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">0</span>, ADDITIONAL: <span class=\"token number\">1</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>departamentos.iesgn.org.\tIN\tA\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\ndepartamentos.iesgn.org. <span class=\"token number\">0</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.155\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.1<span class=\"token comment\">#53(192.168.100.1)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 07:53:33 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">68</span></code></pre></div>\n<p>Consulta directa al servidor dnsmasq:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> -x <span class=\"token number\">192.168</span>.100.155\n\n<span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> -x <span class=\"token number\">192.168</span>.100.155\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">62390</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">0</span>, ADDITIONAL: <span class=\"token number\">1</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span><span class=\"token number\">155.100</span>.168.192.in-addr.arpa.\tIN\tPTR\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\n<span class=\"token number\">155.100</span>.168.192.in-addr.arpa. <span class=\"token number\">0</span>\tIN\tPTR\twww.iesgn.org.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.1<span class=\"token comment\">#53(192.168.100.1)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 07:54:13 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">84</span></code></pre></div>\n<p>¿Se puede realizar resolución inversa?\nNo, no es capaz de realizar preguntas recursivas.</p>\n<hr>\n<h2 id=\"servidor-bind9\"><a href=\"#servidor-bind9\" aria-label=\"servidor bind9 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Servidor bind9</h2>\n<p>Desinstala el servidor dnsmasq del ejercicio anterior e instala un servidor dns bind9. Las características del servidor DNS que queremos instalar son las siguientes:</p>\n<ul>\n<li>El servidor DNS se llama pandora.iesgn.org y por supuesto, va a ser el servidor con autoridad para la zona iesgn.org.</li>\n<li>Vamos a suponer que tenemos un servidor para recibir los correos que se llame correo.iesgn.org y que está en la dirección x.x.x.200 (esto es ficticio).</li>\n<li>Vamos a suponer que tenemos un servidor ftp que se llame ftp.iesgn.org y que está en x.x.x.201 (esto es ficticio)</li>\n<li>Además queremos nombrar a los clientes.</li>\n<li>También hay que nombrar a los virtual hosts de apache: www.iesgn.org y departementos.iesgn.org</li>\n<li>Se tienen que configurar la zona de resolución inversa.</li>\n</ul>\n<div style=\"background-color:#ff5733; border-radius:1em;  border-color: black;\">\n<ul>\n<li>\n<p>Tarea 2 (1 puntos): Realiza la instalación y configuración del servidor bind9 con las características anteriomente señaladas. Entrega las zonas que has definido. Muestra al profesor su funcionamiento.</p>\n</div>\n</li>\n</ul>\n<p><strong>Configuración en el Servidor:</strong></p>\n<p>Instalamos paquetería:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@servidorDNS:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> bind9</code></pre></div>\n<p><strong>Recuerda apagar o desistalar el servidor DNSMasq anteriormente instalado</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@servidorDNS:~$ <span class=\"token function\">sudo</span> systemctl stop dnsmasq.service</code></pre></div>\n<p>Resolución directa:(en  /etc/bind/named.conf.local)</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">zone <span class=\"token string\">\"iesgn.org\"</span> <span class=\"token punctuation\">{</span>\n<span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span>\n<span class=\"token function\">file</span> <span class=\"token string\">\"db.iesgn.org\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nzone <span class=\"token string\">\"100.168.192.in-addr.arpa\"</span> <span class=\"token punctuation\">{</span>\n<span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span>\n<span class=\"token function\">file</span> <span class=\"token string\">\"db.192.168.100\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Vamos a crear dos ficheros:</p>\n<p>El fichero /var/cache/bind/db.iesgn.org</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">;</span> BIND data <span class=\"token function\">file</span> <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">local</span> loopback interface\n<span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$TTL</span>    <span class=\"token number\">604800</span>\n@       IN      SOA     madu.iesgn.org.   frandh1997.gmail.com. <span class=\"token punctuation\">(</span>\n                              <span class=\"token number\">2</span>         <span class=\"token punctuation\">;</span> Serial\n                         <span class=\"token number\">604800</span>         <span class=\"token punctuation\">;</span> Refresh\n                          <span class=\"token number\">86400</span>         <span class=\"token punctuation\">;</span> Retry\n                        <span class=\"token number\">2419200</span>         <span class=\"token punctuation\">;</span> Expire\n                         <span class=\"token number\">604800</span> <span class=\"token punctuation\">)</span>       <span class=\"token punctuation\">;</span> Negative Cache TTL\n<span class=\"token punctuation\">;</span>\n@       IN      NS      madu.iesgn.org.\n@       IN      MX <span class=\"token number\">10</span>   correo.iesgn.org.\n\n<span class=\"token variable\">$ORIGIN</span> iesgn.org.\nmadu            IN      A       <span class=\"token number\">192.168</span>.100.155\ncorreo          IN      A       <span class=\"token number\">192.168</span>.100.200\n<span class=\"token function\">ftp</span>             IN      A       <span class=\"token number\">192.168</span>.100.201\nwww             IN      CNAME   madu\ndepartamentos   IN      CNAME   madu</code></pre></div>\n<p>Y el fichero /var/cache/bind/db.192.168.100</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token variable\">$TTL</span> <span class=\"token number\">86400</span> <span class=\"token punctuation\">;</span> <span class=\"token number\">1</span> day\n@ IN SOA madu.iesgn.org. frandh1997.gmail.com. <span class=\"token punctuation\">(</span>\n <span class=\"token number\">12998</span> <span class=\"token punctuation\">;</span> serial\n <span class=\"token number\">21600</span> <span class=\"token punctuation\">;</span> refresh <span class=\"token punctuation\">(</span><span class=\"token number\">6</span> hours<span class=\"token punctuation\">)</span>\n <span class=\"token number\">3600</span> <span class=\"token punctuation\">;</span> retry <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> hour<span class=\"token punctuation\">)</span>\n <span class=\"token number\">604800</span> <span class=\"token punctuation\">;</span> expire <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> week<span class=\"token punctuation\">)</span>\n <span class=\"token number\">21600</span> <span class=\"token punctuation\">;</span> minimum <span class=\"token punctuation\">(</span><span class=\"token number\">6</span> hours<span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">)</span>\n@ IN NS madu.iesgn.orgg.\n\n<span class=\"token variable\">$ORIGIN</span> <span class=\"token number\">100.168</span>.192.in-addr.arpa.\n<span class=\"token number\">155</span> IN PTR www.iesgn.org.\n<span class=\"token number\">155</span> IN PTR departamentos.iesgn.org.</code></pre></div>\n<div style=\"background-color:#ff5733; border-radius:1em;  border-color: black;\">\n<ul>\n<li>\n<p>Tarea 3 (1 puntos): Realiza las consultas dig/nslookup desde los clientes preguntando por los siguientes:</p>\n<ul>\n<li>Dirección de pandora.iesgn.org, www.iesgn.org, ftp.iesgn.org</li>\n<li>El servidor DNS con autoridad sobre la zona del dominio iesgn.org</li>\n<li>El servidor de correo configurado para iesgn.org</li>\n<li>La dirección IP de www.josedomingo.org</li>\n<li>\n<p>Una resolución inversa</p>\n</div>\n</li>\n</ul>\n</li>\n<li>\n<p>Dirección de pandora.iesgn.org, www.iesgn.org, ftp.iesgn.org</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> madu.iesgn.org</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> madu.iesgn.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">26578</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">1</span>, ADDITIONAL: <span class=\"token number\">1</span>\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: 456d9ca9940c96f34291b0355fc8ab94100afc289509f5a6 <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>madu.iesgn.org.\t\t\tIN\tA\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\nmadu.iesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.155\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\niesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tNS\tmadu.iesgn.org.\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">1</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 09:10:44 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">101</span></code></pre></div>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> www.iesgn.org</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> www.iesgn.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">56855</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">2</span>, AUTHORITY: <span class=\"token number\">1</span>, ADDITIONAL: <span class=\"token number\">1</span>\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: 8754ac6311b386f3ecc6ecc15fc8aba36e540a3a0b1a0a00 <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>www.iesgn.org.\t\t\tIN\tA\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\nwww.iesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tCNAME\tmadu.iesgn.org.\nmadu.iesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.155\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\niesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tNS\tmadu.iesgn.org.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">1</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 09:10:59 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">119</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> ftp.iesgn.org</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> ftp.iesgn.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">26408</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">1</span>, ADDITIONAL: <span class=\"token number\">2</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: aad1f238f65f5bb32ad1a9d35fc8abc30da5ac8de9d64c51 <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>ftp.iesgn.org.\t\t\tIN\tA\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\nftp.iesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.201\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\niesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tNS\tmadu.iesgn.org.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ADDITIONAL SECTION:\nmadu.iesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.155\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 09:11:31 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">121</span></code></pre></div>\n<ul>\n<li>El servidor DNS con autoridad sobre la zona del dominio iesgn.org</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> ns iesgn.org</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> ns iesgn.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">12731</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">0</span>, ADDITIONAL: <span class=\"token number\">2</span>\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: 61af9aa291d6c5065fa57b805fc8a9371b402da74c8a0967 <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>iesgn.org.\t\t\tIN\tNS\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\niesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tNS\tmadu.iesgn.org.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ADDITIONAL SECTION:\nmadu.iesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.155\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 09:00:39 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">101</span></code></pre></div>\n<ul>\n<li>El servidor de correo configurado para iesgn.org</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> mx iesgn.org</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> mx iesgn.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">62841</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">1</span>, ADDITIONAL: <span class=\"token number\">3</span>\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: 96301209c19d659f053a80a55fc8a9cb30a6df7f4f8eed52 <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>iesgn.org.\t\t\tIN\tMX\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\niesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tMX\t<span class=\"token number\">10</span> correo.iesgn.org.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\niesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tNS\tmadu.iesgn.org.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ADDITIONAL SECTION:\ncorreo.iesgn.org.\t<span class=\"token number\">604800</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.200\nmadu.iesgn.org.\t\t<span class=\"token number\">604800</span>\tIN\tA\t<span class=\"token number\">192.168</span>.100.155\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 09:03:07 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">140</span></code></pre></div>\n<ul>\n<li>La dirección IP de www.josedomingo.org</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> www.josedomingo.org</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> www.josedomingo.org\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">271</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">2</span>, AUTHORITY: <span class=\"token number\">5</span>, ADDITIONAL: <span class=\"token number\">6</span>\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: 5f6397d74751cd384eb020055fc8abffc2f4212bab4159dc <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>www.josedomingo.org.\t\tIN\tA\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\nwww.josedomingo.org.\t<span class=\"token number\">731</span>\tIN\tCNAME\tplayerone.josedomingo.org.\nplayerone.josedomingo.org. <span class=\"token number\">731</span>\tIN\tA\t<span class=\"token number\">137.74</span>.161.90\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\njosedomingo.org.\t<span class=\"token number\">86229</span>\tIN\tNS\tns4.cdmondns-01.org.\njosedomingo.org.\t<span class=\"token number\">86229</span>\tIN\tNS\tns3.cdmon.net.\njosedomingo.org.\t<span class=\"token number\">86229</span>\tIN\tNS\tns2.cdmon.net.\njosedomingo.org.\t<span class=\"token number\">86229</span>\tIN\tNS\tns1.cdmon.net.\njosedomingo.org.\t<span class=\"token number\">86229</span>\tIN\tNS\tns5.cdmondns-01.com.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ADDITIONAL SECTION:\nns1.cdmon.net.\t\t<span class=\"token number\">172630</span>\tIN\tA\t<span class=\"token number\">35.189</span>.106.232\nns2.cdmon.net.\t\t<span class=\"token number\">172630</span>\tIN\tA\t<span class=\"token number\">35.195</span>.57.29\nns3.cdmon.net.\t\t<span class=\"token number\">172630</span>\tIN\tA\t<span class=\"token number\">35.157</span>.47.125\nns4.cdmondns-01.org.\t<span class=\"token number\">86229</span>\tIN\tA\t<span class=\"token number\">52.58</span>.66.183\nns5.cdmondns-01.com.\t<span class=\"token number\">172630</span>\tIN\tA\t<span class=\"token number\">52.59</span>.146.62\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">1</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 09:12:31 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">322</span>\n\n\nvagrant@cliente:~$ <span class=\"token function\">dig</span> <span class=\"token number\">137.74</span>.161.90\n\n<span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> <span class=\"token number\">137.74</span>.161.90\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NXDOMAIN, id: <span class=\"token number\">7972</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr rd ra ad<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">0</span>, AUTHORITY: <span class=\"token number\">1</span>, ADDITIONAL: <span class=\"token number\">1</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: f77f48ef60509bc623c9faa85fc8abfc0c9e5e107b71e286 <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span><span class=\"token number\">137.74</span>.161.90.\t\t\tIN\tA\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\n<span class=\"token builtin class-name\">.</span>\t\t\t<span class=\"token number\">10660</span>\tIN\tSOA\ta.root-servers.net. nstld.verisign-grs.com. <span class=\"token number\">2020120300</span> <span class=\"token number\">1800</span> <span class=\"token number\">900</span> <span class=\"token number\">604800</span> <span class=\"token number\">86400</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 09:12:28 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">145</span></code></pre></div>\n<ul>\n<li>Una resolución inversa</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> -x <span class=\"token number\">192.168</span>.100.155</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> -x <span class=\"token number\">192.168</span>.100.155\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NOERROR, id: <span class=\"token number\">8828</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr aa rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">1</span>, AUTHORITY: <span class=\"token number\">1</span>, ADDITIONAL: <span class=\"token number\">1</span>\n<span class=\"token comment\">#</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span> COOKIE: ead6683541c9828cc51219125fc8aa51aefab226d59fd5d8 <span class=\"token punctuation\">(</span>good<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span><span class=\"token number\">155.100</span>.168.192.in-addr.arpa.\tIN\tPTR\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> ANSWER SECTION:\n<span class=\"token number\">155.100</span>.168.192.in-addr.arpa. <span class=\"token number\">86400</span> IN\tPTR\tdepartamentos.iesgn.org.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\n<span class=\"token number\">100.168</span>.192.in-addr.arpa. <span class=\"token number\">86400</span>\tIN\tNS\tmadu.iesgn.orgg.\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">0</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Thu Dec 03 09:05:21 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">151</span></code></pre></div>\n<hr>\n<h2 id=\"servidor-dns-esclavo\"><a href=\"#servidor-dns-esclavo\" aria-label=\"servidor dns esclavo permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Servidor DNS esclavo</h2>\n<p>El servidor DNS actual funciona como DNS maestro. Vamos a instalar un nuevo servidor DNS que va a estar configurado como DNS esclavo del anterior, donde se van a ir copiando periódicamente las zonas del DNS maestro. Suponemos que el nombre del servidor DNS esclavo se va llamar afrodita.iesgn.org.</p>\n<div style=\"background-color:#ff5733; border-radius:1em;  border-color: black;\">\n<ul>\n<li>\n<p>Tarea 4 (2 puntos): Realiza la instalación del servidor DNS esclavo. Documenta los siguientes apartados:</p>\n<ul>\n<li>Entrega la configuración de las zonas del maestro y del esclavo.</li>\n<li>Comprueba si las zonas definidas en el maestro tienen algún error con el comando adecuado.</li>\n<li>Comprueba si la configuración de named.conf tiene algún error con el comando adecuado.</li>\n<li>Reinicia los servidores y comprueba en los logs si hay algún error. No olvides incrementar el número de serie en el registro SOA si has modificado la zona en el maestro.</li>\n<li>\n<p>Muestra la salida del log donde se demuestra que se ha realizado la transferencia de zona.</p>\n</div>\n</li>\n</ul>\n</li>\n</ul>\n<p>Añadimos una nueva maquina a nuestro escenario de Vagrant.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">        config.vm.define :svesclavo <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>svesclavo<span class=\"token operator\">|</span>\n                svesclavo.vm.box <span class=\"token operator\">=</span> <span class=\"token string\">\"generic/debian10\"</span>\n                svesclavo.vm.hostname <span class=\"token operator\">=</span> <span class=\"token string\">\"svesclavo\"</span>\n                svesclavo.vm.network :public_network,:bridge<span class=\"token operator\">=</span><span class=\"token operator\">></span><span class=\"token string\">\"wlo1\"</span>\n                svesclavo.vm.network :private_network, ip: <span class=\"token string\">\"192.168.100.157\"</span>\n        end</code></pre></div>\n<p><strong>En nuestro servidor maestro:</strong></p>\n<p>En /etc/bind/named-conf.options</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@servidorDNS:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/bind/named.conf.options \n allow-transfer <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span>.100.157<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        notify <span class=\"token function\">yes</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>En /var/cache/bind/db.iesgn.org</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@servidorDNS:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /var/cache/bind/db.iesgn.org\n@               IN      NS      madu-esclavo.iesgn.org.\nmadu-esclavo IN      A       <span class=\"token number\">192.168</span>.100.157</code></pre></div>\n<p>En nuestro archivo de resolución inversa.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@servidorDNS:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /var/cache/bind/db.192.168.100 \n@       IN      NS      madu-esclavo.iesgn.org.\n<span class=\"token number\">157</span>       IN      PTR     mady-esclavo.iesgn.org.</code></pre></div>\n<p><strong>En nuestro servidor esclavo:</strong></p>\n<p>Instamos bind9</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@svesclavo:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> bind9</code></pre></div>\n<p>En /etc/bind/named.conf.options </p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@svesclavo:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/bind/named.conf.options \nallow-transfer <span class=\"token punctuation\">{</span> none<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>En /etc/bind/named.conf.local</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@svesclavo:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/bind/named.conf.local\nzone <span class=\"token string\">\"iesgn.org\"</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token function\">file</span> <span class=\"token string\">\"db.iesgn.org\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin class-name\">type</span> slave<span class=\"token punctuation\">;</span>\n  masters <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span>.100.155<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nzone <span class=\"token string\">\"100.168.192.in-addr.arpa\"</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token function\">file</span> <span class=\"token string\">\"db.100.168.192\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin class-name\">type</span> slave<span class=\"token punctuation\">;</span>\n  masters <span class=\"token punctuation\">{</span> <span class=\"token number\">192.168</span>.100.155<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div style=\"background-color:#ff5733; border-radius:1em; border-color: black;\">\n<ul>\n<li>\n<p>Tarea 5 (1 punto): Documenta los siguientes apartados:</p>\n<ul>\n<li>Configura un cliente para que utilice los dos servidores como servidores DNS.</li>\n<li>Realiza una consulta con dig tanto al maestro como al esclavo para comprobar que las respuestas son autorizadas. ¿En qué te tienes que fijar?</li>\n<li>\n<p>Solicita una copia completa de la zona desde el cliente ¿qué tiene que ocurrir?. Solicita una copia completa desde el esclavo ¿qué tiene que ocurrir?</p>\n</div>\n</li>\n</ul>\n</li>\n<li>Configura un cliente para que utilice los dos servidores como servidores DNS.</li>\n</ul>\n<p>En /etc/resolv.conf</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nameserver <span class=\"token number\">192.168</span>.100.155\nnameserver <span class=\"token number\">192.168</span>.100.157</code></pre></div>\n<ul>\n<li>Realiza una consulta con dig tanto al maestro como al esclavo para comprobar que las respuestas son autorizadas. ¿En qué te tienes que fijar?</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> @192.168.100.155 ftp.iesgn.org\n\n<span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> @192.168.100.155 ftp.iesgn.org\n<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> server found<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Got answer:\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> -<span class=\"token operator\">>></span>HEADER<span class=\"token operator\">&lt;&lt;-</span> opcode: QUERY, status: NXDOMAIN, id: <span class=\"token number\">23190</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> flags: qr rd ra<span class=\"token punctuation\">;</span> QUERY: <span class=\"token number\">1</span>, ANSWER: <span class=\"token number\">0</span>, AUTHORITY: <span class=\"token number\">1</span>, ADDITIONAL: <span class=\"token number\">1</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> OPT PSEUDOSECTION:\n<span class=\"token punctuation\">;</span> EDNS: version: <span class=\"token number\">0</span>, flags:<span class=\"token punctuation\">;</span> udp: <span class=\"token number\">4096</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> QUESTION SECTION:\n<span class=\"token punctuation\">;</span>ftp.iesgn.org.\t\t\tIN\tA\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> AUTHORITY SECTION:\norg.\t\t\t<span class=\"token number\">852</span>\tIN\tSOA\ta0.org.afilias-nst.info. noc.afilias-nst.info. <span class=\"token number\">2014179997</span> <span class=\"token number\">1800</span> <span class=\"token number\">900</span> <span class=\"token number\">604800</span> <span class=\"token number\">86400</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> Query time: <span class=\"token number\">344</span> msec\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> SERVER: <span class=\"token number\">192.168</span>.100.155<span class=\"token comment\">#53(192.168.100.155)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> WHEN: Sun Dec <span class=\"token number\">13</span> <span class=\"token number\">19</span>:44:26 UTC <span class=\"token number\">2020</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> MSG SIZE  rcvd: <span class=\"token number\">105</span></code></pre></div>\n<ul>\n<li>Solicita una copia completa de la zona desde el cliente ¿qué tiene que ocurrir?. Solicita una copia completa desde el esclavo ¿qué tiene que ocurrir?</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@cliente:~$ <span class=\"token function\">dig</span> @192.168.100.155 iesgn.org axfr\n\n<span class=\"token punctuation\">;</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> DiG <span class=\"token number\">9.11</span>.5-P4-5.1+deb10u2-Debian <span class=\"token operator\">&lt;&lt;</span><span class=\"token operator\">>></span> @192.168.100.155 iesgn.org axfr\n<span class=\"token punctuation\">;</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> server found<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> global options: +cmd\n<span class=\"token punctuation\">;</span> Transfer failed.</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<div style=\"background-color:#ff5733; border-radius:1em; border-color: black;\">\n<ul>\n<li>\n<p>Tarea 6 (1 punto): Muestra al profesor el funcionamiento del DNS esclavo:</p>\n<ul>\n<li>Realiza una consulta desde el cliente y comprueba que servidor está respondiendo.</li>\n<li>\n<p>Posteriormente apaga el servidor maestro y vuelve a realizar una consulta desde el cliente ¿quién responde?</p>\n</div>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h2 id=\"delegación-de-dominios\"><a href=\"#delegaci%C3%B3n-de-dominios\" aria-label=\"delegación de dominios permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Delegación de dominios</h2>\n<p>Tenemos un servidor DNS que gestiona la zona correspondiente al nombre de dominio iesgn.org, en esta ocasión queremos delegar el subdominio informatica.iesgn.org para que lo gestione otro servidor DNS. Por lo tanto tenemos un escenario con dos servidores DNS:</p>\n<ul>\n<li>pandora.iesgn.org, es servidor DNS autorizado para la zona iesgn.org.</li>\n<li>ns.informatica.iesgn.org, es el servidor DNS para la zona informatica.iesgn.org y, está instalado en otra máquina.</li>\n</ul>\n<p>Los nombres que vamos a tener en ese subdominio son los siguientes:</p>\n<ul>\n<li>www.informatica.iesgn.org corresponde a un sitio web que está alojado en el servidor web del departamento de informática.</li>\n<li>Vamos a suponer que tenemos un servidor ftp que se llame ftp.informatica.iesgn.org y que está en la misma máquina.</li>\n<li>Vamos a suponer que tenemos un servidor para recibir los correos que se llame correo.informatica.iesgn.org.</li>\n</ul>\n<div style=\"background-color:#ff5733; border-radius:1em; border-color: black;\">\n<ul>\n<li>\n<p>Tarea 7 (2 puntos): Realiza la instalación y configuración del nuevo servidor dns con las características anteriormente señaladas. Muestra el resultado al profesor.</p>\n</div>\n</li>\n</ul>\n<p>Añadiremos una nueva maquina a la configuración.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">        config.vm.define :svt7 <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>svt7<span class=\"token operator\">|</span>\n                svt7.vm.box <span class=\"token operator\">=</span> <span class=\"token string\">\"generic/debian10\"</span>\n                svt7.vm.hostname <span class=\"token operator\">=</span> <span class=\"token string\">\"sv7\"</span>\n                svt7.vm.network :public_network,:bridge<span class=\"token operator\">=</span><span class=\"token operator\">></span><span class=\"token string\">\"wlo1\"</span>\n                svt7.vm.network :private_network, ip: <span class=\"token string\">\"192.168.100.158\"</span>\n        end</code></pre></div>\n<p><strong>Configuración Servidor Maestro:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token variable\">$ORIGIN</span> nuevazona.iesgn.org.\n\n@               IN    NS    madu-sub\nmadu-sub\tIN    A     <span class=\"token number\">192.168</span>.100.158</code></pre></div>\n<p><strong>Configuración Servidor t7:</strong></p>\n<p>Volvemos a crear un servidor de dns con bind9 y modificamos lo siguiente:</p>\n<p>En /etc/bind/named.conf.local</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">zone <span class=\"token string\">\"nuevazona.iesgn.org\"</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token builtin class-name\">type</span> master<span class=\"token punctuation\">;</span>\n  <span class=\"token function\">file</span> <span class=\"token string\">\"db.nuevazona.iesgn.org\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>En /var/cache/bind/db.nuevazona.iesgn.org</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token variable\">$TTL</span> <span class=\"token number\">86400</span>              <span class=\"token punctuation\">;</span> <span class=\"token number\">1</span> day\n@                               IN SOA madu-sub.nuevazona.iesgn.org. madu.iesgn.org. <span class=\"token punctuation\">(</span>\n                                        <span class=\"token number\">12998</span> <span class=\"token punctuation\">;</span> serial\n                                        <span class=\"token number\">21600</span> <span class=\"token punctuation\">;</span> refresh <span class=\"token punctuation\">(</span><span class=\"token number\">6</span> hours<span class=\"token punctuation\">)</span>\n                                        <span class=\"token number\">3600</span> <span class=\"token punctuation\">;</span> retry <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> hour<span class=\"token punctuation\">)</span>\n                                        <span class=\"token number\">604800</span> <span class=\"token punctuation\">;</span> expire <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> week<span class=\"token punctuation\">)</span>\n                                        <span class=\"token number\">21600</span> <span class=\"token punctuation\">;</span> minimum <span class=\"token punctuation\">(</span><span class=\"token number\">6</span> hours<span class=\"token punctuation\">)</span>\n                                        <span class=\"token punctuation\">)</span>\n\n@       IN      NS      madu-sub.nuevazona.iesgn.org.\n@       IN      MX  <span class=\"token number\">10</span>  correo.nuevazona.iesgn.org.\n\n<span class=\"token variable\">$ORIGIN</span> nuevazona.iesgn.org.\n\nmadu-sub\tIN      A        <span class=\"token number\">192.168</span>.100.158</code></pre></div>\n<div style=\"background-color:#ff5733; border-radius:1em; border-color: black;\">\n<ul>\n<li>\n<p>Tarea 8 (1 punto): Realiza las consultas dig/neslookup desde los clientes preguntando por los siguientes:</p>\n<ul>\n<li>Dirección de www.informatica.iesgn.org, ftp.informatica.iesgn.org</li>\n<li>El servidor DNS que tiene configurado la zona del dominio informatica.iesgn.org. ¿Es el mismo que el servidor DNS con autoridad para la zona iesgn.org?</li>\n<li>\n<p>El servidor de correo configurado para informatica.iesgn.org</p>\n</div>\n</li>\n</ul>\n</li>\n</ul>","timeToRead":17,"excerpt":"Escenario En nuestra red local tenemos un servidor Web que sirve dos páginas web: www.iesgn.org, departamentos.iesgn.org Vamos a instalar en…","frontmatter":{"title":"Práctica: Servidor DNS","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-11-27T00:00:00.000Z","categories":["SRI"],"tags":["DNS","Bind9","Servidor","Dominio"]},"fields":{"slug":"/practica-servidor-dns","date":"November 26, 2020"}}},"pageContext":{"slug":"/practica-servidor-dns","nexttitle":"Actualización de quijote a CentOS8","nextslug":"/actualizacion-de-quijote-a-cent-os-8","prevtitle":"Instalación y configuración de Servidores y Clientes","prevslug":"/instalacion-y-configuracion-de-servidores-y-clientes"}}}