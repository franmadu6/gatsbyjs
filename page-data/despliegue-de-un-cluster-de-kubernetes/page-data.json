{"componentChunkName":"component---src-templates-post-js","path":"/despliegue-de-un-cluster-de-kubernetes","result":{"data":{"markdownRemark":{"html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/fefecd4a910b256413c51bef0c7dec4a/aacda/kubernets-logo.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.331606217616574%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRvoAAABXRUJQVlA4WAoAAAAQAAAAEwAACQAAQUxQSHEAAAABcBvbtqqci7u7uztkVgC5NsGQQQSxZm6hawXU5lZCREwA/stk/OMtAUTEoI/lPAi/9m+3SrSgS9RMsWA6ZcvmfaHg9XZr5vatwWJ8qVd7q0Vj3x7a9kspR2e1OpV2qVBm0unsOif+SgwGQG8B0Fv8FQBWUDggYgAAABADAJ0BKhQACgA+0VSjS6gkoyGwCAEAGglAFh2EOFjM8AD+0HGxaciHEUHTXX9dZUdH+iuAoxXNt3FZq3SPBB963NmHVTeEXLKejYDKdupJJ256gkplKLRyOLzTZIHVsAAA'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"kubernets-logo.webp\"\n        src=\"/gatsbyjs/static/fefecd4a910b256413c51bef0c7dec4a/de8ee/kubernets-logo.webp\"\n        srcset=\"/gatsbyjs/static/fefecd4a910b256413c51bef0c7dec4a/ca0f9/kubernets-logo.webp 173w,\n/gatsbyjs/static/fefecd4a910b256413c51bef0c7dec4a/fdd64/kubernets-logo.webp 345w,\n/gatsbyjs/static/fefecd4a910b256413c51bef0c7dec4a/de8ee/kubernets-logo.webp 690w,\n/gatsbyjs/static/fefecd4a910b256413c51bef0c7dec4a/aacda/kubernets-logo.webp 772w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Elige un método de instalación para crear un cluster de k8s con tres nodos (un controlador y dos workers), puedes usar kubeadm, k3s o cualquier otra opción equivalente que encuentres</li>\n<li>Describe en la tarea los pasos principales de la instalación y configuración del cluster</li>\n<li>Configura kubectl adecuadamente para gestionar el cluster desde tu máquina, no desde el nodo controlador</li>\n<li>Realiza un despliegue de la aplicación del ejemplo 8 del curso: <a href=\"https://github.com/iesgn/kubernetes-storm/tree/master/unidad3/ejemplos-3.2/ejemplo8\">https://github.com/iesgn/kubernetes-storm/tree/master/unidad3/ejemplos-3.2/ejemplo8</a></li>\n<li>Comprueba que es posible escalar a varias réplicas el despliegue del componente letschat y funciona correctamente el componente ingress</li>\n</ul>\n<hr>\n<p>El escenario que generaremos para la practica serà el siguiente <a href=\"/gatsbyjs/f7f4514311ec5f408107448d079c52cc/vagrantfilekubernete.txt\">Vagrantfile</a>, en el se contempla el controlador y los dos workers.</p>\n<p>Una vez levantado el escenario con <strong>vagrant up</strong> nos conectaremos al controlador:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete$ vagrant <span class=\"token function\">ssh</span> controller</code></pre></div>\n<p>Ejecutaremos el siguiente comando el cual realizará una instalación automática de k3s:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@controller:~$ <span class=\"token function\">curl</span> -sfL https://get.k3s.io <span class=\"token operator\">|</span> <span class=\"token function\">sh</span> -\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Finding release <span class=\"token keyword\">for</span> channel stable\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Using v1.21.1+k3s1 as release\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Downloading <span class=\"token builtin class-name\">hash</span> https://github.com/k3s-io/k3s/releases/download/v1.21.1+k3s1/sha256sum-amd64.txt\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Downloading binary https://github.com/k3s-io/k3s/releases/download/v1.21.1+k3s1/k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Verifying binary download\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Installing k3s to /usr/local/bin/k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating /usr/local/bin/kubectl symlink to k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating /usr/local/bin/crictl symlink to k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating /usr/local/bin/ctr symlink to k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating <span class=\"token function\">killall</span> script /usr/local/bin/k3s-killall.sh\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating uninstall script /usr/local/bin/k3s-uninstall.sh\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  env: Creating environment <span class=\"token function\">file</span> /etc/systemd/system/k3s.service.env\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  systemd: Creating <span class=\"token function\">service</span> <span class=\"token function\">file</span> /etc/systemd/system/k3s.service\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  systemd: Enabling k3s unit\nCreated symlink /etc/systemd/system/multi-user.target.wants/k3s.service → /etc/systemd/system/k3s.service.\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  systemd: Starting k3s</code></pre></div>\n<p>Una vez instalado podremos obtener información de los nodos:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@controller:~$ <span class=\"token function\">sudo</span> kubectl get nodes\nNAME         STATUS   ROLES                  AGE   VERSION\ncontroller   Ready    control-plane,master   15s   v1.21.1+k3s1</code></pre></div>\n<h2 id=\"parámetros-necesarios-para-los-workers\"><a href=\"#par%C3%A1metros-necesarios-para-los-workers\" aria-label=\"parámetros necesarios para los workers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Parámetros necesarios para los workers</h2>\n<p>Necesitaremos la <strong>INTERNAL-IP</strong> que podremos obtener de la salida del siguiente comando:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@controller:~$ <span class=\"token function\">sudo</span> kubectl get nodes -o wide\nNAME         STATUS   ROLES                  AGE   VERSION        INTERNAL-IP    EXTERNAL-IP   OS-IMAGE                       KERNEL-VERSION    CONTAINER-RUNTIME\ncontroller   Ready    control-plane,master   32s   v1.21.1+k3s1   <span class=\"token number\">192.168</span>.1.11   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        Debian GNU/Linux <span class=\"token number\">10</span> <span class=\"token punctuation\">(</span>buster<span class=\"token punctuation\">)</span>   <span class=\"token number\">4.19</span>.0-16-amd64   containerd://1.4.4-k3s2</code></pre></div>\n<p>Para vincular los nuevos nodos con el controlador necesitaremos además de la ip de controller su <strong>token de verificación</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@controller:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">cat</span> /var/lib/rancher/k3s/server/node-token\nK10e01ce6e4004c6be864616c9289679d18c275036799c05b8d273761d1c369b625::server:3a535319fd4bef7eb1d90af1832b6d86</code></pre></div>\n<h2 id=\"instalación-de-k3s-en-los-workers\"><a href=\"#instalaci%C3%B3n-de-k3s-en-los-workers\" aria-label=\"instalación de k3s en los workers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Instalación de k3s en los workers</h2>\n<p>La siguiente acción que realizaremos se hará de igual manera en ambos workers y consistira en añadire tanto la <strong>ip</strong> y el <strong>token</strong> obtenidos anteriormente a variables de entorno:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@worker1:~$ <span class=\"token assign-left variable\">k3s_url</span><span class=\"token operator\">=</span><span class=\"token string\">\"https://192.168.1.11:6443\"</span>\nvagrant@worker1:~$ <span class=\"token assign-left variable\">k3s_token</span><span class=\"token operator\">=</span><span class=\"token string\">\"K10e01ce6e4004c6be864616c9289679d18c275036799c05b8d273761d1c369b625::server:3a535319fd4bef7eb1d90af1832b6d86\"</span></code></pre></div>\n<p>Ejecutaremos ahora la instalación de <strong>k3s</strong> haciendo uso de las nuevas variables para vincularlo con el controlador:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@worker1:~$ <span class=\"token function\">curl</span> -sfL https://get.k3s.io <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">K3S_URL</span><span class=\"token operator\">=</span><span class=\"token variable\">${k3s_url}</span> <span class=\"token assign-left variable\">K3S_TOKEN</span><span class=\"token operator\">=</span><span class=\"token variable\">${k3s_token}</span> <span class=\"token function\">sh</span>\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Finding release <span class=\"token keyword\">for</span> channel stable\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Using v1.21.1+k3s1 as release\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Downloading <span class=\"token builtin class-name\">hash</span> https://github.com/k3s-io/k3s/releases/download/v1.21.1+k3s1/sha256sum-amd64.txt\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Downloading binary https://github.com/k3s-io/k3s/releases/download/v1.21.1+k3s1/k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Verifying binary download\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Installing k3s to /usr/local/bin/k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating /usr/local/bin/kubectl symlink to k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating /usr/local/bin/crictl symlink to k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating /usr/local/bin/ctr symlink to k3s\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating <span class=\"token function\">killall</span> script /usr/local/bin/k3s-killall.sh\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  Creating uninstall script /usr/local/bin/k3s-agent-uninstall.sh\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  env: Creating environment <span class=\"token function\">file</span> /etc/systemd/system/k3s-agent.service.env\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  systemd: Creating <span class=\"token function\">service</span> <span class=\"token function\">file</span> /etc/systemd/system/k3s-agent.service\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  systemd: Enabling k3s-agent unit\nCreated symlink /etc/systemd/system/multi-user.target.wants/k3s-agent.service → /etc/systemd/system/k3s-agent.service.\n<span class=\"token punctuation\">[</span>INFO<span class=\"token punctuation\">]</span>  systemd: Starting k3s-agent</code></pre></div>\n<p>Una vez realizada la instalación en ambas maquinas podremos comprobar que estan operativas chequeando los nodos disponibles desde el controlador.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@controller:~$ <span class=\"token function\">sudo</span> kubectl get nodes\nNAME         STATUS   ROLES                  AGE     VERSION\nworker1      Ready    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>                 96s     v1.21.1+k3s1\ncontroller   Ready    control-plane,master   6m24s   v1.21.1+k3s1\nworker2      Ready    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>                 22s     v1.21.1+k3s1</code></pre></div>\n<h1 id=\"gestionar-el-cluster-desde-fuera-del-escenario\"><a href=\"#gestionar-el-cluster-desde-fuera-del-escenario\" aria-label=\"gestionar el cluster desde fuera del escenario permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gestionar el cluster desde fuera del escenario.</h1>\n<p>Deberemos de instalar <strong>kubectl</strong> en nuestra maquina anfitriona:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete$ <span class=\"token function\">curl</span> -LO <span class=\"token string\">\"https://dl.k8s.io/release/<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">curl</span> -L -s https://dl.k8s.io/release/stable.txt<span class=\"token variable\">)</span></span>/bin/linux/amd64/kubectl\"</span>\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n<span class=\"token number\">100</span>   <span class=\"token number\">154</span>  <span class=\"token number\">100</span>   <span class=\"token number\">154</span>    <span class=\"token number\">0</span>     <span class=\"token number\">0</span>    <span class=\"token number\">939</span>      <span class=\"token number\">0</span> --:--:-- --:--:-- --:--:--   <span class=\"token number\">939</span>\n<span class=\"token number\">100</span> <span class=\"token number\">45</span>.3M  <span class=\"token number\">100</span> <span class=\"token number\">45</span>.3M    <span class=\"token number\">0</span>     <span class=\"token number\">0</span>  <span class=\"token number\">19</span>.8M      <span class=\"token number\">0</span>  <span class=\"token number\">0</span>:00:02  <span class=\"token number\">0</span>:00:02 --:--:-- <span class=\"token number\">25</span>.4M\nfran@debian:~/vagrant/kubernete$ <span class=\"token function\">sudo</span> <span class=\"token function\">install</span> -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n<span class=\"token punctuation\">[</span>sudo<span class=\"token punctuation\">]</span> password <span class=\"token keyword\">for</span> fran: \nfran@debian:~/vagrant/kubernete$ </code></pre></div>\n<p>Nos iremos a nuestro controlador y copiaremos el archivo <strong>/etc/rancher/k3s/k3s.yaml</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">vagrant@controller:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">cat</span> /etc/rancher/k3s/k3s.yaml\napiVersion: v1\nclusters:\n- cluster:\n    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJlRENDQVIyZ0F3SUJBZ0lCQURBS0JnZ3Foa2pPUFFRREFqQWpNU0V3SHdZRFZRUUREQmhyTTNNdGMyVnkKZG1WeUxXTmhRREUyTWpNMU56Y3pOREl3SGhjTk1qRXdOakV6TURrME1qSXlXaGNOTXpFd05qRXhNRGswTWpJeQpXakFqTVNFd0h3WURWUVFEREJock0zTXRjMlZ5ZG1WeUxXTmhRREUyTWpNMU56Y3pOREl3V1RBVEJnY3Foa2pPClBRSUJCZ2dxaGtqT1BRTUJCd05DQUFTVjd0dks2WEdwSTN5dWlzMmxqcGUxZ1oySFF0TE9JUUVISGRrYUNOYU4KUHd5UHVxNGwyeXVGbXZJbDBwdzhJWnVTV09CeFB6a3QzeFdsNXRGdjZMRk1vMEl3UURBT0JnTlZIUThCQWY4RQpCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVXREMjloZUI0K3E3R2x2SGRvaEttCjBRbE9VdlV3Q2dZSUtvWkl6ajBFQXdJRFNRQXdSZ0loQUliVTQ0UFdqZkt3VEcvVytkY3RuN0N3Mm1hdG53ZlEKV05OK2VtV3I2eUV4QWlFQXN0WWlTTTNmMm1FMlkrdFRrVllNTmt4eFZ2U3ZtMEFtMVV1THU2djZKY289Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    server: https://127.0.0.1:6443\n  name: default\ncontexts:\n- context:\n    cluster: default\n    user: default\n  name: default\ncurrent-context: default\nkind: Config\npreferences: <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nusers:\n- name: default\n  user:\n    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJrRENDQVRlZ0F3SUJBZ0lJZnRvakZuYnNCOW93Q2dZSUtvWkl6ajBFQXdJd0l6RWhNQjhHQTFVRUF3d1kKYXpOekxXTnNhV1Z1ZEMxallVQXhOakl6TlRjM016UXlNQjRYRFRJeE1EWXhNekE1TkRJeU1sb1hEVEl5TURZeApNekE1TkRJeU1sb3dNREVYTUJVR0ExVUVDaE1PYzNsemRHVnRPbTFoYzNSbGNuTXhGVEFUQmdOVkJBTVRESE41CmMzUmxiVHBoWkcxcGJqQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJBczNFMXY1UEY1TmlCd0UKVTFtOGQ5emI0Ui9LeTBCUUxEVldIYUdLdXJ2ZXNXL0EyaXp5dEtQUWU5c0NCZFdIaUNaVEVZR2pEY0V5TFVFYgpsWnFmRzMyalNEQkdNQTRHQTFVZER3RUIvd1FFQXdJRm9EQVRCZ05WSFNVRUREQUtCZ2dyQmdFRkJRY0RBakFmCkJnTlZIU01FR0RBV2dCUWNRUmJuQWNBNDJDY1VuckxkUEptMkFaeWdlekFLQmdncWhrak9QUVFEQWdOSEFEQkUKQWlCdWloQ1NsTWhOZXB1dGNhOGNlOEcrajJTRmdISFN4Z2hDN1JsaTJFUGRkZ0lnSENaTHY0SytyT0dZaHIrSgpZbkNSZzFUYzN4aG5qSmJUdmRKN3BhNG5ueG89Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJlRENDQVIyZ0F3SUJBZ0lCQURBS0JnZ3Foa2pPUFFRREFqQWpNU0V3SHdZRFZRUUREQmhyTTNNdFkyeHAKWlc1MExXTmhRREUyTWpNMU56Y3pOREl3SGhjTk1qRXdOakV6TURrME1qSXlXaGNOTXpFd05qRXhNRGswTWpJeQpXakFqTVNFd0h3WURWUVFEREJock0zTXRZMnhwWlc1MExXTmhRREUyTWpNMU56Y3pOREl3V1RBVEJnY3Foa2pPClBRSUJCZ2dxaGtqT1BRTUJCd05DQUFTSkZZTXFMRnl4TzlnMWtBTU1xb3VNeWsrQnRrWFNYT0lYNyt2TWhvWjcKOVU1czFMaFJjWVV3M2tZaUhla2x0Sld3Tmc2eUFKellKSnVodXhEL2twYWFvMEl3UURBT0JnTlZIUThCQWY4RQpCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVUhFRVc1d0hBT05nbkZKNnkzVHlaCnRnR2NvSHN3Q2dZSUtvWkl6ajBFQXdJRFNRQXdSZ0loQU1rajBtbDQza0s1VlVMQXl4NjkwTEJkOXd1STRTN0cKRFVwNGM4Uzc3K0RZQWlFQTVPNnlSNjBtbVAvNytzLzFFaGkxa3JDdlQ2Wk9WQmxuQXBGZ3lORElPZlU9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    client-key-data: <span class=\"token assign-left variable\">LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSU1KSXk4VkZjUHJ3Y2JiblNyRmNhN2JnT2JtaURqSjA1OUkzM2psdjBHV0hvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFQ3pjVFcvazhYazJJSEFSVFdieDMzTnZoSDhyTFFGQXNOVllkb1lxNnU5NnhiOERhTFBLMApvOUI3MndJRjFZZUlKbE1SZ2FNTndUSXRRUnVWbXA4YmZRPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo</span><span class=\"token operator\">=</span></code></pre></div>\n<p>Crearemos un nuevo fichero de configuración y cambiaremos su ip por la de nuestro controlador para que quede así:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete$ <span class=\"token function\">nano</span> ~/.kube/config\napiVersion: v1\nclusters:\n- cluster:\n    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJlRENDQVIyZ0F3SUJBZ0lCQURBS0JnZ3Foa2pPUFFRREFqQWpNU0V3SHdZRFZRUUREQmhyTTNNdGMyVnkKZG1WeUxXTmhRREUyTWpNMU56Y3pOREl3SGhjTk1qRXdOakV6TURrME1qSXlXaGNOTXpFd05qRXhNRGswTWpJeQpXakFqTVNFd0h3WURWUVFEREJock0zTXRjMlZ5ZG1WeUxXTmhRREUyTWpNMU56Y3pOREl3V1RBVEJnY3Foa2pPClBRSUJCZ2dxaGtqT1BRTUJCd05DQUFTVjd0dks2WEdwSTN5dWlzMmxqcGUxZ1oySFF0TE9JUUVISGRrYUNOYU4KUHd5UHVxNGwyeXVGbXZJbDBwdzhJWnVTV09CeFB6a3QzeFdsNXRGdjZMRk1vMEl3UURBT0JnTlZIUThCQWY4RQpCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVXREMjloZUI0K3E3R2x2SGRvaEttCjBRbE9VdlV3Q2dZSUtvWkl6ajBFQXdJRFNRQXdSZ0loQUliVTQ0UFdqZkt3VEcvVytkY3RuN0N3Mm1hdG53ZlEKV05OK2VtV3I2eUV4QWlFQXN0WWlTTTNmMm1FMlkrdFRrVllNTmt4eFZ2U3ZtMEFtMVV1THU2djZKY289Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    server: https://192.168.1.11:6443\n  name: default\ncontexts:\n- context:\n    cluster: default\n    user: default\n  name: default\ncurrent-context: default\nkind: Config\npreferences: <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\nusers:\n- name: default\n  user:\n    client-certificate-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJrRENDQVRlZ0F3SUJBZ0lJZnRvakZuYnNCOW93Q2dZSUtvWkl6ajBFQXdJd0l6RWhNQjhHQTFVRUF3d1kKYXpOekxXTnNhV1Z1ZEMxallVQXhOakl6TlRjM016UXlNQjRYRFRJeE1EWXhNekE1TkRJeU1sb1hEVEl5TURZeApNekE1TkRJeU1sb3dNREVYTUJVR0ExVUVDaE1PYzNsemRHVnRPbTFoYzNSbGNuTXhGVEFUQmdOVkJBTVRESE41CmMzUmxiVHBoWkcxcGJqQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxR1NNNDlBd0VIQTBJQUJBczNFMXY1UEY1TmlCd0UKVTFtOGQ5emI0Ui9LeTBCUUxEVldIYUdLdXJ2ZXNXL0EyaXp5dEtQUWU5c0NCZFdIaUNaVEVZR2pEY0V5TFVFYgpsWnFmRzMyalNEQkdNQTRHQTFVZER3RUIvd1FFQXdJRm9EQVRCZ05WSFNVRUREQUtCZ2dyQmdFRkJRY0RBakFmCkJnTlZIU01FR0RBV2dCUWNRUmJuQWNBNDJDY1VuckxkUEptMkFaeWdlekFLQmdncWhrak9QUVFEQWdOSEFEQkUKQWlCdWloQ1NsTWhOZXB1dGNhOGNlOEcrajJTRmdISFN4Z2hDN1JsaTJFUGRkZ0lnSENaTHY0SytyT0dZaHIrSgpZbkNSZzFUYzN4aG5qSmJUdmRKN3BhNG5ueG89Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJlRENDQVIyZ0F3SUJBZ0lCQURBS0JnZ3Foa2pPUFFRREFqQWpNU0V3SHdZRFZRUUREQmhyTTNNdFkyeHAKWlc1MExXTmhRREUyTWpNMU56Y3pOREl3SGhjTk1qRXdOakV6TURrME1qSXlXaGNOTXpFd05qRXhNRGswTWpJeQpXakFqTVNFd0h3WURWUVFEREJock0zTXRZMnhwWlc1MExXTmhRREUyTWpNMU56Y3pOREl3V1RBVEJnY3Foa2pPClBRSUJCZ2dxaGtqT1BRTUJCd05DQUFTSkZZTXFMRnl4TzlnMWtBTU1xb3VNeWsrQnRrWFNYT0lYNyt2TWhvWjcKOVU1czFMaFJjWVV3M2tZaUhla2x0Sld3Tmc2eUFKellKSnVodXhEL2twYWFvMEl3UURBT0JnTlZIUThCQWY4RQpCQU1DQXFRd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZEJnTlZIUTRFRmdRVUhFRVc1d0hBT05nbkZKNnkzVHlaCnRnR2NvSHN3Q2dZSUtvWkl6ajBFQXdJRFNRQXdSZ0loQU1rajBtbDQza0s1VlVMQXl4NjkwTEJkOXd1STRTN0cKRFVwNGM4Uzc3K0RZQWlFQTVPNnlSNjBtbVAvNytzLzFFaGkxa3JDdlQ2Wk9WQmxuQXBGZ3lORElPZlU9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K\n    client-key-data: <span class=\"token assign-left variable\">LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSU1KSXk4VkZjUHJ3Y2JiblNyRmNhN2JnT2JtaURqSjA1OUkzM2psdjBHV0hvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFQ3pjVFcvazhYazJJSEFSVFdieDMzTnZoSDhyTFFGQXNOVllkb1lxNnU5NnhiOERhTFBLMApvOUI3MndJRjFZZUlKbE1SZ2FNTndUSXRRUnVWbXA4YmZRPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo</span><span class=\"token operator\">=</span></code></pre></div>\n<p>Cargaremos el fichero con las credenciales:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete$ <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">KUBECONFIG</span><span class=\"token operator\">=</span>~/.kube/config</code></pre></div>\n<p>Y ya podremos comprobar que tenemos nuestros nodos estan operativos desde nuestra maquina anfitriona:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete$ kubectl get nodes\nNAME         STATUS   ROLES                  AGE     VERSION\nworker1      Ready    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>                 9m21s   v1.21.1+k3s1\ncontroller   Ready    control-plane,master   14m     v1.21.1+k3s1\nworker2      Ready    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>                 8m7s    v1.21.1+k3s1</code></pre></div>\n<h2 id=\"despliegue-letschat\"><a href=\"#despliegue-letschat\" aria-label=\"despliegue letschat permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Despliegue Letschat</h2>\n<p>Ahora realizaremos un despliegue de la aplicación <strong>Letschat</strong>, clonaremos el repositorio del centro, el cual aparte del ejemplo que vamos a utilizar posee varios mas sobre la utilizaicon de kubectl:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete$ <span class=\"token function\">git</span> clone https://github.com/iesgn/kubernetes-storm.git</code></pre></div>\n<p>Nos desplazaremos al ejemplo8 citado en la tarea y ejecutaremos el siguiente comando:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete$ <span class=\"token function\">ls</span>\nkubectl  kubernetes-storm  Vagrantfile\nfran@debian:~/vagrant/kubernete$ <span class=\"token builtin class-name\">cd</span> kubernetes-storm/unidad3/ejemplos-3.2/ejemplo8/\nfran@debian:~/vagrant/kubernete/kubernetes-storm/unidad3/ejemplos-3.2/ejemplo8$ kubectl apply -f <span class=\"token builtin class-name\">.</span>\nWarning: networking.k8s.io/v1beta1 Ingress is deprecated <span class=\"token keyword\">in</span> v1.19+, unavailable <span class=\"token keyword\">in</span> v1.22+<span class=\"token punctuation\">;</span> use networking.k8s.io/v1 Ingress\ningress.networking.k8s.io/ingress-letschat created\ndeployment.apps/letschat created\nservice/letschat created\ndeployment.apps/mongo created\nservice/mongo created</code></pre></div>\n<p>El fichero desplegará varios servicios, pasado unos segundos podremos observar que ya estará todo listo:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete/kubernetes-storm/unidad3/ejemplos-3.2/ejemplo8$ kubectl get all,ingress\nNAME                            READY   STATUS    RESTARTS   AGE\npod/mongo-5c694c878b-d5vjk      <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          6m13s\npod/letschat-7c66bd64f5-vcffj   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">5</span>          6m13s\n\nNAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>          AGE\nservice/kubernetes   ClusterIP   <span class=\"token number\">10.43</span>.0.1       <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        <span class=\"token number\">443</span>/TCP          22m\nservice/letschat     NodePort    <span class=\"token number\">10.43</span>.137.91    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        <span class=\"token number\">8080</span>:31382/TCP   6m13s\nservice/mongo        ClusterIP   <span class=\"token number\">10.43</span>.159.207   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        <span class=\"token number\">27017</span>/TCP        6m13s\n\nNAME                       READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/mongo      <span class=\"token number\">1</span>/1     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           6m13s\ndeployment.apps/letschat   <span class=\"token number\">1</span>/1     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           6m13s\n\nNAME                                  DESIRED   CURRENT   READY   AGE\nreplicaset.apps/mongo-5c694c878b      <span class=\"token number\">1</span>         <span class=\"token number\">1</span>         <span class=\"token number\">1</span>       6m13s\nreplicaset.apps/letschat-7c66bd64f5   <span class=\"token number\">1</span>         <span class=\"token number\">1</span>         <span class=\"token number\">1</span>       6m13s\n\nNAME                                         CLASS    HOSTS              ADDRESS                                   PORTS   AGE\ningress.networking.k8s.io/ingress-letschat   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>   www.letschat.com   <span class=\"token number\">192.168</span>.1.11,192.168.1.117,192.168.1.41   <span class=\"token number\">80</span>      6m13s</code></pre></div>\n<p>Servicios desplegados:</p>\n<ul>\n<li>mongo-deployment, mongo-srv: Despliegue y conexión con una base de datos mongo.</li>\n<li>letschat-deployment, letschat-srv: Despligue y servicio de la aplicación letschat y su conexión con una base de datos.</li>\n<li>ingress: Para poder acceder a la apliación mediante un nombre.</li>\n</ul>\n<h2 id=\"escalado\"><a href=\"#escalado\" aria-label=\"escalado permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Escalado</h2>\n<p>Para que podamos comprobar el funcionamiento de escalado bastara con ejecutar el siguiente comando:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete/kubernetes-storm/unidad3/ejemplos-3.2/ejemplo8$ kubectl scale deployment letschat --replicas<span class=\"token operator\">=</span><span class=\"token number\">10</span>\ndeployment.apps/letschat scaled</code></pre></div>\n<p>Pasados unos segundos las replicas estaran ya escaladas. </p>\n<p>Nota: Deberás de tener en cuenta la capicidad de tu ordenador a la hora de escalar las replicas, ya que el proceso podria suponer demasiado estres en la maquina dando lugar a una relentizacióń o incluso caida de alguna de las máquinas del escenario:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete/kubernetes-storm/unidad3/ejemplos-3.2/ejemplo8$ kubectl get all\nNAME                            READY   STATUS    RESTARTS   AGE\npod/mongo-5c694c878b-d5vjk      <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">1</span>          10m\npod/letschat-7c66bd64f5-jgj8p   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">1</span>          3m4s\npod/letschat-7c66bd64f5-g2hc4   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          3m4s\npod/letschat-7c66bd64f5-9fxz7   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          3m4s\npod/letschat-7c66bd64f5-vkz7t   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          3m4s\npod/letschat-7c66bd64f5-4lcvx   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          3m4s\npod/letschat-7c66bd64f5-dzlwb   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">0</span>          3m4s\npod/letschat-7c66bd64f5-vcffj   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">6</span>          10m\npod/letschat-7c66bd64f5-zm8tv   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">1</span>          3m4s\npod/letschat-7c66bd64f5-b2pn9   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">1</span>          3m4s\npod/letschat-7c66bd64f5-pncx7   <span class=\"token number\">1</span>/1     Running   <span class=\"token number\">1</span>          3m4s\n\nNAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>          AGE\nservice/kubernetes   ClusterIP   <span class=\"token number\">10.43</span>.0.1       <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        <span class=\"token number\">443</span>/TCP          26m\nservice/letschat     NodePort    <span class=\"token number\">10.43</span>.137.91    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        <span class=\"token number\">8080</span>:31382/TCP   10m\nservice/mongo        ClusterIP   <span class=\"token number\">10.43</span>.159.207   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">></span>        <span class=\"token number\">27017</span>/TCP        10m\n\nNAME                       READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/mongo      <span class=\"token number\">1</span>/1     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           10m\ndeployment.apps/letschat   <span class=\"token number\">10</span>/10   <span class=\"token number\">10</span>           <span class=\"token number\">10</span>          10m\n\nNAME                                  DESIRED   CURRENT   READY   AGE\nreplicaset.apps/mongo-5c694c878b      <span class=\"token number\">1</span>         <span class=\"token number\">1</span>         <span class=\"token number\">1</span>       10m\nreplicaset.apps/letschat-7c66bd64f5   <span class=\"token number\">10</span>        <span class=\"token number\">10</span>        <span class=\"token number\">10</span>      10m\nfran@debian:~/vagrant/kubernete/kubernetes-storm/unidad3/ejemplos-3.2/ej</code></pre></div>\n<p>kubectl get deploy,rs,po -o wide</p>\n<h2 id=\"componente-ingress\"><a href=\"#componente-ingress\" aria-label=\"componente ingress permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Componente ingress</h2>\n<p>Para comprobar que el <strong>componente ingress</strong> este operativo (recordemos que sirve para poder acceder a la aplicación mediante un nombre) intentaremos acceder nuestra pagina de letschat generada anteriormente, para ello añadiremos la ip a nuestro fichero de hosts y accederemos via web:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/vagrant/kubernete/kubernetes-storm/unidad3/ejemplos-3.2/ejemplo8$ <span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/hosts\n\n<span class=\"token number\">192.168</span>.1.11  www.letschat.com</code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/648fc66e6fdb07756a0dda2de1e70b3b/b6ea3/letschat.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103.03664921465968%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAEY0lEQVQ4y01UaS9lWRS9P8AnIqYyz1PSCJLqakMJjSZoyhCUR4QiqEIoWoh5aDEnFKV4xpgipjyzalPHGENKmoiYqr80SfvQoU1ZfffuvIqb7Jx9zj1n7bXW2fcKAQEBCAoKgru7Oxyff48fXryAk7MzHBwcYGdnBxsbG1hZfQdrCmtrMbeCvb09nMU9gYGBkEgi+LyHhwe8vb0h5Bfk45fMTJQUF6I4vwCFBQWoqKxEVVUVmps/4kNjI5qbPkDa8hEtra1oaWmBVNqKsrIyvHr1CiEhIWhoaBD3NqOmpgZCd3c3enp6MDk5Cdn4OIaHh7G6uor19XXs7e3h7OwMFxeXuLz8Py4uLnB1dYXZ2Vl4enqCFB4dHfG74+NjCOXl5cymo6MDjSIbKrC2toaZmRmsrKzw5pOTE5yenjI45TQODg7Cy8sLfn5+2Nra4jO9vb0QqqurUVpayhJKSkpY0vT0NDPc2dlhwPPzcxwcHDBjGpeWlvDp0yf2jCSPjY2hvb0dlaJVQnFxMWuvqKhAfn4+y+/q6sLQ0BDmF+axv7+Pr+dfsbu7y1ZsbGwwQG1tLXx9fREeHs4e0px8FCghQAqSLJVKeQOBdnd2YWXpd2a492WPmff392NkZIRtIrkSiYT319fXo6mpCUJ6ejrevn2LtLQ0FBYWokC85b6+PszMzWJ6cBS/jU5gd+8LDg8Psby8zN7Se1Lm7+/PgLm5uWwbS05NTUV8fDySkpKQnJyMnJwctLW1semdXZ3oExlNTU0xu4WFBUxMTLC8vLw8BoyKimISRCZTbD+BQBISEhiMWL5//x51dXUYGBhgr8bFVpqfn8fi4iI+f/4MmUzGftNhAoyOjgZ1CvlPOMK7d+8QGxsLGkl+YmIitre3IX9ubm64954+1AlZWVl8KW/evGG5pJRwvkkmHzMyMhh0c3OTD15fX+Pu7g739/ccDw8PuL29ZXnExsfHhwHpUgiU7GLJtEjMSHJcXBz32VPAx8dHBpOP2dnZCA0NZcCIiAieFxUVsa/MkC6EKpIf9JHTJcgBiRmzJGAxv/33BtVii8XExPCnFxwc/O2LIXAGJFY0oSb19/8Za+sbDHj/xLfJv0Spf/yN4T//QW1lBSSRkXBzc2OmkWJOflIBISwsjM0khikpKXzb1DZzc3PcIsR2VmyZjmEZ6vpH0T4iQ/mvZXj9OgKOjo78C6M+pEsipYKpqSlsbW35/0f/OAonJycOFxcXuLq6wlVk4uHmCq8fXfGTuxszefnyJSwtLfmfSTntpQKCrq4udHR0OIyMjKCnp8ejmZkZqJiJiQnnNJqYiqO4ZmFuznNDQ0MYGBiAMCg0NDQg6OvrMxgt0CYCs7CwgLl4iAAJjILW5YXkcy0tLSYgJ6WqqgqBKtAiLRgbG4MKEDDlNMqBaU5AJJOC1uUMNTU1mZ2ysjIEjWfPoKamBiUlJV4kYKqsra3NQVVpI40qKio8qqurc66oqMg5nSMMBQUF/Af43g+U2k/hcQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"letschat.png\"\n        src=\"/gatsbyjs/static/648fc66e6fdb07756a0dda2de1e70b3b/36727/letschat.png\"\n        srcset=\"/gatsbyjs/static/648fc66e6fdb07756a0dda2de1e70b3b/acf4b/letschat.png 173w,\n/gatsbyjs/static/648fc66e6fdb07756a0dda2de1e70b3b/fc834/letschat.png 345w,\n/gatsbyjs/static/648fc66e6fdb07756a0dda2de1e70b3b/36727/letschat.png 690w,\n/gatsbyjs/static/648fc66e6fdb07756a0dda2de1e70b3b/b6ea3/letschat.png 955w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","timeToRead":20,"excerpt":"Elige un método de instalación para crear un cluster de k8s con tres nodos (un controlador y dos workers), puedes usar kubeadm, k3s o…","frontmatter":{"title":"Despliegue de un cluster de kubernetes","cover":"https://img.icons8.com/ios/452/work.png","date":"2021-6-11","categories":["HLC"],"tags":["Kubernete","Cluster"]},"fields":{"slug":"/despliegue-de-un-cluster-de-kubernetes","date":"June 10, 2021"}}},"pageContext":{"slug":"/despliegue-de-un-cluster-de-kubernetes","nexttitle":"Utilización de cloud-init","nextslug":"/utilizacion-de-cloud-init","prevtitle":"Práctica 2: rclone - Gestionando nuestro almacenamiento en la nube (unidad 1)","prevslug":"/practica-2-rclone-gestionando-nuestro-almacenamiento-en-la-nube-unidad-1"}}}