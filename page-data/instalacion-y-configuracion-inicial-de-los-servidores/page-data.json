{"componentChunkName":"component---src-templates-post-js","path":"/instalacion-y-configuracion-inicial-de-los-servidores","result":{"data":{"markdownRemark":{"html":"<p>En esta tarea se va a crear el escenario de trabajo que se va a usar durante todo el curso, que va a constar inicialmente de 3 instancias con nombres relacionados con el libro \"Don Quijote de la Mancha\".</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 647px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/374ce/escenario.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.09891808346212%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACmElEQVQ4y4WU+1PaQBDH/af7c3/pjNTpdEr1p3ZsGStaGB21jA8eLbWFKliLBAyRGATEKYYkiJZ3km8vd5EEkfFmbu6197ndvd2dAWmmacI9jtr92hrd8zGR8bszp1ctRPk6XeiGAYN065B1MrcOMn6YHW0CaJBzq0lNCdFylAGTYgP+wwqTxePN/PYC5l2dnjuPmSNg5jqDZX6ZAQ8lBYE0A17LMjiOg6ZpUFUVvW6XPbL/CvgnM7hhspdNx8xcI4eAEGDA9IWK1xEBtdYA0fQp3ni92NrchD/gx4H4CzlVgLz7DMXLBPimiPOWiOJNEWfNMxTUAko3JWyIG1gtrDLgAdFwNcU0vGt3kEgkEI/HkUqlqBpUme8vickyLAMvyhdQNRXtdhudbofey8pZrBRWHGAgXbWd/NB59qcQHw6KXzG4ymFt6R2Ca+uI7IURToYhNkRsi9sISSEH+NkGDnUDuq7Tbhi6ExJHH2DcMR/GohEsLi7C5/OB4zm6x8kcYuUYA55Umwjn/9phY47HoMlMxu+P6EtJdGs5RL4EkcvzqFYqqNVqVFTURMQq98DLJqKn9SeAPugas2IntAWPx4PZ2Vkc/zmme4IiOHF46PLh0DCmaqgrJfRuVUR2Q8hkTlAhGtbrTJGiVnQ0HPPhBND5FF36AbQqCAU/4e38Ahbm55FKp6go3+CxU9p5Gjj6lP05knpNOu/2+lAVBQrp/X7/8bBxA80HBYFlyhwJ0uuJ1LRP6S+PMoX68Giahmytxz3oqZf2tjGRy1bqLWWX7OJw7hSHacDe3nNoVWEEfFhtOIWD96eXAfOkfAWSgi1gjpl8f7l/8B639fJUoHQjIZgNMqAFGAyHjxRZ16e4s8ZVD917OpGx2n9+l0UXZBRQqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/374ce/escenario.png\"\n        srcset=\"/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/acf4b/escenario.png 173w,\n/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/fc834/escenario.png 345w,\n/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/374ce/escenario.png 647w\"\n        sizes=\"(max-width: 647px) 100vw, 647px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Pasos a realizar:</p>\n<ol>\n<li>\n<p>Creación de la red interna:</p>\n<ul>\n<li>Nombre red interna de &#x3C; nombre de usuario></li>\n<li>10.0.1.0/24  </li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/5cc04/escenario2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 5.512744516893894%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAQElEQVQI1x3KWwrAMAhE0e5/rwkStT5h2vgxcAfOI6qQ11BV6G4wM4ho/p2IICJgZnB36O9v773HZuY4PQeyFj5Mx02dXpECTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/36727/escenario2.png\"\n        srcset=\"/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/acf4b/escenario2.png 173w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/fc834/escenario2.png 345w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/36727/escenario2.png 690w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/17fa4/escenario2.png 1035w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/a5044/escenario2.png 1380w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/5cc04/escenario2.png 1687w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"2\">\n<li>\n<p>Creación de las instancias</p>\n<ul>\n<li>\n<p>Dulcinea:</p>\n<ul>\n<li>Debian Buster sobre volumen de 10GB con sabor m1.mini</li>\n<li>Accesible directamente a través de la red externa y con una IP flotante</li>\n<li>Conectada a la red interna, de la que será la puerta de enlace</li>\n</ul>\n</li>\n<li>\n<p>Sancho:</p>\n<ul>\n<li>Ubuntu 20.04 sobre volumen de 10GB con sabor m1.mini</li>\n<li>Conectada a la red interna</li>\n<li>Accesible indirectamente a través de dulcinea</li>\n</ul>\n</li>\n<li>\n<p>Quijote:</p>\n<ul>\n<li>CentOS 7 sobre volumen de 10GB con sabor m1.mini</li>\n<li>Conectada a la red interna</li>\n<li>Accesible indirectamente a través de dulcinea  </li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/7d0a0/escenario3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.759193357058127%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAiklEQVQY002OWw5EIQhD3f9SjT8+wUfCeEi8mY8GqW1pGGNYKcWYtVZHSslExLnWms/eu+WcfQI8/D0OzVrLwhA11WlzTicIjDG6QVSveLiYA2jUue47YId/miCE3SDC9t5fk3OO8ceB/waY4V4AwPe4kEv1JueSfGAAvHWuL4wmcITCsT9w/LX+ASifNsDICNQyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/36727/escenario3.png\"\n        srcset=\"/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/acf4b/escenario3.png 173w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/fc834/escenario3.png 345w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/36727/escenario3.png 690w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/17fa4/escenario3.png 1035w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/a5044/escenario3.png 1380w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/7d0a0/escenario3.png 1686w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>Configuración de NAT en Dulcinea (Es necesario deshabilitar la seguridad en todos los puertos de dulcinea) [https://youtu.be/jqfILWzHrS0].</li>\n</ol>\n<p>Deshabilitar los puertos de Dulcinea</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~/Documentos$ <span class=\"token builtin class-name\">source</span> ~/.virtualenvs/openstackclient/bin/activate\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ <span class=\"token builtin class-name\">source</span> Proyecto<span class=\"token punctuation\">\\</span> de<span class=\"token punctuation\">\\</span> francisco.madu-openrc.sh\nPlease enter your OpenStack Password <span class=\"token keyword\">for</span> project Proyecto de francisco.madu as user francisco.madu: \n<span class=\"token comment\">#remover grupo de seguridad y deshabilitar cortafuegos de ambas redes</span>\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack server remove security group Dulcinea default\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port list\n+--------------------------------------+------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token operator\">|</span> ID                                   <span class=\"token operator\">|</span> Name <span class=\"token operator\">|</span> MAC Address       <span class=\"token operator\">|</span> Fixed IP Addresses                                                       <span class=\"token operator\">|</span> Status <span class=\"token operator\">|</span>\n+--------------------------------------+------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token operator\">|</span> 280e513f-5016-44b5-a66e-fb6960e4f8fa <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:23:87:b2 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.7'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 3148cbad-a46e-41ea-829e-5cfcd1f00f78 <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:01:01:01 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.10'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 4ff047c4-14b4-43f4-8395-7f95b4023a6a <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:24:24:93 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.12'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 53665f0f-e35a-44d9-896a-313861310021 <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:18:49:cd <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.1'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 5f4ef06d-17cf-49e3-b30e-54bcd8a04465 <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:36:da:86 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.2'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 87e6c7e2-ea9a-4d17-8549-b51c78e7fd2a <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:30:7b:05 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.13'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n+--------------------------------------+------+-------------------+--------------------------------------------------------------------------+--------+\n\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port <span class=\"token builtin class-name\">set</span> --disable-port-security 4ff047c4-14b4-43f4-8395-7f95b4023a6a\n\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port <span class=\"token builtin class-name\">set</span> --disable-port-security 87e6c7e2-ea9a-4d17-8549-b51c78e7fd2a\n\n<span class=\"token comment\">#Comprobación de acceso</span>\nfran@debian:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token number\">600</span> .ssh/pardeclaves2asir.pem         \nfran@debian:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> <span class=\"token number\">755</span> ~/.ssh/\nfran@debian:~$ ssh-add ~/.ssh/pardeclaves2asir.pem \nIdentity added: /home/fran/.ssh/pardeclaves2asir.pem <span class=\"token punctuation\">(</span>/home/fran/.ssh/pardeclaves2asir.pem<span class=\"token punctuation\">)</span>\nfran@debian:~$ <span class=\"token function\">ssh</span> -A debian@dulcinea\nThe authenticity of <span class=\"token function\">host</span> <span class=\"token string\">'dulcinea (172.22.201.13)'</span> can<span class=\"token string\">'t be established.\nECDSA key fingerprint is SHA256:kxEjSjlT9uApP+DC3hKpZvg36u2qPgcUSQgFXG4idHA.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '</span>dulcinea' <span class=\"token punctuation\">(</span>ECDSA<span class=\"token punctuation\">)</span> to the list of known hosts.\nLinux dulcinea <span class=\"token number\">4.19</span>.0-11-cloud-amd64 <span class=\"token comment\">#1 SMP Debian 4.19.146-1 (2020-09-17) x86_64</span>\n\nThe programs included with the Debian GNU/Linux system are <span class=\"token function\">free</span> software<span class=\"token punctuation\">;</span>\nthe exact distribution terms <span class=\"token keyword\">for</span> each program are described <span class=\"token keyword\">in</span> the\nindividual files <span class=\"token keyword\">in</span> /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\ndebian@dulcinea:~$ </code></pre></div>\n<p><strong>Configuración de NAT</strong>\n(Dulcinea)Activamos el bit de enrutamiento en «/etc/sysctl.conf»:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Uncomment the next line to enable packet forwarding for IPv4</span>\nnet.ipv4.ip_forward<span class=\"token operator\">=</span><span class=\"token number\">1</span></code></pre></div>\n<p>Añadimos las reglas de iptable de postrouting y las guardamos con <strong>iptables-save</strong>, para ponerlas de nuevo usaremos <strong>iptables-restore</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">sudo</span> iptables -t nat -A POSTROUTING -s <span class=\"token number\">10.0</span>.1.0/24 -o eth0 -j MASQUERADE\n\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> iptables-save\n<span class=\"token comment\"># Generated by xtables-save v1.8.2 on Tue Nov 24 20:36:37 2020</span>\n*nat\n:PREROUTING ACCEPT <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:0<span class=\"token punctuation\">]</span>\n:INPUT ACCEPT <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:0<span class=\"token punctuation\">]</span>\n:POSTROUTING ACCEPT <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:0<span class=\"token punctuation\">]</span>\n:OUTPUT ACCEPT <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:0<span class=\"token punctuation\">]</span>\n-A POSTROUTING -s <span class=\"token number\">10.0</span>.1.0/24 -o eth0-j MASQUERADE\nCOMMIT\n<span class=\"token comment\"># Completed on Tue Nov 24 20:36:37 2020</span></code></pre></div>\n<p>Modificamos el fichero «/etc/network/interfaces»:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#tambien añadimos la ip estatica de dulcinea</span>\n<span class=\"token comment\"># The normal eth0</span>\nallow-hotplug eth0\niface eth0 inet dhcp\n address <span class=\"token number\">10.0</span>.0.11\n netmask <span class=\"token number\">255.255</span>.255.0\n broadcast <span class=\"token number\">10.0</span>.0.255\n\n<span class=\"token comment\"># Additional interfaces, just in case we're using</span>\n<span class=\"token comment\"># multiple networks</span>\nallow-hotplug eth1\niface eth1 inet dhcp\n address <span class=\"token number\">10.0</span>.1.7 \n netmask <span class=\"token number\">255.255</span>.255.0\n broadcast <span class=\"token number\">10.0</span>.1.255\n gateway <span class=\"token number\">10.0</span>.1.1</code></pre></div>\n<p>Ahora si podemos reiniciar nuestro servicio de red y comprobamos su conectividad:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#reinicio de la maquina</span>\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> systemctl restart networking\n<span class=\"token comment\">#hacemos ping a la red 10.0.0.1 y maquinas</span>\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.0.1\nPING <span class=\"token number\">10.0</span>.0.1 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.0.1<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.0.1: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.539</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.0.1: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.759</span> ms\n--- <span class=\"token number\">10.0</span>.0.1 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 3ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.539</span>/0.649/0.759/0.110 ms\n\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.6\nPING <span class=\"token number\">10.0</span>.1.6 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.6<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.6: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.031</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.6: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.071</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.6 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 24ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.031</span>/0.051/0.071/0.020 ms\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.0.9\nPING <span class=\"token number\">10.0</span>.0.9 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.0.9<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.0.9: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.035</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.0.9: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.062</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.0.9 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 15ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.035</span>/0.048/0.062/0.015 ms\n\n\n<span class=\"token comment\">#conexion internet</span>\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">8.8</span>.8.8\nPING <span class=\"token number\">8.8</span>.8.8 <span class=\"token punctuation\">(</span><span class=\"token number\">8.8</span>.8.8<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">112</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">41.9</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">112</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.3</span> ms\n^C\n--- <span class=\"token number\">8.8</span>.8.8 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 2ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">41.870</span>/42.062/42.255/0.281 ms\n\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> www.google.es\nPING www.google.es <span class=\"token punctuation\">(</span><span class=\"token number\">216.58</span>.209.67<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from mad07s22-in-f3.1e100.net <span class=\"token punctuation\">(</span><span class=\"token number\">216.58</span>.209.67<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">113</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.2</span> ms\n<span class=\"token number\">64</span> bytes from mad07s22-in-f3.1e100.net <span class=\"token punctuation\">(</span><span class=\"token number\">216.58</span>.209.67<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">113</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">55.6</span> ms\n<span class=\"token number\">64</span> bytes from mad07s22-in-f3.1e100.net <span class=\"token punctuation\">(</span><span class=\"token number\">216.58</span>.209.67<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">113</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">77.5</span> ms\n^C\n--- www.google.es <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 5ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">42.222</span>/58.412/77.454/14.524 ms\n\n\n<span class=\"token comment\">#hacemos ping a Sancho y Quijote</span>\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.7\nPING <span class=\"token number\">10.0</span>.1.7 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">2.05</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.701</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.7 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 3ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.701</span>/1.375/2.050/0.675 ms\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.10\nPING <span class=\"token number\">10.0</span>.1.10 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">2.07</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.589</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.748</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.10 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 28ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.589</span>/1.134/2.065/0.661 ms</code></pre></div>\n<ol start=\"4\">\n<li>Definición de contraseña en todas las instancias (para poder modificarla desde consola en caso necesario).</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#Dulcinea</span>\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span> debian\nNew password: \nRetype new password: \npasswd: password updated successfully\ndebian@dulcinea:~$ \n\n<span class=\"token comment\">#Sancho</span>\n<span class=\"token comment\">#Modificamos /etc/ssh/sshd_config:</span>\nPermitRootLogin <span class=\"token function\">yes</span>\nPasswordAuthentication <span class=\"token function\">yes</span>\n\nubuntu@sancho:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span> ubuntu\nNew password: \nRetype new password: \npasswd: password updated successfully\n\n<span class=\"token comment\">#Quijote</span>\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span> centos\nChanging password <span class=\"token keyword\">for</span> user root.\nNew password: \nBAD PASSWORD: The password is shorter than <span class=\"token number\">8</span> characters\nRetype new password: \npasswd: all authentication tokens updated successfully.\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$</code></pre></div>\n<ol start=\"5\">\n<li>Modificación de las instancias sancho y quijote para que usen direccionamiento estático y dulcinea como puerta de enlace.</li>\n</ol>\n<p>Modificamos desde horizon la red y ponemos de puerta de enlace Dulcinea:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/87257a4ecc7ffa67f99723e71130d432/7b680/escenario4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.19178082191781%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABZklEQVQoz5WSS07DMBRFvVf2wSrYQBeABMwZ0xEMkDpANCppifNpmm+T+JeLnxtXVSXU1tKRI8W+777rx8qyAI9+URQ7RFEEIQRojeOIW5eUEqxp98jyAnXTom0aGK2PgrdijAF7fE9xN1tg9sahrKm6V2gsSpup7kjqF915UfYZJHief2O+CFGUNYQeIZSBMiP0hJkOa+ueXBD07VFKHYVZL427MCiNVhh0csTe7kTr0Njb89vtFsvlEmEYIggCrFYrrNdrxHHssi/L8tByXlTYxBl4mmPDE7S9sOIGvdQY5GGX1mXXdaiqytHYrEmAHtBnR05dy/ST2wpZloJevKlr1NNFt9uLJHbtYrUV4JwjTVMkSeLsD4OwuRyyIXz1a2Bkm1yeBuzbOMXP5VWCFCyR57kLn/AinvMR+bdlH6hvzXPLQAtFD6jd7LJLg3rukgpTJ/0wQEmBtGzx8PqD+6cvvHwk+AP/i6dYsBfg1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/87257a4ecc7ffa67f99723e71130d432/36727/escenario4.png\"\n        srcset=\"/gatsbyjs/static/87257a4ecc7ffa67f99723e71130d432/acf4b/escenario4.png 173w,\n/gatsbyjs/static/87257a4ecc7ffa67f99723e71130d432/fc834/escenario4.png 345w,\n/gatsbyjs/static/87257a4ecc7ffa67f99723e71130d432/36727/escenario4.png 690w,\n/gatsbyjs/static/87257a4ecc7ffa67f99723e71130d432/7b680/escenario4.png 730w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<strong>Ubuntu</strong>\nEn /etc/netplan/50-cloud-init.yaml: </p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># This file is generated from information provided by the datasource.  Changes</span>\n<span class=\"token comment\"># to it will not persist across an instance reboot.  To disable cloud-init's</span>\n<span class=\"token comment\"># network configuration capabilities, write a file</span>\n<span class=\"token comment\"># /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:</span>\n<span class=\"token comment\"># network: {config: disable}</span>\nnetwork:\n    version: <span class=\"token number\">2</span>\n    ethernets:\n        ens3:\n            dhcp4: <span class=\"token boolean\">false</span>\n            match:\n                macaddress: fa:16:3e:23:87:b2\n            mtu: <span class=\"token number\">8950</span>\n            set-name: ens3\n            addresses: <span class=\"token punctuation\">[</span><span class=\"token number\">10.0</span>.1.7/24<span class=\"token punctuation\">]</span>\n            gateway4: <span class=\"token number\">10.0</span>.1.10\n            nameservers:\n                addresses: <span class=\"token punctuation\">[</span><span class=\"token number\">192.168</span>.202.2, <span class=\"token number\">192.168</span>.200.2, <span class=\"token number\">8.8</span>.8.8<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Comprobamos su conectividad:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ubuntu@sancho:~$ <span class=\"token function\">ping</span> <span class=\"token number\">8.8</span>.8.8\nPING <span class=\"token number\">8.8</span>.8.8 <span class=\"token punctuation\">(</span><span class=\"token number\">8.8</span>.8.8<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">43.1</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.7</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">43.3</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">4</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.7</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">5</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.5</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">6</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">43.0</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">7</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">43.1</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">8</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.7</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">9</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.8</span> ms\n^C\n--- <span class=\"token number\">8.8</span>.8.8 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">9</span> packets transmitted, <span class=\"token number\">9</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 13021ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">42.477</span>/42.873/43.265/0.242 ms</code></pre></div>\n<p><strong>CentoS</strong>\nEn _/etc/sysconfig/network-scripts/ifcfg-eth0:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Created by cloud-init on instance boot automatically, do not edit.</span>\n<span class=\"token comment\">#</span>\n<span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span><span class=\"token string\">\"eth0\"</span>\n<span class=\"token assign-left variable\">BOOTPROTO</span><span class=\"token operator\">=</span><span class=\"token string\">\"static\"</span>\n<span class=\"token assign-left variable\">IPADDR</span><span class=\"token operator\">=</span><span class=\"token string\">\"10.0.1.10\"</span>\n<span class=\"token assign-left variable\">NETMASK</span><span class=\"token operator\">=</span><span class=\"token string\">\"255.255.255.0\"</span>\n<span class=\"token assign-left variable\">NETWORK</span><span class=\"token operator\">=</span><span class=\"token string\">\"10.0.1.0\"</span>\n<span class=\"token assign-left variable\">GATEWAY</span><span class=\"token operator\">=</span><span class=\"token string\">\"10.0.1.8\"</span>\n<span class=\"token assign-left variable\">ONBOOT</span><span class=\"token operator\">=</span><span class=\"token string\">\"yes\"</span>\n<span class=\"token assign-left variable\">TYPE</span><span class=\"token operator\">=</span><span class=\"token string\">\"Ethernet\"</span></code></pre></div>\n<p>Como podemos observar ya tenemos ping hacia afuera tambien:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">ping</span> <span class=\"token number\">8.8</span>.8.8\nPING <span class=\"token number\">8.8</span>.8.8 <span class=\"token punctuation\">(</span><span class=\"token number\">8.8</span>.8.8<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">94.2</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.7</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">111</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">43.0</span> ms\n^C\n--- <span class=\"token number\">8.8</span>.8.8 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 2003ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">42.705</span>/60.023/94.287/24.229 ms</code></pre></div>\n<ol start=\"6\">\n<li>Modificación de la subred de la red interna, deshabilitando el servidor DHCP.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/8f75f/escenario5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.76967930029155%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABuklEQVQoz4WSTUsjQRCG8xOFPQmytw0EgoYN9iQzk5leL/m+ecglmAmK4C/wspc9CEayiyHHRQ9KTEAYxpiJmY+8dvXYMrtu2IKXopvup97q6synnS/Y2skim8ujsLeLvUIBxWIRBZEZY+h0OnCOujg76eP0uI9erwdHqJeS4zjodrtgGkNmO8fwOV/CV6ZDL5dQLousJ2o2m3BdF3ePz7i69fDwFGNTRFGEVquFDLctHHALpmmIChq0N5mmKYGz2QzD3zOcXNzh6saVl4MgxHK5fFcQBPB9H622ANq2DcOsoKwb2GcaaM35N7GXACeTCfy5Rx4SJ3GMWCgMQymC0ZrAdD6jm5YEkiOmlaAbJixL7BkG6vU65vO5BIVRLGBrrNdrCfg7CFitVhOHnHNUKhUBM0S2pEsq0Gg0MJ1OsVgspJv4zZ0CEpykgMkbChjntoQouCpALXieJy8QRAE2AdvtduIwDUo7JiA5pMNpd/8C+sqhAihwGkgt07dR30Ip3X4UJfBo9UfLH0VAOrBarfC/oPnfuy9Jy5uANGma2mAwwHg8xmg0+qDhcIjrXz9x/uMSh2ffUavV8ArLV723ITkNmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/36727/escenario5.png\"\n        srcset=\"/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/acf4b/escenario5.png 173w,\n/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/fc834/escenario5.png 345w,\n/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/36727/escenario5.png 690w,\n/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/17fa4/escenario5.png 1035w,\n/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/8f75f/escenario5.png 1372w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"7\">\n<li>Utilización de ssh-agent para acceder a las instancias.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#activamos ssh-agent</span>\ndebian@dulcinea:~$ <span class=\"token builtin class-name\">eval</span> <span class=\"token variable\"><span class=\"token variable\">`</span>ssh-agent<span class=\"token variable\">`</span></span>\nAgent pid <span class=\"token number\">1290</span>\n<span class=\"token comment\">#verificación de variable de entorno</span>\ndebian@dulcinea:~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token environment constant\">$SSH_AUTH_SOCK</span>\n/tmp/ssh-1qfNizt7G2zn/agent.1289\n<span class=\"token comment\">#con ssh-add añadimos las identidades</span>\ndebian@dulcinea:~/.ssh$ <span class=\"token function\">chmod</span> <span class=\"token number\">400</span> pardeclaves2asir.pem \ndebian@dulcinea:~/.ssh$ ssh-add pardeclaves2asir.pem \nIdentity added: pardeclaves2asir.pem <span class=\"token punctuation\">(</span>pardeclaves2asir.pem<span class=\"token punctuation\">)</span>\ndebian@dulcinea:~/.ssh$ ssh-add -l\n<span class=\"token number\">2048</span> SHA256:JRwFzvnkuNHJV3VxpVpVrJU7d2hFG+H+wzSbB62NdsQ pardeclaves2asir.pem <span class=\"token punctuation\">(</span>RSA<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Para utilizar el reenvio de angentes, modificamos los ficheros /etc/ssh/ssh<em>config y /etc/ssh/sshd</em>config:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#en ssh/ssh_config</span>\nForwardAgent <span class=\"token function\">yes</span>\n\n<span class=\"token comment\">#en ssh/sshd_config</span>\nAllowAgentForwarding <span class=\"token function\">yes</span></code></pre></div>\n<p>Comprobamos para ambas maquinas:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">ssh</span> ubuntu@sancho\nWelcome to Ubuntu <span class=\"token number\">20.04</span>.1 LTS <span class=\"token punctuation\">(</span>GNU/Linux <span class=\"token number\">5.4</span>.0-48-generic x86_64<span class=\"token punctuation\">)</span>\n\n * Documentation:  https://help.ubuntu.com\n * Management:     https://landscape.canonical.com\n * Support:        https://ubuntu.com/advantage\n\n  System information as of Wed Nov <span class=\"token number\">25</span> <span class=\"token number\">19</span>:05:45 UTC <span class=\"token number\">2020</span>\n\n  System load:  <span class=\"token number\">0.08</span>              Processes:             <span class=\"token number\">103</span>\n  Usage of /:   <span class=\"token number\">14.7</span>% of <span class=\"token number\">9</span>.52GB   Users logged in:       <span class=\"token number\">1</span>\n  Memory usage: <span class=\"token number\">39</span>%               IPv4 address <span class=\"token keyword\">for</span> ens3: <span class=\"token number\">10.0</span>.1.7\n  Swap usage:   <span class=\"token number\">0</span>%\n\n * Introducing self-healing high availability clustering <span class=\"token keyword\">for</span> MicroK8s<span class=\"token operator\">!</span>\n   Super simple, hardened and opinionated Kubernetes <span class=\"token keyword\">for</span> production.\n\n     https://microk8s.io/high-availability\n\n<span class=\"token number\">1</span> update can be installed immediately.\n<span class=\"token number\">0</span> of these updates are security updates.\nTo see these additional updates run: <span class=\"token function\">apt</span> list --upgradable\n\n\nThe list of available updates is <span class=\"token function\">more</span> than a week old.\nTo check <span class=\"token keyword\">for</span> new updates run: <span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\nFailed to connect to https://changelogs.ubuntu.com/meta-release-lts. Check your Internet connection or proxy settings\n\n\nLast login: Wed Nov <span class=\"token number\">25</span> <span class=\"token number\">16</span>:58:27 <span class=\"token number\">2020</span> from <span class=\"token number\">10.0</span>.1.8\nubuntu@sancho:~$</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">ssh</span> centos@quijote\nLast login: Wed Nov <span class=\"token number\">25</span> <span class=\"token number\">19</span>:08:57 <span class=\"token number\">2020</span> from gateway\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ </code></pre></div>\n<ol start=\"8\">\n<li>Creación del usuario profesor en todas las instancias. Usuario que puede utilizar sudo sin contraseña.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@dulcinea:~<span class=\"token comment\"># useradd profesor -m -s /bin/bash</span>\nroot@dulcinea:~<span class=\"token comment\"># su - profesor</span></code></pre></div>\n<p>El siguiente paso es añadirlo al grupo de super usuarios en /etc/sudoers:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">root@dulcinea:~<span class=\"token comment\"># echo \"profesor ALL=(ALL) NOPASSWD:ALL\" >> /etc/sudoers</span></code></pre></div>\n<p>Añadimos las claves de los profesores a la carpeta .ssh y le damos permiso a las carpetas.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">profesor@dulcinea:~$ <span class=\"token function\">mkdir</span> .ssh\nprofesor@dulcinea:~$ <span class=\"token function\">nano</span> .ssh/authorized_keys\n\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCfk9mRtOHM3T1KpmGi0KiN2uAM6CDXM3WFcm1wkzKXx7RaLtf9pX+KCuVqHdy/N/9d9wtH7iSmLFX/4gQKQVG00jHiGf3ABufWeIpjmHtT1WaI0+vV47fofEIjDDfSZPlI3p5/c7tefHsIAK6GbQn31yepAcFYy9ZfqAh8H/Y5eLpf3egPZn9Czsvx+lm0I8Q+e/HSayRaiAPUukF57N2nnw7yhPZCHSZJqFbXyK3fVQ/UQVBeNS2ayp0my8X9sIBZnNkcYHFLIWBqJYdnu1ZFhnbu3yy94jmJdmELy3+54hqiwFEfjZAjUYSl8eGPixOfdTgc8ObbHbkHyIrQ91Kz rafa@eco\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCmjoVIoZCx4QFXvljqozXGqxxlSvO7V2aizqyPgMfGqnyl0J9YXo6zrcWYwyWMnMdRdwYZgHqfiiFCUn2QDm6ZuzC4Lcx0K3ZwO2lgL4XaATykVLneHR1ib6RNroFcClN69cxWsdwQW6dpjpiBDXf8m6/qxVP3EHwUTsP8XaOV7WkcCAqfYAMvpWLISqYme6e+6ZGJUIPkDTxavu5JTagDLwY+py1WB53eoDWsG99gmvyit2O1Eo+jRWN+mgRHIxJTrFtLS6o4iWeshPZ6LvCZ/Pum12Oj4B4bjGSHzrKjHZgTwhVJ/LDq3v71/PP4zaI3gVB9ZalemSxqomgbTlnT jose@debian\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC3AUDWjyPANntK+qwHmlJihKQZ1H+AGN02k06dzRHmkvWiNgou/VcCgowhMTGR+0I6nWVwgRSWKJEUEaMu1r9rEeL63GRtUSepCWpClHJG1CuySuJKVGtRdUq+/szDntpJnJW207a78hTeQLjQsyPvbOqkbulQG7xTRCycdT3bH2UO4JI2d+341gkOlxSG/stPQ52Dsbfb274oMRom5r5f2apD3wbfxE9A6qwm4m70G9NYS7T3uKgCiXegO/3GTJD4UbK0ylGUamG5obdS5yD8Ib12vRCCXWav23SAj/4f9MzAnXX8U4ATM/du2FHZBiIzWVH12LYvIEZpUIVYKPSf alberto@roma\n\nprofesor@dulcinea:~$ <span class=\"token function\">chmod</span> <span class=\"token number\">700</span> .ssh/\nprofesor@dulcinea:~$ <span class=\"token function\">chmod</span> <span class=\"token number\">600</span> .ssh/authorized_keys</code></pre></div>\n<p>En Ubuntu:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ubuntu@sancho:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">useradd</span> profesor -m -s /bin/bash\nAdding user <span class=\"token variable\"><span class=\"token variable\">`</span>profesor' <span class=\"token punctuation\">..</span>.\nAdding new group <span class=\"token variable\">`</span></span>profesor<span class=\"token string\">' (1001) ...\nAdding new user <span class=\"token variable\"><span class=\"token variable\">`</span>profesor' <span class=\"token punctuation\">(</span><span class=\"token number\">1001</span><span class=\"token punctuation\">)</span> with group <span class=\"token variable\">`</span></span>profesor'</span> <span class=\"token punctuation\">..</span>.\nCreating home directory <span class=\"token variable\"><span class=\"token variable\">`</span>/home/profesor' <span class=\"token punctuation\">..</span>.\nCopying files from <span class=\"token variable\">`</span></span>/etc/skel' <span class=\"token punctuation\">..</span>.\nNew password: \nRetype new password: \npasswd: password updated successfully\nChanging the user information <span class=\"token keyword\">for</span> profesor\nEnter the new value, or press ENTER <span class=\"token keyword\">for</span> the default\n\tFull Name <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>: profesor\n\tRoom Number <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>: \n\tWork Phone <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>: \n\tHome Phone <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>: \n\tOther <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>: \nIs the information correct? <span class=\"token punctuation\">[</span>Y/n<span class=\"token punctuation\">]</span> \n<span class=\"token comment\">#modificamos en /etc/sudoers</span>\n<span class=\"token comment\"># Members of the admin group may gain root privileges</span>\n%admin <span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span> ALL\n%profesor <span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span> NOPASSWD:ALL</code></pre></div>\n<p>En CentOS:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">ssh</span> centos@quijote\nLast login: Wed Nov <span class=\"token number\">25</span> <span class=\"token number\">19</span>:10:05 <span class=\"token number\">2020</span> from gateway\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> <span class=\"token function\">useradd</span> profesor -m -s /bin/bash\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span> profesor\nChanging password <span class=\"token keyword\">for</span> user profesor.\nNew password: \nBAD PASSWORD: The password contains the user name <span class=\"token keyword\">in</span> some form\nRetype new password: \npasswd: all authentication tokens updated successfully.\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> <span class=\"token function\">usermod</span> -aG wheel profesor\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> visudo\n<span class=\"token comment\">## Allow root to run any commands anywhere</span>\nroot    <span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>       ALL\nprofesor <span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>      NOPASSWD:ALL</code></pre></div>\n<ol start=\"9\">\n<li>Copia de las claves públicas de todos los profesores en las instancias para que puedan acceder con el usuario profesor.</li>\n</ol>\n<p>Pasamos las claves por scp y las añadimos a authorized_keys en .ssh:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">cat</span> .ssh/clave-openstack.pub<span class=\"token variable\">`</span></span> <span class=\"token operator\">>></span> .ssh/authorized_keys \ndebian@dulcinea:~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">cat</span> .ssh/rafa.pub<span class=\"token variable\">`</span></span> <span class=\"token operator\">>></span> .ssh/authorized_keys \ndebian@dulcinea:~$ <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\"><span class=\"token variable\">`</span><span class=\"token function\">cat</span> .ssh/id_rsa.pub<span class=\"token variable\">`</span></span> <span class=\"token operator\">>></span> .ssh/authorized_keys</code></pre></div>\n<ol start=\"10\">\n<li>Realiza una actualización completa de todos los servidores.</li>\n</ol>\n<p>En Dulcinea:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\nHit:1 http://deb.debian.org/debian buster InRelease                                 \nGet:2 http://security.debian.org/debian-security buster/updates InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">65.4</span> kB<span class=\"token punctuation\">]</span> \nGet:3 http://deb.debian.org/debian buster-updates InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">51.9</span> kB<span class=\"token punctuation\">]</span>\nGet:4 http://security.debian.org/debian-security buster/updates/main Sources <span class=\"token punctuation\">[</span><span class=\"token number\">155</span> kB<span class=\"token punctuation\">]</span>\nIgn:4 http://security.debian.org/debian-security buster/updates/main Sources\nGet:5 http://deb.debian.org/debian buster-updates/main Sources.diff/Index <span class=\"token punctuation\">[</span><span class=\"token number\">5,528</span> B<span class=\"token punctuation\">]</span>\nGet:6 http://deb.debian.org/debian buster-updates/main amd64 Packages.diff/Index <span class=\"token punctuation\">[</span><span class=\"token number\">5,528</span> B<span class=\"token punctuation\">]</span>\nGet:7 http://security.debian.org/debian-security buster/updates/main amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">251</span> kB<span class=\"token punctuation\">]</span>\nGet:8 http://deb.debian.org/debian buster-updates/main Sources <span class=\"token number\">2020</span>-10-24-2001.35.pdiff <span class=\"token punctuation\">[</span><span class=\"token number\">414</span> B<span class=\"token punctuation\">]</span>\nGet:8 http://deb.debian.org/debian buster-updates/main Sources <span class=\"token number\">2020</span>-10-24-2001.35.pdiff <span class=\"token punctuation\">[</span><span class=\"token number\">414</span> B<span class=\"token punctuation\">]</span>\nGet:9 http://deb.debian.org/debian buster-updates/main amd64 Packages <span class=\"token number\">2020</span>-10-24-2001.35.pdiff <span class=\"token punctuation\">[</span><span class=\"token number\">286</span> B<span class=\"token punctuation\">]</span>\nGet:9 http://deb.debian.org/debian buster-updates/main amd64 Packages <span class=\"token number\">2020</span>-10-24-2001.35.pdiff <span class=\"token punctuation\">[</span><span class=\"token number\">286</span> B<span class=\"token punctuation\">]</span>\nGet:10 http://security.debian.org/debian-security buster/updates/main Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">137</span> kB<span class=\"token punctuation\">]</span>\nGet:4 http://security.debian.org/debian-security buster/updates/main Sources <span class=\"token punctuation\">[</span><span class=\"token number\">155</span> kB<span class=\"token punctuation\">]</span>\nErr:4 http://security.debian.org/debian-security buster/updates/main Sources\n  Hash Sum mismatch\n  Hashes of expected file:\n   - Filesize:154868 <span class=\"token punctuation\">[</span>weak<span class=\"token punctuation\">]</span>\n   - SHA256:120cecc6342d092232f5f17d8c34c709b88a5d249d5060a428eec8e97f99c81f\n   - MD5Sum:4d5d0f8e586c020100efa3617e4db634 <span class=\"token punctuation\">[</span>weak<span class=\"token punctuation\">]</span>\n  Hashes of received file:\n   - SHA256:c19949c7284aa6aa9bbd74e1155114f53351da2982cb190db7465cc2950c5580\n   - MD5Sum:b666a24d54c79b0d557621c74ef0d07d <span class=\"token punctuation\">[</span>weak<span class=\"token punctuation\">]</span>\n   - Filesize:154868 <span class=\"token punctuation\">[</span>weak<span class=\"token punctuation\">]</span>\n  Last modification reported: Wed, <span class=\"token number\">25</span> Nov <span class=\"token number\">2020</span> 07:55:06 +0000\n  Release <span class=\"token function\">file</span> created at: Wed, <span class=\"token number\">25</span> Nov <span class=\"token number\">2020</span> 07:55:15 +0000\nFetched <span class=\"token number\">670</span> kB <span class=\"token keyword\">in</span> 5s <span class=\"token punctuation\">(</span><span class=\"token number\">132</span> kB/s<span class=\"token punctuation\">)</span>  \nReading package lists<span class=\"token punctuation\">..</span>. Done\nE: Failed to fetch http://security.debian.org/debian-security/dists/buster/updates/main/source/Sources.xz  Hash Sum mismatch\n   Hashes of expected file:\n    - Filesize:154868 <span class=\"token punctuation\">[</span>weak<span class=\"token punctuation\">]</span>\n    - SHA256:120cecc6342d092232f5f17d8c34c709b88a5d249d5060a428eec8e97f99c81f\n    - MD5Sum:4d5d0f8e586c020100efa3617e4db634 <span class=\"token punctuation\">[</span>weak<span class=\"token punctuation\">]</span>\n   Hashes of received file:\n    - SHA256:c19949c7284aa6aa9bbd74e1155114f53351da2982cb190db7465cc2950c5580\n    - MD5Sum:b666a24d54c79b0d557621c74ef0d07d <span class=\"token punctuation\">[</span>weak<span class=\"token punctuation\">]</span>\n    - Filesize:154868 <span class=\"token punctuation\">[</span>weak<span class=\"token punctuation\">]</span>\n   Last modification reported: Wed, <span class=\"token number\">25</span> Nov <span class=\"token number\">2020</span> 07:55:06 +0000\n   Release <span class=\"token function\">file</span> created at: Wed, <span class=\"token number\">25</span> Nov <span class=\"token number\">2020</span> 07:55:15 +0000\nE: Some index files failed to download. They have been ignored, or old ones used instead.</code></pre></div>\n<p>En Sancho:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ubuntu@sancho:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update\nHit:1 http://archive.ubuntu.com/ubuntu focal InRelease\nGet:2 http://archive.ubuntu.com/ubuntu focal-updates InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">114</span> kB<span class=\"token punctuation\">]</span>\nGet:3 http://security.ubuntu.com/ubuntu focal-security InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">109</span> kB<span class=\"token punctuation\">]</span>\nGet:4 http://archive.ubuntu.com/ubuntu focal-backports InRelease <span class=\"token punctuation\">[</span><span class=\"token number\">101</span> kB<span class=\"token punctuation\">]</span>\nGet:5 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">372</span> kB<span class=\"token punctuation\">]</span>\nGet:6 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">8628</span> kB<span class=\"token punctuation\">]</span>\nGet:7 http://security.ubuntu.com/ubuntu focal-security/main Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">85.1</span> kB<span class=\"token punctuation\">]</span>                           \nGet:8 http://security.ubuntu.com/ubuntu focal-security/main amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">5428</span> B<span class=\"token punctuation\">]</span>                            \nGet:9 http://archive.ubuntu.com/ubuntu focal/universe Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">5124</span> kB<span class=\"token punctuation\">]</span>          \nGet:10 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">69.9</span> kB<span class=\"token punctuation\">]</span>\nGet:11 http://security.ubuntu.com/ubuntu focal-security/restricted Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">11.4</span> kB<span class=\"token punctuation\">]</span>                         \nGet:12 http://archive.ubuntu.com/ubuntu focal/universe amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">265</span> kB<span class=\"token punctuation\">]</span>                \nGet:13 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">519</span> kB<span class=\"token punctuation\">]</span>            \nGet:14 http://security.ubuntu.com/ubuntu focal-security/universe Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">68.0</span> kB<span class=\"token punctuation\">]</span>           \nGet:15 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">144</span> kB<span class=\"token punctuation\">]</span>                    \nGet:16 http://security.ubuntu.com/ubuntu focal-security/universe amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">9364</span> B<span class=\"token punctuation\">]</span>      \nGet:17 http://archive.ubuntu.com/ubuntu focal/multiverse Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">104</span> kB<span class=\"token punctuation\">]</span>                    \nGet:18 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">9136</span> B<span class=\"token punctuation\">]</span>              \nGet:19 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">670</span> kB<span class=\"token punctuation\">]</span>                 \nGet:20 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">1256</span> B<span class=\"token punctuation\">]</span>\nGet:21 http://security.ubuntu.com/ubuntu focal-security/multiverse Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">540</span> B<span class=\"token punctuation\">]</span>                            \nGet:22 http://archive.ubuntu.com/ubuntu focal-updates/main Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">167</span> kB<span class=\"token punctuation\">]</span>                        \nGet:23 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">11.1</span> kB<span class=\"token punctuation\">]</span>                 \nGet:24 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">116</span> B<span class=\"token punctuation\">]</span>           \nGet:25 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">95.6</span> kB<span class=\"token punctuation\">]</span>\nGet:26 http://archive.ubuntu.com/ubuntu focal-updates/restricted Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">14.8</span> kB<span class=\"token punctuation\">]</span>\nGet:27 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">697</span> kB<span class=\"token punctuation\">]</span>\nGet:28 http://archive.ubuntu.com/ubuntu focal-updates/universe Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">136</span> kB<span class=\"token punctuation\">]</span>\nGet:29 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">13.3</span> kB<span class=\"token punctuation\">]</span>                                                                                                                     \nGet:30 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">19.9</span> kB<span class=\"token punctuation\">]</span>                                                                                                                         \nGet:31 http://archive.ubuntu.com/ubuntu focal-updates/multiverse Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">4668</span> B<span class=\"token punctuation\">]</span>                                                                                                                          \nGet:32 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">552</span> B<span class=\"token punctuation\">]</span>                                                                                                                     \nGet:33 http://archive.ubuntu.com/ubuntu focal-backports/main amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">112</span> B<span class=\"token punctuation\">]</span>                                                                                                                         \nGet:34 http://archive.ubuntu.com/ubuntu focal-backports/restricted amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">116</span> B<span class=\"token punctuation\">]</span>                                                                                                                   \nGet:35 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages <span class=\"token punctuation\">[</span><span class=\"token number\">5304</span> B<span class=\"token punctuation\">]</span>                                                                                                                          \nGet:36 http://archive.ubuntu.com/ubuntu focal-backports/universe Translation-en <span class=\"token punctuation\">[</span><span class=\"token number\">1448</span> B<span class=\"token punctuation\">]</span>                                                                                                                          \nGet:37 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">224</span> B<span class=\"token punctuation\">]</span>                                                                                                                     \nGet:38 http://archive.ubuntu.com/ubuntu focal-backports/multiverse amd64 c-n-f Metadata <span class=\"token punctuation\">[</span><span class=\"token number\">116</span> B<span class=\"token punctuation\">]</span>                                                                                                                   \nFetched <span class=\"token number\">17.6</span> MB <span class=\"token keyword\">in</span> 8s <span class=\"token punctuation\">(</span><span class=\"token number\">2326</span> kB/s<span class=\"token punctuation\">)</span>                                                                                                                                                                                 \nReading package lists<span class=\"token punctuation\">..</span>. Done</code></pre></div>\n<p>En Quijote:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> yum update\nLoaded plugins: fastestmirror\nDetermining fastest mirrors\nCould not retrieve mirrorlist http://mirrorlist.centos.org/?release<span class=\"token operator\">=</span><span class=\"token number\">7</span><span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">arch</span><span class=\"token operator\">=</span>x86_64<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">repo</span><span class=\"token operator\">=</span>os<span class=\"token operator\">&amp;</span><span class=\"token assign-left variable\">infra</span><span class=\"token operator\">=</span>genclo error was\n<span class=\"token number\">14</span>: <span class=\"token function\">curl</span><span class=\"token comment\">#6 - \"Could not resolve host: mirrorlist.centos.org; Unknown error\"</span>\n\n\n One of the configured repositories failed <span class=\"token punctuation\">(</span>Unknown<span class=\"token punctuation\">)</span>,\n and yum doesn<span class=\"token string\">'t have enough cached data to continue. At this point the only\n safe thing yum can do is fail. There are a few ways to work \"fix\" this:\n\n     1. Contact the upstream for the repository and get them to fix the problem.\n\n     2. Reconfigure the baseurl/etc. for the repository, to point to a working\n        upstream. This is most often useful if you are using a newer\n        distribution release than is supported by the repository (and the\n        packages for the previous distribution release still work).\n\n     3. Run the command with the repository temporarily disabled\n            yum --disablerepo=&lt;repoid> ...\n\n     4. Disable the repository permanently, so yum won'</span>t use it by default. Yum\n        will <span class=\"token keyword\">then</span> just ignore the repository <span class=\"token keyword\">until</span> you permanently <span class=\"token builtin class-name\">enable</span> it\n        again or use --enablerepo <span class=\"token keyword\">for</span> temporary usage:\n\n            yum-config-manager --disable <span class=\"token operator\">&lt;</span>repoid<span class=\"token operator\">></span>\n        or\n            subscription-manager repos --disable<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>repoid<span class=\"token operator\">></span>\n\n     <span class=\"token number\">5</span>. Configure the failing repository to be skipped, <span class=\"token keyword\">if</span> it is unavailable.\n        Note that yum will try to contact the repo. when it runs <span class=\"token function\">most</span> commands,\n        so will have to try and fail each <span class=\"token function\">time</span> <span class=\"token punctuation\">(</span>and thus. yum will be be much\n        slower<span class=\"token punctuation\">)</span>. If it is a very temporary problem though, this is often a <span class=\"token function\">nice</span>\n        compromise:\n\n            yum-config-manager --save --setopt<span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>repoid<span class=\"token operator\">></span>.skip_if_unavailable<span class=\"token operator\">=</span>true\n\nCannot <span class=\"token function\">find</span> a valid baseurl <span class=\"token keyword\">for</span> repo: base/7/x86_64</code></pre></div>\n<p>Tuve que modificar el fichero /etc/resolv.conf:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nameserver <span class=\"token number\">9.9</span>.9.9</code></pre></div>\n<p>Y volví a probar:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> yum update\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: ftp.cixug.es\n * extras: mirror.airenetworks.es\n * updates: ftp.cixug.es\nbase                                                                              <span class=\"token operator\">|</span> <span class=\"token number\">3.6</span> kB  00:00:00     \nextras                                                                            <span class=\"token operator\">|</span> <span class=\"token number\">2.9</span> kB  00:00:00     \nupdates                                                                           <span class=\"token operator\">|</span> <span class=\"token number\">2.9</span> kB  00:00:00     \n<span class=\"token punctuation\">(</span><span class=\"token number\">1</span>/4<span class=\"token punctuation\">)</span>: base/7/x86_64/group_gz                                                     <span class=\"token operator\">|</span> <span class=\"token number\">153</span> kB  00:00:00     \n<span class=\"token punctuation\">(</span><span class=\"token number\">2</span>/4<span class=\"token punctuation\">)</span>: extras/7/x86_64/primary_db                                                 <span class=\"token operator\">|</span> <span class=\"token number\">222</span> kB  00:00:00     \n<span class=\"token punctuation\">(</span><span class=\"token number\">3</span>/4<span class=\"token punctuation\">)</span>: base/7/x86_64/primary_db                                                   <span class=\"token operator\">|</span> <span class=\"token number\">6.1</span> MB  00:00:02     \n<span class=\"token punctuation\">(</span><span class=\"token number\">4</span>/4<span class=\"token punctuation\">)</span>: updates/7/x86_64/primary_db                                                <span class=\"token operator\">|</span> <span class=\"token number\">3.7</span> MB  00:00:02     \nResolving Dependencies\n--<span class=\"token operator\">></span> Running transaction check\n---<span class=\"token operator\">></span> Package bind-export-libs.x86_64 <span class=\"token number\">32</span>:9.11.4-16.P2.el7_8.2 will be updated\n---<span class=\"token operator\">></span> Package bind-export-libs.x86_64 <span class=\"token number\">32</span>:9.11.4-26.P2.el7_9.2 will be an update\n---<span class=\"token operator\">></span> Package binutils.x86_64 <span class=\"token number\">0</span>:2.27-43.base.el7 will be updated\n---<span class=\"token operator\">></span> Package binutils.x86_64 <span class=\"token number\">0</span>:2.27-44.base.el7 will be an update\n---<span class=\"token operator\">></span> Package ca-certificates.noarch <span class=\"token number\">0</span>:2019.2.32-76.el7_7 will be updated\n---<span class=\"token operator\">></span> Package ca-certificates.noarch <span class=\"token number\">0</span>:2020.2.41-70.0.el7_8 will be an update\n---<span class=\"token operator\">></span> Package centos-release.x86_64 <span class=\"token number\">0</span>:7-8.2003.0.el7.centos will be updated\n---<span class=\"token operator\">></span> Package centos-release.x86_64 <span class=\"token number\">0</span>:7-9.2009.0.el7.centos will be an update\n---<span class=\"token operator\">></span> Package chkconfig.x86_64 <span class=\"token number\">0</span>:1.7.4-1.el7 will be updated</code></pre></div>\n<p>(Es una muestra porque se descargo demasiados archivos...)</p>\n<p>Si lo volvemos a ejecutar vemos como ya esta completamente actualizado:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> yum update\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: ftp.rediris.es\n * extras: repo.ifca.es\n * updates: ftp.uma.es\nNo packages marked <span class=\"token keyword\">for</span> update</code></pre></div>\n<ol start=\"11\">\n<li>Configura el servidor con el nombre de dominio <nombre-usuario>.gonzalonazareno.org.</li>\n</ol>\n<p>En /etc/hostname:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">francisco-madu.gonzalonazareno.org</code></pre></div>\n<p>En /etc/hosts:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token number\">127.0</span>.1.1 francisco-madu.gonzalonazareno.org dulcinea\n<span class=\"token number\">127.0</span>.0.1 localhost</code></pre></div>\n<ol start=\"12\">\n<li>Hasta que no esté configurado el servidor DNS, incluye resolución estática en las tres instancias tanto usando nombre completo como hostname.</li>\n</ol>\n<p>En Dulcinea:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#en /etc/hosts</span>\n<span class=\"token number\">10.0</span>.1.10 quijote\n<span class=\"token number\">10.0</span>.1.7 sancho\n\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> sancho\nPING sancho <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from sancho <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">1.38</span> ms\n<span class=\"token number\">64</span> bytes from sancho <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.622</span> ms\n<span class=\"token number\">64</span> bytes from sancho <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.742</span> ms\n^C\n--- sancho <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 27ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.622</span>/0.916/1.384/0.334 ms\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> quijote\nPING quijote <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from quijote <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">1.34</span> ms\n<span class=\"token number\">64</span> bytes from quijote <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.810</span> ms\n^C\n--- quijote <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 3ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.810</span>/1.076/1.343/0.268 ms</code></pre></div>\n<p>En Sancho:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#en /etc/hosts</span>\n<span class=\"token number\">10.0</span>.1.8        dulcinea\n<span class=\"token number\">10.0</span>.1.10        quijote\n\nubuntu@sancho:~$ <span class=\"token function\">ping</span> dulcinea\nPING dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.502</span> ms\n<span class=\"token number\">64</span> bytes from dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.697</span> ms\n<span class=\"token number\">64</span> bytes from dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.699</span> ms\n<span class=\"token number\">64</span> bytes from dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">4</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.611</span> ms\n^C\n--- dulcinea <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">4</span> packets transmitted, <span class=\"token number\">4</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 3048ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.502</span>/0.627/0.699/0.080 ms\nubuntu@sancho:~$ <span class=\"token function\">ping</span> quijote\nPING quijote <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from quijote <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">2.30</span> ms\n<span class=\"token number\">64</span> bytes from quijote <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.855</span> ms\n<span class=\"token number\">64</span> bytes from quijote <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.509</span> ms\n^C\n--- quijote <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 2003ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.509</span>/1.221/2.299/0.775 ms</code></pre></div>\n<p>En Quijote:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#en /etc/hosts</span>\n<span class=\"token number\">10.0</span>.1.8        dulcinea\n<span class=\"token number\">10.0</span>.1.7        sancho\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">ping</span> sancho\nPING sancho <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from sancho <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">1.18</span> ms\n<span class=\"token number\">64</span> bytes from sancho <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.802</span> ms\n^C\n--- sancho <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 1001ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.802</span>/0.991/1.181/0.192 ms\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">ping</span> dulcinea\nPING dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.479</span> ms\n<span class=\"token number\">64</span> bytes from dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.673</span> ms\n<span class=\"token number\">64</span> bytes from dulcinea <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.8<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.738</span> ms\n^C\n--- dulcinea <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 2000ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.479</span>/0.630/0.738/0.110 ms</code></pre></div>\n<ol start=\"13\">\n<li>Asegúrate que el servidor tiene sincronizado su reloj utilizando un servidor NTP externo.</li>\n</ol>\n<p>Para poder utilizar la utilidad de NTP deberemos instalar sus paquetes:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> ntp\nReading package lists<span class=\"token punctuation\">..</span>. Done\nBuilding dependency tree       \nReading state information<span class=\"token punctuation\">..</span>. Done\nntp is already the newest version <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:4.2.8p12+dfsg-4<span class=\"token punctuation\">)</span>.\n<span class=\"token number\">0</span> upgraded, <span class=\"token number\">0</span> newly installed, <span class=\"token number\">0</span> to remove and <span class=\"token number\">1</span> not upgraded.\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> ntp\nSynchronizing state of ntp.service with SysV <span class=\"token function\">service</span> script with /lib/systemd/systemd-sysv-install.\nExecuting: /lib/systemd/systemd-sysv-install <span class=\"token builtin class-name\">enable</span> ntp\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> ntpdate\nReading package lists<span class=\"token punctuation\">..</span>. Done\nBuilding dependency tree       \nReading state information<span class=\"token punctuation\">..</span>. Done\nThe following NEW packages will be installed:\n  ntpdate\n<span class=\"token number\">0</span> upgraded, <span class=\"token number\">1</span> newly installed, <span class=\"token number\">0</span> to remove and <span class=\"token number\">1</span> not upgraded.\nNeed to get <span class=\"token number\">153</span> kB of archives.\nAfter this operation, <span class=\"token number\">242</span> kB of additional disk space will be used.\nGet:1 http://deb.debian.org/debian buster/main amd64 ntpdate amd64 <span class=\"token number\">1</span>:4.2.8p12+dfsg-4 <span class=\"token punctuation\">[</span><span class=\"token number\">153</span> kB<span class=\"token punctuation\">]</span>\nFetched <span class=\"token number\">153</span> kB <span class=\"token keyword\">in</span> 1s <span class=\"token punctuation\">(</span><span class=\"token number\">163</span> kB/s<span class=\"token punctuation\">)</span>\nSelecting previously unselected package ntpdate.\n<span class=\"token punctuation\">(</span>Reading database <span class=\"token punctuation\">..</span>. <span class=\"token number\">27036</span> files and directories currently installed.<span class=\"token punctuation\">)</span>\nPreparing to unpack <span class=\"token punctuation\">..</span>./ntpdate_1%3a4.2.8p12+dfsg-4_amd64.deb <span class=\"token punctuation\">..</span>.\nUnpacking ntpdate <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:4.2.8p12+dfsg-4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.\nSetting up ntpdate <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>:4.2.8p12+dfsg-4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>En /etc/ntp.conf:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">server <span class=\"token number\">0</span>.es.pool.ntp.org\nserver <span class=\"token number\">0</span>.europe.pool.ntp.org\nserver <span class=\"token number\">2</span>.europe.pool.ntp.org</code></pre></div>\n<p>Reiniciamos servicio:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> ntp restart</code></pre></div>\n<p>Ejecutamos:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">sudo</span> ntpdate -u pool.ntp.org\n<span class=\"token number\">25</span> Nov <span class=\"token number\">20</span>:46:17 ntpdate<span class=\"token punctuation\">[</span><span class=\"token number\">2325</span><span class=\"token punctuation\">]</span>: adjust <span class=\"token function\">time</span> server <span class=\"token number\">147.156</span>.7.26 offset -0.008066 sec</code></pre></div>\n<p>Comprobación:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">sudo</span> ntpdate -u pool.ntp.org\n<span class=\"token number\">25</span> Nov <span class=\"token number\">20</span>:46:17 ntpdate<span class=\"token punctuation\">[</span><span class=\"token number\">2325</span><span class=\"token punctuation\">]</span>: adjust <span class=\"token function\">time</span> server <span class=\"token number\">147.156</span>.7.26 offset -0.008066 sec</code></pre></div>","timeToRead":26,"excerpt":"En esta tarea se va a crear el escenario de trabajo que se va a usar durante todo el curso, que va a constar inicialmente de 3 instancias…","frontmatter":{"title":"Instalación y configuración inicial de los servidores","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-11-15T00:00:00.000Z","categories":["HLC"],"tags":["OpenStack","Debian","Ubuntu","CentOS"]},"fields":{"slug":"/instalacion-y-configuracion-inicial-de-los-servidores","date":"November 14, 2020"}}},"pageContext":{"slug":"/instalacion-y-configuracion-inicial-de-los-servidores","nexttitle":"Tarea OVH. Lemp","nextslug":"/tarea-ovh-lemp","prevtitle":"Compilación de un kérnel linux a medida","prevslug":"/compilacion-de-un-kernel-linux-a-medida"}}}