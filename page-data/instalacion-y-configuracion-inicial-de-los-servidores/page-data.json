{"componentChunkName":"component---src-templates-post-js","path":"/instalacion-y-configuracion-inicial-de-los-servidores","result":{"data":{"markdownRemark":{"html":"<p>En esta tarea se va a crear el escenario de trabajo que se va a usar durante todo el curso, que va a constar inicialmente de 3 instancias con nombres relacionados con el libro \"Don Quijote de la Mancha\".</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 647px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/374ce/escenario.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.09891808346212%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACmElEQVQ4y4WU+1PaQBDH/af7c3/pjNTpdEr1p3ZsGStaGB21jA8eLbWFKliLBAyRGATEKYYkiJZ3km8vd5EEkfFmbu6197ndvd2dAWmmacI9jtr92hrd8zGR8bszp1ctRPk6XeiGAYN065B1MrcOMn6YHW0CaJBzq0lNCdFylAGTYgP+wwqTxePN/PYC5l2dnjuPmSNg5jqDZX6ZAQ8lBYE0A17LMjiOg6ZpUFUVvW6XPbL/CvgnM7hhspdNx8xcI4eAEGDA9IWK1xEBtdYA0fQp3ni92NrchD/gx4H4CzlVgLz7DMXLBPimiPOWiOJNEWfNMxTUAko3JWyIG1gtrDLgAdFwNcU0vGt3kEgkEI/HkUqlqBpUme8vickyLAMvyhdQNRXtdhudbofey8pZrBRWHGAgXbWd/NB59qcQHw6KXzG4ymFt6R2Ca+uI7IURToYhNkRsi9sISSEH+NkGDnUDuq7Tbhi6ExJHH2DcMR/GohEsLi7C5/OB4zm6x8kcYuUYA55Umwjn/9phY47HoMlMxu+P6EtJdGs5RL4EkcvzqFYqqNVqVFTURMQq98DLJqKn9SeAPugas2IntAWPx4PZ2Vkc/zmme4IiOHF46PLh0DCmaqgrJfRuVUR2Q8hkTlAhGtbrTJGiVnQ0HPPhBND5FF36AbQqCAU/4e38Ahbm55FKp6go3+CxU9p5Gjj6lP05knpNOu/2+lAVBQrp/X7/8bBxA80HBYFlyhwJ0uuJ1LRP6S+PMoX68Giahmytxz3oqZf2tjGRy1bqLWWX7OJw7hSHacDe3nNoVWEEfFhtOIWD96eXAfOkfAWSgi1gjpl8f7l/8B639fJUoHQjIZgNMqAFGAyHjxRZ16e4s8ZVD917OpGx2n9+l0UXZBRQqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/374ce/escenario.png\"\n        srcset=\"/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/acf4b/escenario.png 173w,\n/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/fc834/escenario.png 345w,\n/gatsbyjs/static/ec5a3c4308b202b243346b41b3aba92a/374ce/escenario.png 647w\"\n        sizes=\"(max-width: 647px) 100vw, 647px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Pasos a realizar:</p>\n<ol>\n<li>\n<p>Creación de la red interna:</p>\n<ul>\n<li>Nombre red interna de &#x3C; nombre de usuario></li>\n<li>10.0.1.0/24  </li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/5cc04/escenario2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 5.512744516893894%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAQElEQVQI1x3KWwrAMAhE0e5/rwkStT5h2vgxcAfOI6qQ11BV6G4wM4ho/p2IICJgZnB36O9v773HZuY4PQeyFj5Mx02dXpECTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/36727/escenario2.png\"\n        srcset=\"/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/acf4b/escenario2.png 173w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/fc834/escenario2.png 345w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/36727/escenario2.png 690w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/17fa4/escenario2.png 1035w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/a5044/escenario2.png 1380w,\n/gatsbyjs/static/69c3c73e9308ba94aeb9fb9828661ae2/5cc04/escenario2.png 1687w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"2\">\n<li>\n<p>Creación de las instancias</p>\n<ul>\n<li>\n<p>Dulcinea:</p>\n<ul>\n<li>Debian Buster sobre volumen de 10GB con sabor m1.mini</li>\n<li>Accesible directamente a través de la red externa y con una IP flotante</li>\n<li>Conectada a la red interna, de la que será la puerta de enlace</li>\n</ul>\n</li>\n<li>\n<p>Sancho:</p>\n<ul>\n<li>Ubuntu 20.04 sobre volumen de 10GB con sabor m1.mini</li>\n<li>Conectada a la red interna</li>\n<li>Accesible indirectamente a través de dulcinea</li>\n</ul>\n</li>\n<li>\n<p>Quijote:</p>\n<ul>\n<li>CentOS 7 sobre volumen de 10GB con sabor m1.mini</li>\n<li>Conectada a la red interna</li>\n<li>Accesible indirectamente a través de dulcinea  </li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/7d0a0/escenario3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.759193357058127%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAiklEQVQY002OWw5EIQhD3f9SjT8+wUfCeEi8mY8GqW1pGGNYKcWYtVZHSslExLnWms/eu+WcfQI8/D0OzVrLwhA11WlzTicIjDG6QVSveLiYA2jUue47YId/miCE3SDC9t5fk3OO8ceB/waY4V4AwPe4kEv1JueSfGAAvHWuL4wmcITCsT9w/LX+ASifNsDICNQyAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/36727/escenario3.png\"\n        srcset=\"/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/acf4b/escenario3.png 173w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/fc834/escenario3.png 345w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/36727/escenario3.png 690w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/17fa4/escenario3.png 1035w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/a5044/escenario3.png 1380w,\n/gatsbyjs/static/e95ed14a04ab96f60126d13925d30d05/7d0a0/escenario3.png 1686w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"3\">\n<li>Configuración de NAT en Dulcinea (Es necesario deshabilitar la seguridad en todos los puertos de dulcinea) [https://youtu.be/jqfILWzHrS0].</li>\n</ol>\n<p>Deshabilitar los puertos de Dulcinea</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#remover grupo de seguridad y deshabilitar cortafuegos de ambas redes</span>\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack server remove security group Dulcinea default\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port list\n+--------------------------------------+------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token operator\">|</span> ID                                   <span class=\"token operator\">|</span> Name <span class=\"token operator\">|</span> MAC Address       <span class=\"token operator\">|</span> Fixed IP Addresses                                                       <span class=\"token operator\">|</span> Status <span class=\"token operator\">|</span>\n+--------------------------------------+------+-------------------+--------------------------------------------------------------------------+--------+\n<span class=\"token operator\">|</span> 280e513f-5016-44b5-a66e-fb6960e4f8fa <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:23:87:b2 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.7'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 3148cbad-a46e-41ea-829e-5cfcd1f00f78 <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:01:01:01 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.10'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 4ff047c4-14b4-43f4-8395-7f95b4023a6a <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:24:24:93 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.12'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 53665f0f-e35a-44d9-896a-313861310021 <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:18:49:cd <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.1'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 5f4ef06d-17cf-49e3-b30e-54bcd8a04465 <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:36:da:86 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.0.2'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'46cd68e1-2e88-4ba6-9970-431f6f53c13f'</span>  <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> 87e6c7e2-ea9a-4d17-8549-b51c78e7fd2a <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> fa:16:3e:30:7b:05 <span class=\"token operator\">|</span> <span class=\"token assign-left variable\">ip_address</span><span class=\"token operator\">=</span><span class=\"token string\">'10.0.1.13'</span>, <span class=\"token assign-left variable\">subnet_id</span><span class=\"token operator\">=</span><span class=\"token string\">'b0fb0d9b-c8da-4790-888c-e190e588d551'</span> <span class=\"token operator\">|</span> ACTIVE <span class=\"token operator\">|</span>\n+--------------------------------------+------+-------------------+--------------------------------------------------------------------------+--------+\n\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port <span class=\"token builtin class-name\">set</span> --disable-port-security 4ff047c4-14b4-43f4-8395-7f95b4023a6a\n\n<span class=\"token punctuation\">(</span>openstackclient<span class=\"token punctuation\">)</span> fran@debian:~/Documentos$ openstack port <span class=\"token builtin class-name\">set</span> --disable-port-security 87e6c7e2-ea9a-4d17-8549-b51c78e7fd2a\n\n<span class=\"token comment\">#Comprobación de acceso</span>\nfran@debian:~/Pardeclaves$ <span class=\"token function\">sudo</span> <span class=\"token function\">ssh</span> -i pardeclaves2asir.pem debian@172.22.201.13\nThe authenticity of <span class=\"token function\">host</span> <span class=\"token string\">'172.22.201.13 (172.22.201.13)'</span> can<span class=\"token string\">'t be established.\nECDSA key fingerprint is SHA256:24bafQ0pMtYZxUMY0iq2SkQ4vLigux3MHHcqMEQdYKw.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '</span><span class=\"token number\">172.22</span>.201.13' <span class=\"token punctuation\">(</span>ECDSA<span class=\"token punctuation\">)</span> to the list of known hosts.\nLinux dulcinea <span class=\"token number\">4.19</span>.0-11-cloud-amd64 <span class=\"token comment\">#1 SMP Debian 4.19.146-1 (2020-09-17) x86_64</span>\n\nThe programs included with the Debian GNU/Linux system are <span class=\"token function\">free</span> software<span class=\"token punctuation\">;</span>\nthe exact distribution terms <span class=\"token keyword\">for</span> each program are described <span class=\"token keyword\">in</span> the\nindividual files <span class=\"token keyword\">in</span> /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Wed Nov <span class=\"token number\">25</span> 07:58:06 <span class=\"token number\">2020</span> from <span class=\"token number\">172.23</span>.0.94\ndebian@dulcinea:~$ </code></pre></div>\n<p><strong>Configuración de NAT</strong>\n(Dulcinea)Activamos el bit de enrutamiento en «/etc/sysctl.conf»:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Uncomment the next line to enable packet forwarding for IPv4</span>\nnet.ipv4.ip_forward<span class=\"token operator\">=</span><span class=\"token number\">1</span></code></pre></div>\n<p>Añadimos las reglas de iptable de postrouting y las guardamos con <strong>iptables-save</strong>, para ponerlas de nuevo usaremos <strong>iptables-restore</strong>.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">debian@dulcinea:~$ <span class=\"token function\">sudo</span> iptables -t nat -A POSTROUTING -s <span class=\"token number\">10.0</span>.1.0/24 -o eth1 -j MASQUERADE\n\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> iptables-save\n<span class=\"token comment\"># Generated by xtables-save v1.8.2 on Tue Nov 24 20:36:37 2020</span>\n*nat\n:PREROUTING ACCEPT <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:0<span class=\"token punctuation\">]</span>\n:INPUT ACCEPT <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:0<span class=\"token punctuation\">]</span>\n:POSTROUTING ACCEPT <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:0<span class=\"token punctuation\">]</span>\n:OUTPUT ACCEPT <span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:0<span class=\"token punctuation\">]</span>\n-A POSTROUTING -s <span class=\"token number\">10.0</span>.1.0/24 -o eth1 -j MASQUERADE\nCOMMIT\n<span class=\"token comment\"># Completed on Tue Nov 24 20:36:37 2020</span></code></pre></div>\n<p>Modificamos el fichero «/etc/network/interfaces»:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#tambien añadimos la ip estatica de dulcinea</span>\n<span class=\"token comment\"># The normal eth0</span>\nallow-hotplug eth0\niface eth0 inet dhcp\n address <span class=\"token number\">10.0</span>.0.8\n netmask <span class=\"token number\">255.255</span>.255.0\n broadcast <span class=\"token number\">10.0</span>.0.255\n\n<span class=\"token comment\"># Additional interfaces, just in case we're using</span>\n<span class=\"token comment\"># multiple networks</span>\nallow-hotplug eth1\niface eth1 inet dhcp\n address <span class=\"token number\">10.0</span>.1.8\n netmask <span class=\"token number\">255.255</span>.255.0\n broadcast <span class=\"token number\">10.0</span>.1.255\n gateway <span class=\"token number\">10.0</span>.1.1</code></pre></div>\n<p>Ahora si podemos reiniciar nuestro servicio de red y comprobamos su conectividad:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#reinicio de la maquina</span>\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> systemctl restart networking\n<span class=\"token comment\">#hacemos ping a la red 10.0.0.1 y maquinas</span>\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.0.1\nPING <span class=\"token number\">10.0</span>.0.1 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.0.1<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.0.1: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.539</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.0.1: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.759</span> ms\n--- <span class=\"token number\">10.0</span>.0.1 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 3ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.539</span>/0.649/0.759/0.110 ms\n\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.6\nPING <span class=\"token number\">10.0</span>.1.6 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.6<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.6: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.031</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.6: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.071</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.6 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 24ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.031</span>/0.051/0.071/0.020 ms\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.0.9\nPING <span class=\"token number\">10.0</span>.0.9 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.0.9<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.0.9: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.035</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.0.9: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.062</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.0.9 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 15ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.035</span>/0.048/0.062/0.015 ms\n\n\n<span class=\"token comment\">#conexion internet</span>\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">8.8</span>.8.8\nPING <span class=\"token number\">8.8</span>.8.8 <span class=\"token punctuation\">(</span><span class=\"token number\">8.8</span>.8.8<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">112</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">41.9</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">8.8</span>.8.8: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">112</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.3</span> ms\n^C\n--- <span class=\"token number\">8.8</span>.8.8 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 2ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">41.870</span>/42.062/42.255/0.281 ms\n\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> www.google.es\nPING www.google.es <span class=\"token punctuation\">(</span><span class=\"token number\">216.58</span>.209.67<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from mad07s22-in-f3.1e100.net <span class=\"token punctuation\">(</span><span class=\"token number\">216.58</span>.209.67<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">113</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">42.2</span> ms\n<span class=\"token number\">64</span> bytes from mad07s22-in-f3.1e100.net <span class=\"token punctuation\">(</span><span class=\"token number\">216.58</span>.209.67<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">113</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">55.6</span> ms\n<span class=\"token number\">64</span> bytes from mad07s22-in-f3.1e100.net <span class=\"token punctuation\">(</span><span class=\"token number\">216.58</span>.209.67<span class=\"token punctuation\">)</span>: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">113</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">77.5</span> ms\n^C\n--- www.google.es <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 5ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">42.222</span>/58.412/77.454/14.524 ms\n\n\n<span class=\"token comment\">#hacemos ping a Sancho y Quijote</span>\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.7\nPING <span class=\"token number\">10.0</span>.1.7 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.7<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">2.05</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.7: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.701</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.7 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">2</span> packets transmitted, <span class=\"token number\">2</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 3ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.701</span>/1.375/2.050/0.675 ms\ndebian@dulcinea:~$ <span class=\"token function\">ping</span> <span class=\"token number\">10.0</span>.1.10\nPING <span class=\"token number\">10.0</span>.1.10 <span class=\"token punctuation\">(</span><span class=\"token number\">10.0</span>.1.10<span class=\"token punctuation\">)</span> <span class=\"token number\">56</span><span class=\"token punctuation\">(</span><span class=\"token number\">84</span><span class=\"token punctuation\">)</span> bytes of data.\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">2.07</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">2</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.589</span> ms\n<span class=\"token number\">64</span> bytes from <span class=\"token number\">10.0</span>.1.10: <span class=\"token assign-left variable\">icmp_seq</span><span class=\"token operator\">=</span><span class=\"token number\">3</span> <span class=\"token assign-left variable\">ttl</span><span class=\"token operator\">=</span><span class=\"token number\">64</span> <span class=\"token assign-left variable\">time</span><span class=\"token operator\">=</span><span class=\"token number\">0.748</span> ms\n^C\n--- <span class=\"token number\">10.0</span>.1.10 <span class=\"token function\">ping</span> statistics ---\n<span class=\"token number\">3</span> packets transmitted, <span class=\"token number\">3</span> received, <span class=\"token number\">0</span>% packet loss, <span class=\"token function\">time</span> 28ms\nrtt min/avg/max/mdev <span class=\"token operator\">=</span> <span class=\"token number\">0.589</span>/1.134/2.065/0.661 ms</code></pre></div>\n<ol start=\"4\">\n<li>Definición de contraseña en todas las instancias (para poder modificarla desde consola en caso necesario).</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#Dulcinea</span>\ndebian@dulcinea:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span>\nNew password: \nRetype new password: \npasswd: password updated successfully\ndebian@dulcinea:~$ \n\n<span class=\"token comment\">#Sancho</span>\n<span class=\"token comment\">#Modificamos /etc/ssh/sshd_config:</span>\nPermitRootLogin <span class=\"token function\">yes</span>\nPasswordAuthentication <span class=\"token function\">yes</span>\n\nubuntu@sancho:~$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span>\nNew password: \nRetype new password: \npasswd: password updated successfully\n\n<span class=\"token comment\">#Quijote</span>\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">sudo</span> <span class=\"token function\">passwd</span>\nChanging password <span class=\"token keyword\">for</span> user root.\nNew password: \nBAD PASSWORD: The password is shorter than <span class=\"token number\">8</span> characters\nRetype new password: \npasswd: all authentication tokens updated successfully.\n<span class=\"token punctuation\">[</span>centos@quijote ~<span class=\"token punctuation\">]</span>$</code></pre></div>\n<ol start=\"5\">\n<li>Modificación de las instancias sancho y quijote para que usen direccionamiento estático y dulcinea como puerta de enlace.</li>\n</ol>\n<p>En /etc/netplan/50-cloud-init.yaml: </p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># This file is generated from information provided by the datasource.  Changes</span>\n<span class=\"token comment\"># to it will not persist across an instance reboot.  To disable cloud-init's</span>\n<span class=\"token comment\"># network configuration capabilities, write a file</span>\n<span class=\"token comment\"># /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:</span>\n<span class=\"token comment\"># network: {config: disable}</span>\n\nnetwork:\n  version: <span class=\"token number\">2</span>\n  renderer: networkd\n  ethernets:\n    ens3:\n      dhcp4: no\n      addresses:\n        - <span class=\"token number\">10.0</span>.1.7/24\n      gateway4: <span class=\"token number\">10.0</span>.1.8\n      nameservers:\n          addresses: <span class=\"token punctuation\">[</span><span class=\"token number\">192.168</span>.202.2, <span class=\"token number\">8.8</span>.8.8, <span class=\"token number\">8.8</span>.4.4<span class=\"token punctuation\">]</span></code></pre></div>\n<ol start=\"6\">\n<li>Modificación de la subred de la red interna, deshabilitando el servidor DHCP.</li>\n</ol>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/8f75f/escenario5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.76967930029155%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABuklEQVQoz4WSTUsjQRCG8xOFPQmytw0EgoYN9iQzk5leL/m+ecglmAmK4C/wspc9CEayiyHHRQ9KTEAYxpiJmY+8dvXYMrtu2IKXopvup97q6synnS/Y2skim8ujsLeLvUIBxWIRBZEZY+h0OnCOujg76eP0uI9erwdHqJeS4zjodrtgGkNmO8fwOV/CV6ZDL5dQLousJ2o2m3BdF3ePz7i69fDwFGNTRFGEVquFDLctHHALpmmIChq0N5mmKYGz2QzD3zOcXNzh6saVl4MgxHK5fFcQBPB9H622ANq2DcOsoKwb2GcaaM35N7GXACeTCfy5Rx4SJ3GMWCgMQymC0ZrAdD6jm5YEkiOmlaAbJixL7BkG6vU65vO5BIVRLGBrrNdrCfg7CFitVhOHnHNUKhUBM0S2pEsq0Gg0MJ1OsVgspJv4zZ0CEpykgMkbChjntoQouCpALXieJy8QRAE2AdvtduIwDUo7JiA5pMNpd/8C+sqhAihwGkgt07dR30Ip3X4UJfBo9UfLH0VAOrBarfC/oPnfuy9Jy5uANGma2mAwwHg8xmg0+qDhcIjrXz9x/uMSh2ffUavV8ArLV723ITkNmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"Imagen de la practica\"\n        src=\"/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/36727/escenario5.png\"\n        srcset=\"/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/acf4b/escenario5.png 173w,\n/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/fc834/escenario5.png 345w,\n/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/36727/escenario5.png 690w,\n/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/17fa4/escenario5.png 1035w,\n/gatsbyjs/static/301567c5817083c0a3034507ca3c77f2/8f75f/escenario5.png 1372w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol start=\"7\">\n<li>Utilización de ssh-agent para acceder a las instancias.</li>\n<li>Creación del usuario profesor en todas las instancias. Usuario que puede utilizar sudo sin contraseña.</li>\n<li>Copia de las claves públicas de todos los profesores en las instancias para que puedan acceder con el usuario profesor.</li>\n<li>Realiza una actualización completa de todos los servidores.</li>\n<li>Configura el servidor con el nombre de dominio <nombre-usuario>.gonzalonazareno.org.</li>\n<li>Hasta que no esté configurado el servidor DNS, incluye resolución estática en las tres instancias tanto usando nombre completo como hostname.</li>\n<li>Asegúrate que el servidor tiene sincronizado su reloj utilizando un servidor NTP externo</li>\n</ol>","timeToRead":9,"excerpt":"En esta tarea se va a crear el escenario de trabajo que se va a usar durante todo el curso, que va a constar inicialmente de 3 instancias…","frontmatter":{"title":"Instalación y configuración inicial de los servidores","cover":"https://img.icons8.com/ios/452/work.png","date":"2020-11-15T00:00:00.000Z","categories":["HLC"],"tags":["OpenStack","Debian","Ubuntu","CentOS"]},"fields":{"slug":"/instalacion-y-configuracion-inicial-de-los-servidores","date":"November 14, 2020"}}},"pageContext":{"slug":"/instalacion-y-configuracion-inicial-de-los-servidores","nexttitle":"Compilación de un kérnel linux a medida","nextslug":"/compilacion-de-un-kernel-linux-a-medida","prevtitle":"Tarea OVH. Aplicaciones PHP","prevslug":"/tarea-ovh-aplicaciones-php"}}}