{"componentChunkName":"component---src-templates-post-js","path":"/iaw-introduccion-a-la-ic-dc","result":{"data":{"markdownRemark":{"html":"<h2 id=\"tarea-integración-continúa-de-aplicación-django-test--deploy\"><a href=\"#tarea-integraci%C3%B3n-contin%C3%BAa-de-aplicaci%C3%B3n-django-test--deploy\" aria-label=\"tarea integración continúa de aplicación django test  deploy permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tarea: Integración continúa de aplicación django (Test + Deploy).</h2>\n<p><strong>Vamos a trabajar con el repositorio de la aplicación <a href=\"https://github.com/josedom24/django_tutorial\">django_tutorial</a>. Esta aplicación tiene definidas una serie de test, que podemos estudiar en el fichero tests.py del directorio polls.</strong></p>\n<p><strong>Para ejecutar las pruebas unitarias, ejecutamos la instrucción python3 manage.py test.</strong></p>\n<h3 id=\"estudia-las-distintas-pruebas-que-se-han-realizado-y-modifica-el-código-de-la-aplicación-debes-modificar-el-fichero-viewspy-o-los-templates-no-debes-cambiar-el-fichero-testspy-para-que-al-menos-una-de-ella-no-se-ejecute-de-manera-exitosa\"><a href=\"#estudia-las-distintas-pruebas-que-se-han-realizado-y-modifica-el-c%C3%B3digo-de-la-aplicaci%C3%B3n-debes-modificar-el-fichero-viewspy-o-los-templates-no-debes-cambiar-el-fichero-testspy-para-que-al-menos-una-de-ella-no-se-ejecute-de-manera-exitosa\" aria-label=\"estudia las distintas pruebas que se han realizado y modifica el código de la aplicación debes modificar el fichero viewspy o los templates no debes cambiar el fichero testspy para que al menos una de ella no se ejecute de manera exitosa permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Estudia las distintas pruebas que se han realizado, y modifica el código de la aplicación (debes modificar el fichero views.py o los templates, no debes cambiar el fichero tests.py para que al menos una de ella no se ejecute de manera exitosa.</h3>\n<p><strong>A continuación vamos a configurar la integración continúa para que cada vez que hagamos un commit se haga la ejecución de test en la herramienta de CI/CD que haya elegido.</strong></p>\n<h3 id=\"crea-el-pipeline-en-el-sistema-de-cicd-para-que-pase-automáticamente-los-tests-muestra-el-fichero-de-configuración-y-una-captura-de-pantalla-con-un-resultado-exitoso-de-la-ic-y-otro-con-un-error\"><a href=\"#crea-el-pipeline-en-el-sistema-de-cicd-para-que-pase-autom%C3%A1ticamente-los-tests-muestra-el-fichero-de-configuraci%C3%B3n-y-una-captura-de-pantalla-con-un-resultado-exitoso-de-la-ic-y-otro-con-un-error\" aria-label=\"crea el pipeline en el sistema de cicd para que pase automáticamente los tests muestra el fichero de configuración y una captura de pantalla con un resultado exitoso de la ic y otro con un error permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Crea el pipeline en el sistema de CI/CD para que pase automáticamente los tests. Muestra el fichero de configuración y una captura de pantalla con un resultado exitoso de la IC y otro con un error.</h3>\n<p><strong>A continuación vamos a realziar el despliegue coontinuo en un servicio de hosting, por ejemplo heroku.</strong></p>\n<h3 id=\"entrega-un-breve-descripción-de-los-pasos-más-importantes-para-realizar-el-despliegue-desde-el-sistema-de-cics-y-entrega-una-prueba-de-funcionamiento-donde-se-compruebe-cómo-se-hace-el-despliegue-automático\"><a href=\"#entrega-un-breve-descripci%C3%B3n-de-los-pasos-m%C3%A1s-importantes-para-realizar-el-despliegue-desde-el-sistema-de-cics-y-entrega-una-prueba-de-funcionamiento-donde-se-compruebe-c%C3%B3mo-se-hace-el-despliegue-autom%C3%A1tico\" aria-label=\"entrega un breve descripción de los pasos más importantes para realizar el despliegue desde el sistema de cics y entrega una prueba de funcionamiento donde se compruebe cómo se hace el despliegue automático permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Entrega un breve descripción de los pasos más importantes para realizar el despliegue desde el sistema de CI/CS y entrega una prueba de funcionamiento donde se compruebe cómo se hace el despliegue automático.</h3>\n<hr>\n<p>Para esta práctica utilizaremos el fork de django_tutorial utilizado anteriormente.</p>\n<p>Crearemos un entorno virtual.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">fran@debian:~$ <span class=\"token builtin class-name\">cd</span> .virtualenvs/\nfran@debian:~/.virtualenvs$ python3 -m venv django\nfran@debian:~/.virtualenvs$ <span class=\"token builtin class-name\">source</span> django/bin/activate\n<span class=\"token punctuation\">(</span>django<span class=\"token punctuation\">)</span> fran@debian:~/.virtualenvs$ </code></pre></div>\n<p>Instalamos los requerimientos.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">(</span>django<span class=\"token punctuation\">)</span> fran@debian:~/GitHub/django_tutorial$ pip <span class=\"token function\">install</span> -r requirements.txt \nCollecting <span class=\"token assign-left variable\">asgiref</span><span class=\"token operator\">==</span><span class=\"token number\">3.3</span>.0 <span class=\"token punctuation\">(</span>from -r requirements.txt <span class=\"token punctuation\">(</span>line <span class=\"token number\">1</span><span class=\"token punctuation\">))</span>\n  Using cached https://files.pythonhosted.org/packages/c0/e8/578887011652048c2d273bf98839a11020891917f3aa638a0bc9ac04d653/asgiref-3.3.0-py3-none-any.whl\nCollecting <span class=\"token assign-left variable\">Django</span><span class=\"token operator\">==</span><span class=\"token number\">3.1</span>.3 <span class=\"token punctuation\">(</span>from -r requirements.txt <span class=\"token punctuation\">(</span>line <span class=\"token number\">2</span><span class=\"token punctuation\">))</span>\n  Using cached https://files.pythonhosted.org/packages/7f/17/16267e782a30ea2ce08a9a452c1db285afb0ff226cfe3753f484d3d65662/Django-3.1.3-py3-none-any.whl\nCollecting <span class=\"token assign-left variable\">pytz</span><span class=\"token operator\">==</span><span class=\"token number\">2020.4</span> <span class=\"token punctuation\">(</span>from -r requirements.txt <span class=\"token punctuation\">(</span>line <span class=\"token number\">3</span><span class=\"token punctuation\">))</span>\n  Using cached https://files.pythonhosted.org/packages/12/f8/ff09af6ff61a3efaad5f61ba5facdf17e7722c4393f7d8a66674d2dbd29f/pytz-2020.4-py2.py3-none-any.whl\nCollecting <span class=\"token assign-left variable\">sqlparse</span><span class=\"token operator\">==</span><span class=\"token number\">0.4</span>.1 <span class=\"token punctuation\">(</span>from -r requirements.txt <span class=\"token punctuation\">(</span>line <span class=\"token number\">4</span><span class=\"token punctuation\">))</span>\n  Using cached https://files.pythonhosted.org/packages/14/05/6e8eb62ca685b10e34051a80d7ea94b7137369d8c0be5c3b9d9b6e3f5dae/sqlparse-0.4.1-py3-none-any.whl\nInstalling collected packages: asgiref, pytz, sqlparse, Django\nSuccessfully installed Django-3.1.3 asgiref-3.3.0 pytz-2020.4 sqlparse-0.4.1</code></pre></div>\n<p>Realizaremos una comprobación de los test.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">(</span>django<span class=\"token punctuation\">)</span> fran@debian:~/GitHub/django_tutorial$ python3 manage.py <span class=\"token builtin class-name\">test</span>\nCreating <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.\nSystem check identified no issues <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> silenced<span class=\"token punctuation\">)</span>.\n<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>\n----------------------------------------------------------------------\nRan <span class=\"token number\">10</span> tests <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.029s\n\nOK\nDestroying <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>Modificaremos la aplicación para producir un error.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">(</span>django<span class=\"token punctuation\">)</span> fran@debian:~/GitHub/django_tutorial/polls/templates/polls$ <span class=\"token function\">nano</span> index.html \n<span class=\"token punctuation\">{</span>% load static %<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">&lt;</span>link <span class=\"token assign-left variable\">rel</span><span class=\"token operator\">=</span><span class=\"token string\">\"stylesheet\"</span> <span class=\"token assign-left variable\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"text/css\"</span> <span class=\"token assign-left variable\">href</span><span class=\"token operator\">=</span><span class=\"token string\">\"{% static 'polls/style.css' %}\"</span><span class=\"token operator\">></span>\n\n<span class=\"token punctuation\">{</span>% <span class=\"token keyword\">if</span> latest_question_list %<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span>% <span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">question</span> <span class=\"token keyword\">in</span> latest_question_list %<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>li<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>a <span class=\"token assign-left variable\">href</span><span class=\"token operator\">=</span><span class=\"token string\">\"{% url 'polls:detail' question.id %}\"</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> question.question_text <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span>/a<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>/li<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span>% endfor %<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>/ul<span class=\"token operator\">></span>\n<span class=\"token punctuation\">{</span>% <span class=\"token keyword\">else</span> %<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Generando un error<span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n<span class=\"token punctuation\">{</span>% endif %<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Como podemos comprobar al realizar un nuevo test.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token punctuation\">(</span>django<span class=\"token punctuation\">)</span> fran@debian:~/GitHub/django_tutorial$ python3 manage.py <span class=\"token builtin class-name\">test</span>\nCreating <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.\nSystem check identified no issues <span class=\"token punctuation\">(</span><span class=\"token number\">0</span> silenced<span class=\"token punctuation\">)</span>.\n<span class=\"token punctuation\">..</span>F.F<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>.\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_future_question <span class=\"token punctuation\">(</span>polls.tests.QuestionIndexViewTests<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"/home/fran/GitHub/django_tutorial/polls/tests.py\"</span>, line <span class=\"token number\">73</span>, <span class=\"token keyword\">in</span> test_future_question\n    self.assertContains<span class=\"token punctuation\">(</span>response, <span class=\"token string\">\"No polls are available.\"</span><span class=\"token punctuation\">)</span>\n  File <span class=\"token string\">\"/home/fran/.virtualenvs/django/lib/python3.7/site-packages/django/test/testcases.py\"</span>, line <span class=\"token number\">470</span>, <span class=\"token keyword\">in</span> assertContains\n    self.assertTrue<span class=\"token punctuation\">(</span>real_count <span class=\"token operator\">!=</span> <span class=\"token number\">0</span>, msg_prefix + <span class=\"token string\">\"Couldn't find %s in response\"</span> % text_repr<span class=\"token punctuation\">)</span>\nAssertionError: False is not <span class=\"token boolean\">true</span> <span class=\"token builtin class-name\">:</span> Couldn<span class=\"token string\">'t find '</span>No polls are available.<span class=\"token string\">' in response\n\n======================================================================\nFAIL: test_no_questions (polls.tests.QuestionIndexViewTests)\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/home/fran/GitHub/django_tutorial/polls/tests.py\", line 51, in test_no_questions\n    self.assertContains(response, \"No polls are available.\")\n  File \"/home/fran/.virtualenvs/django/lib/python3.7/site-packages/django/test/testcases.py\", line 470, in assertContains\n    self.assertTrue(real_count != 0, msg_prefix + \"Couldn'</span>t <span class=\"token function\">find</span> %s <span class=\"token keyword\">in</span> response\" % text_repr<span class=\"token punctuation\">)</span>\nAssertionError: False is not <span class=\"token boolean\">true</span> <span class=\"token builtin class-name\">:</span> Couldn<span class=\"token string\">'t find '</span>No polls are available.<span class=\"token string\">' in response\n\n----------------------------------------------------------------------\nRan 10 tests in 0.029s\n\nFAILED (failures=2)\nDestroying test database for alias '</span>default'<span class=\"token punctuation\">..</span>.</code></pre></div>\n<p>Nos produce un error, la respuesta debería ser \"No polls are available.\" pero se la hemos modificado.</p>\n<p>Ahora daremos paso a un sistema IC/DC que en mi caso usare <strong>GitHub Actions</strong>.</p>\n<p>Para poder acceder a <strong>GitHub Actions</strong> deberemos entrar en nuestro repositorio -> Acceder a la pestaña Actions -> Le daremos a la primera opción \"set up a workflow yourself\" para seleccionar el flujo de trabajo.</p>\n<p>Editaremos el fichero generado <strong>main.yml</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># This is a basic workflow to help you get started with Actions</span>\n\nname: CI\n\n<span class=\"token comment\"># Controls when the action will run. </span>\non:\n  <span class=\"token comment\"># Triggers the workflow on push or pull request events but only for the master branch</span>\n  push:\n    branches: <span class=\"token punctuation\">[</span> master <span class=\"token punctuation\">]</span>\n  pull_request:\n    branches: <span class=\"token punctuation\">[</span> master <span class=\"token punctuation\">]</span>\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        python-version: <span class=\"token punctuation\">[</span><span class=\"token number\">3.9</span><span class=\"token punctuation\">]</span>\n\n    steps:\n    - uses: actions/checkout@v2\n    - name: Set up Python <span class=\"token variable\">${{ matrix.python-version }</span><span class=\"token punctuation\">}</span>\n      uses: actions/setup-python@v2\n      with:\n        python-version: <span class=\"token variable\">${{ matrix.python-version }</span><span class=\"token punctuation\">}</span>\n    - name: Instalar requerimientos\n      run: <span class=\"token operator\">|</span>\n        pip <span class=\"token function\">install</span> --upgrade pip\n        pip <span class=\"token function\">install</span> -r requirements.txt\n      \n    - name: Probar python3\n      run: python3 manage.py <span class=\"token builtin class-name\">test</span></code></pre></div>\n<p>Le daremos a <strong>Start Commit</strong> para añadir el archivo al directorio, Ahora comprobaremos algunos test.</p>\n<ul>\n<li>Test Bueno\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/934278570c75424ad943c48c83ef1f2d/a987b/franmadu6-django_tutorial.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.65625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABG0lEQVQoz42S226DMBBEeWu4GRtjG2NuTZUQ9an//3PT9UKlIIWGhyNfGM/OYid+ekD7K5QdEKY7uvGGfl5gw7pXuxGaqJ/4WzftBEe6qI3nPJHUYUEzPND4GUI5lKolHETdomo6HgtpXxK/aUdFbU/Fe0jSJ364wrRUlRaV9iTyLCzZ3O3mr8grw5qYNBonNnyyuyCzuGG7GYrakabn6sqErdCxMXezaZK4UVCViHY9SmlwKSSyskYuNI9ZqbbxmJQ0UZ/Ef8HRRYP+a8Ht+wdhvkNT2o9M4JJXJxFIC7Um5JRkLI2H8RPd3kgtOBamlPYdUZdXmlp2a8LnlCm3oHleUPtnKZXlV7JL+N9tvqOQq8cu4dF7O0v0+AXvU/Jou/o4bQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"prueba buena\"\n        src=\"/gatsbyjs/static/934278570c75424ad943c48c83ef1f2d/36727/franmadu6-django_tutorial.png\"\n        srcset=\"/gatsbyjs/static/934278570c75424ad943c48c83ef1f2d/acf4b/franmadu6-django_tutorial.png 173w,\n/gatsbyjs/static/934278570c75424ad943c48c83ef1f2d/fc834/franmadu6-django_tutorial.png 345w,\n/gatsbyjs/static/934278570c75424ad943c48c83ef1f2d/36727/franmadu6-django_tutorial.png 690w,\n/gatsbyjs/static/934278570c75424ad943c48c83ef1f2d/17fa4/franmadu6-django_tutorial.png 1035w,\n/gatsbyjs/static/934278570c75424ad943c48c83ef1f2d/a5044/franmadu6-django_tutorial.png 1380w,\n/gatsbyjs/static/934278570c75424ad943c48c83ef1f2d/a987b/franmadu6-django_tutorial.png 1920w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n<li>Test Erroneo (Modificando nueva mente el un fichero del repositorio.)\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/612e36562591ab1e4980da5f99acbb55/99445/Build-software-better-together.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.70859538784066%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAAB2UlEQVQ4y41T2XKjMBDkLbsIdCIJBMZO1nGlKv//fbM9w2EnIdl96BoJSa3u1lDN13fqz2/khxcK/ZnK/ErlfANeZe7TiXxmzGu9j0M/U57+UBpfaMA5RuXiRN3pjeJ0o4BN2vfUukwtqvYDmTDIvLHpC/g7n3dxlIttV6jq00R5vFDscXO3HGZon/dx6w7I1qpMlPU4XEA6UbUd2hYbE+h3Y+mXMlL/idZR3XqMUbWnKiIHlrxZjQNL74Xwf1CDUOkgxFyriNwcpJpQJLcYC/XTM0gHsdLaxdKPWPdwTJXYtHG3rF2kkEYhNNjA88Z0YumjXSeqdmyW78FnIebbQh6pyxN5qA2pCLHCZoV8OeO6dXvOj2DianuQe2t0opBJmdCD0MVBctWwtWTmpT4+3DeEq8I0CpEQAi1sP9rdFT10w48K2S73pShNi1KHTG3oJU9+zSOF9ZFCPsCZLVkt1rbKB5+UPmyfp1rL+vIoK6ECYYKaGW1TypkS1DnYNSC3uMja7+EAg/NfFDoQpukqvbl9X369bm2vDQ9zXMaO2iNChUU/3siVK5l0IZ2fBU13IuUL1TZTjX7dodGj/OsJjl4Zamy+ULNGoECgZIyW4cf4DM6XK8gVyP8CWguAW05CRskAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"prueba mala\"\n        src=\"/gatsbyjs/static/612e36562591ab1e4980da5f99acbb55/36727/Build-software-better-together.png\"\n        srcset=\"/gatsbyjs/static/612e36562591ab1e4980da5f99acbb55/acf4b/Build-software-better-together.png 173w,\n/gatsbyjs/static/612e36562591ab1e4980da5f99acbb55/fc834/Build-software-better-together.png 345w,\n/gatsbyjs/static/612e36562591ab1e4980da5f99acbb55/36727/Build-software-better-together.png 690w,\n/gatsbyjs/static/612e36562591ab1e4980da5f99acbb55/17fa4/Build-software-better-together.png 1035w,\n/gatsbyjs/static/612e36562591ab1e4980da5f99acbb55/a5044/Build-software-better-together.png 1380w,\n/gatsbyjs/static/612e36562591ab1e4980da5f99acbb55/99445/Build-software-better-together.png 1908w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></li>\n</ul>\n<p>A continuación vamos a realziar el despliegue coontinuo en un servicio de hosting, <strong>Heroku</strong>.</p>\n<p>Deberemos irnos a nuestro perfil de usuario en Heroku, buscamos API_KEY la copiamos, ahora nos iremos a nuestro repositorio -> Settings -> Secrets y pegaremos ahí el codigo copiado.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/9cc3701c465362da7b664f8694d57dbc/68cbc/heroku-api-key.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.705530642750373%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAcklEQVQI121OywqAMAzb//+SFy9eBPGgIKIgiHjQg6Lzsbk2PkDcwJaSUJI2gpnxN3bp44BS+sFf/dVEhH3VELb55TemUYXASxD6GfpuwDRLyGV1dDY3hiDHDeJd2smYGHXRIY8blEkLrYxz4JZ96dwHJ7K46tgN0+dYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"heroku key\"\n        src=\"/gatsbyjs/static/9cc3701c465362da7b664f8694d57dbc/36727/heroku-api-key.png\"\n        srcset=\"/gatsbyjs/static/9cc3701c465362da7b664f8694d57dbc/acf4b/heroku-api-key.png 173w,\n/gatsbyjs/static/9cc3701c465362da7b664f8694d57dbc/fc834/heroku-api-key.png 345w,\n/gatsbyjs/static/9cc3701c465362da7b664f8694d57dbc/36727/heroku-api-key.png 690w,\n/gatsbyjs/static/9cc3701c465362da7b664f8694d57dbc/17fa4/heroku-api-key.png 1035w,\n/gatsbyjs/static/9cc3701c465362da7b664f8694d57dbc/68cbc/heroku-api-key.png 1338w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/6cfee17a43c7b6393cf539862e47991d/bd128/heroku-api-key2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.961783439490446%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABnklEQVQoz4WS2XKkMAxFeU53oAGbzYCh2XrJJJn8/78p9wpCTU+qkodTkm1ZupYc+OEqrpul7hY5RFaO4LBxPGW7/++a9ik0Yksvw+VNzsur9POLnEwlARMxISnqs2RVL2U7KrbspGgGafrLdubVqu96qRBT94u0EMV7LBTkOMgRQJyfETRB7ayBZTOuxfyE80ESN0uctRKlBSglTAp5jnO1TKYJO0j1412a80UsqmRuVbmDgtwnpjqLgWpTeFi/WpDqupMQRQI+jc/ixQg9iFJg3Eb1wElxO7Gtd5K8UaUBZTKQ0qlyvv+VfrrLuPyR6fomw/KidsE+/fHyKvPtXSaQZPVWpNLnMkfARVq0epiiioFv60myZt7J2+Vhrc9ELFXxHmEyTfj/1zjgOzybWkLrJTQt7HeOp/zxDtgTfkle+1euPUQvwmSd3mof0bi935vFniacbx/oyzv+2lUnxSlbTvoHdNKAk+eEU67hM2kQO0yLVE7Hvqr6mTRvtdfsZTPcpOHnB0cqjDLIB6Et9j78BlsUW6dW/yL8FDDhJzVfM6DHwZOEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"heroku key 2\"\n        src=\"/gatsbyjs/static/6cfee17a43c7b6393cf539862e47991d/36727/heroku-api-key2.png\"\n        srcset=\"/gatsbyjs/static/6cfee17a43c7b6393cf539862e47991d/acf4b/heroku-api-key2.png 173w,\n/gatsbyjs/static/6cfee17a43c7b6393cf539862e47991d/fc834/heroku-api-key2.png 345w,\n/gatsbyjs/static/6cfee17a43c7b6393cf539862e47991d/36727/heroku-api-key2.png 690w,\n/gatsbyjs/static/6cfee17a43c7b6393cf539862e47991d/bd128/heroku-api-key2.png 942w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Ahora crearemos un nuevo proyecto en heroku y lo conectaremos con GitHub.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/ee8567ac9c8fc8efa4f0678b527aa503/99445/django-tutorial-franmadu6GitHubHeroku.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.955974842767304%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABU0lEQVQoz21Si27DMAjM/39nN02T0jSOX+DH7XDjru2GdAKDDQd4SSFDtUKkQHIZOmdFpo5J4Rk3mC1274TFs9AuEw2XyweWmAoSE/kgWFePbQu4bh67iwhRByyZ3Zmw83GwkLdCv353RCy9dxhaa2QmZKkoZGDnUshYdWhDrZV324g1e0N7vjeYLJVUDdb2fiOz3Y+WW+0IPuF7dWS+03+QgcdK9sbkOAJizCxyfz+xaK54QJ5sIkVB4ChK6WTdRjwnm3Ud0H/w1HLngzIqTt8oQN/ttiFJYhfWej3jONFfsOCUkbS2kXiKzUrZRmIi4QyVydo5q85Yp+9dljlMY+Yc5xLSGL6JciGOm9xCpU4Ds4MmgurDYxkPhs8OYzQCdweUi0nakQn7Z1LuOnOe2ezaXxK+May4Xh03l8ZXMdmD4nON+NrILjV46fC54zgR5G/CH+OMEW40YrE+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"heroku 3\"\n        src=\"/gatsbyjs/static/ee8567ac9c8fc8efa4f0678b527aa503/36727/django-tutorial-franmadu6GitHubHeroku.png\"\n        srcset=\"/gatsbyjs/static/ee8567ac9c8fc8efa4f0678b527aa503/acf4b/django-tutorial-franmadu6GitHubHeroku.png 173w,\n/gatsbyjs/static/ee8567ac9c8fc8efa4f0678b527aa503/fc834/django-tutorial-franmadu6GitHubHeroku.png 345w,\n/gatsbyjs/static/ee8567ac9c8fc8efa4f0678b527aa503/36727/django-tutorial-franmadu6GitHubHeroku.png 690w,\n/gatsbyjs/static/ee8567ac9c8fc8efa4f0678b527aa503/17fa4/django-tutorial-franmadu6GitHubHeroku.png 1035w,\n/gatsbyjs/static/ee8567ac9c8fc8efa4f0678b527aa503/a5044/django-tutorial-franmadu6GitHubHeroku.png 1380w,\n/gatsbyjs/static/ee8567ac9c8fc8efa4f0678b527aa503/99445/django-tutorial-franmadu6GitHubHeroku.png 1908w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Modificaremos el fichero main nueva mente añadiendo las sigueinte lineas para implementarlo en heroku:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># This is a basic workflow to help you get started with Actions</span>\n\nname: CI\n\n<span class=\"token comment\"># Controls when the action will run. </span>\non:\n  <span class=\"token comment\"># Triggers the workflow on push or pull request events but only for the master branch</span>\n  push:\n    branches: <span class=\"token punctuation\">[</span> master <span class=\"token punctuation\">]</span>\n  pull_request:\n    branches: <span class=\"token punctuation\">[</span> master <span class=\"token punctuation\">]</span>\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        python-version: <span class=\"token punctuation\">[</span><span class=\"token number\">3.9</span><span class=\"token punctuation\">]</span>\n\n    steps:\n    - uses: actions/checkout@v2\n    - uses: akhileshns/heroku-deploy@v3.8.9 <span class=\"token comment\"># This is the action</span>\n      with:\n          heroku_api_key: <span class=\"token variable\">${{secrets.HEROKU_API_KEY}</span><span class=\"token punctuation\">}</span>\n          heroku_app_name: <span class=\"token string\">\"django-tutorial-franmadu6\"</span> <span class=\"token comment\">#Must be unique in Heroku</span>\n          heroku_email: <span class=\"token string\">\"frandh1997@gmail.com\"</span>\n          procfile: <span class=\"token string\">\"web: npm start\"</span>    \n\n    - name: Set up Python <span class=\"token variable\">${{ matrix.python-version }</span><span class=\"token punctuation\">}</span>\n      uses: actions/setup-python@v2\n      with:\n        python-version: <span class=\"token variable\">${{ matrix.python-version }</span><span class=\"token punctuation\">}</span>\n    - name: Instalar requerimientos\n      run: <span class=\"token operator\">|</span>\n        pip <span class=\"token function\">install</span> --upgrade pip\n        pip <span class=\"token function\">install</span> -r requirements.txt\n      \n    - name: Probar python3\n      run: python3 manage.py <span class=\"token builtin class-name\">test</span></code></pre></div>\n<p>También modificaremos el fichero settings.py y le añadiremos en la primera línea:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">import</span> os</code></pre></div>\n<p>Y en la ultima:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">STATIC_ROOT <span class=\"token operator\">=</span> os.path.join<span class=\"token punctuation\">(</span>BASE_DIR, <span class=\"token string\">'static'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 690px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/gatsbyjs/static/c84b40c9ddf73d233a45239b04e2882e/f570d/Build-Heroku.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.3125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAACKklEQVQ4y41U7XabMAzl/R9oT7D93zld119ZmqaEJBAMGOMvyK0kQka20JRzLgLbkq+ubCWpsmjbDs45zJ9+GEb0A2Lfkx1xPp8F/z4+eOSHDEmZaRSEpnIU2KOpO2htoSqDY1GjKGm+bFGoEdp4tF1Aa4PYRjvoLmKfV3j69RvJfldjlyooRQH2DbKsxPuuwNPLmmwOQ06djVfbSkAvgSvavDy1grqyND8gMdah1kZYmdahMwF102G1yaBbixAHOB/hCWxD7AUxshQz0H8IEYn3Ad4RQiCHQIuj6DaQTj058hyPRfrm+Um/Ud9J21HngcYST1oY0sE6T5Q9DZ6vBeHv4VKEq+UxmjOdkww0FVQbK1lyjMSHnsRXeNtmpNkB2/SANMspbQPDm3UM3iwIrIsCJxL0N+C0E0cp7Q8nrNZbrDcpBT3K/yFXKE71+H0sqZpWAk2B74HJJbzTkZzXrykFfReGu30uYyfVUCodVdbN2P1lOcc14JhyJew2lPbr244CFjLGDE9lg4rSv8fobsBAr5yc/xBDTpOFnhjxkfFhkIWs0eT4KUN2YiacLls+g6qmw6q0YPpWVSuFmuu4yJAryaw0HWy2S+BqPwzIr6U0llJ7WBRZ9MlxWCrEYsp86R+dsa9gZOjHDnK7+9cl+I8hX2wOwPeTn6l33tzfGaTBXtaNON/4JNxyGNJ1QpSOwp3n548Vvn97lk4yLWbHcOk6fsLFx1Jj4TgfWY/Dfsi8lfwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PracticaImg\"\n        title=\"heroku 4\"\n        src=\"/gatsbyjs/static/c84b40c9ddf73d233a45239b04e2882e/36727/Build-Heroku.png\"\n        srcset=\"/gatsbyjs/static/c84b40c9ddf73d233a45239b04e2882e/acf4b/Build-Heroku.png 173w,\n/gatsbyjs/static/c84b40c9ddf73d233a45239b04e2882e/fc834/Build-Heroku.png 345w,\n/gatsbyjs/static/c84b40c9ddf73d233a45239b04e2882e/36727/Build-Heroku.png 690w,\n/gatsbyjs/static/c84b40c9ddf73d233a45239b04e2882e/f570d/Build-Heroku.png 960w\"\n        sizes=\"(max-width: 690px) 100vw, 690px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Como podemos comprobrar se hace el desplieque automático en heroku si realizamos un deploy desde github actions.</p>","timeToRead":7,"excerpt":"Tarea: Integración continúa de aplicación django (Test + Deploy). Vamos a trabajar con el repositorio de la aplicación django_tutorial. Esta…","frontmatter":{"title":"[IAW] Introducción a la IC/DC","cover":"https://img.icons8.com/ios/452/work.png","date":"2021-04-06T00:00:00.000Z","categories":["IAW"],"tags":["Integración Continúa","GitHub Actions"]},"fields":{"slug":"/iaw-introduccion-a-la-ic-dc","date":"April 05, 2021"}}},"pageContext":{"slug":"/iaw-introduccion-a-la-ic-dc","nexttitle":"[IAW] - Práctica: Implantación de aplicaciones web PHP en docker ","nextslug":"/iaw-practica-implantacion-de-aplicaciones-web-php-en-docker","prevtitle":"Usuarios, grupos y ACLs en LDAP","prevslug":"/usuarios-grupos-y-ac-ls-en-ldap"}}}