{"componentChunkName":"component---src-templates-post-js","path":"/abd-gestion-de-usuarios","result":{"data":{"markdownRemark":{"html":"<h2 id=\"práctica-tema-3-usuarios\"><a href=\"#pr%C3%A1ctica-tema-3-usuarios\" aria-label=\"práctica tema 3 usuarios permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PRÁCTICA TEMA 3: USUARIOS</h2>\n<h1 id=\"oracle\"><a href=\"#oracle\" aria-label=\"oracle permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ORACLE:</h1>\n<p><strong>1. (ORACLE, Postgres, MySQL) Crea un usuario llamado Becario y, sin usar los roles de ORACLE, dale los siguientes privilegios:</strong></p>\n<p><strong>En Oracle</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#creación de usuario.</span>\nCreate user Becario identified by Becario<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#Conectarse a la base de datos.</span>\ngrant create session to Becario<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#Modificar el número de errores en la introducción de la contraseña de cualquier usuario.</span>\ngrant create profile to Becario<span class=\"token punctuation\">;</span>\nCreate profile Limitepasswd LIMIT\nFAILED_LOGIN_ATTEMPTS <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#Ahora le damos al usuario becarios la posibilidad de dar dicho perfil</span>\ngrant alter user to Becario<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#Y ahora este usuario podría dar el perfil a diferentes usuarios</span>\nAlter user <span class=\"token punctuation\">{</span>USUARIO<span class=\"token punctuation\">}</span> profile Limitepasswd<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># Modificar índices en cualquier esquema (este privilegio podrá pasarlo a quien quiera)</span>\nalter index fran.PK_CODIGO_COCHES RENAME TO PK_CODIGO_COCHES1<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># Insertar filas en scott.emp (este privilegio podrá pasarlo a quien quiera)</span>\ngrant insert on SCOTT.EMP to Becario with grant option<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># Crear objetos en cualquier tablespace.</span>\ngrant unlimited tablespace to Becario<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># Gestión completa de usuarios, privilegios y roles.</span>\n<span class=\"token comment\">#Usuarios</span>\ngrant create user to Becario<span class=\"token punctuation\">;</span>\ngrant alter user to Becario<span class=\"token punctuation\">;</span>\ngrant drop user to Becario<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#Privilegios</span>\ngrant grant any privilege to Becario<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#Roles</span>\ngrant create role to Becario<span class=\"token punctuation\">;</span>\ngrant drop any role to Becario<span class=\"token punctuation\">;</span>\ngrant alter any role to Becario<span class=\"token punctuation\">;</span>\ngrant grant any role to Becario<span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>En Postgres</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<p><strong>En MariaDB</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<p><strong>2. Realiza una función de verificación de contraseñas que compruebe que la contraseña difiere en más de cinco caracteres de la anterior y que la longitud de la misma es diferente de la anterior. Asígnala al perfil CONTRASEÑASEGURA. Comprueba que funciona correctamente.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">create or replace <span class=\"token keyword\">function</span> VerificacionPSW <span class=\"token punctuation\">(</span>p_usuario varchar2,\n                                            p_pswnueva varchar2,\n                                            p_pswvieja varchar2<span class=\"token punctuation\">)</span>\n<span class=\"token builtin class-name\">return</span> boolean\nis\n    v_sumaRepe number:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    v_letraigual number:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    v_numNum number:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    v_numLetra number:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    v_validar number:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nbegin\n    <span class=\"token keyword\">if</span> length<span class=\"token punctuation\">(</span>p_pswnueva<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>length<span class=\"token punctuation\">(</span>p_pswvieja<span class=\"token punctuation\">)</span> <span class=\"token keyword\">then</span>\n        raise_application_error<span class=\"token punctuation\">(</span>-20003, <span class=\"token string\">'La nueva contraseña no debe tener la misma longitud que la anterior'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    end <span class=\"token keyword\">if</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token punctuation\">..</span>length<span class=\"token punctuation\">(</span>p_pswnueva<span class=\"token punctuation\">)</span> loop\n        ContarNumerosYLetras<span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">(</span>p_pswnueva, i,1<span class=\"token punctuation\">)</span>, v_numNum, v_numLetra<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        CompararCaracteres<span class=\"token punctuation\">(</span>substr<span class=\"token punctuation\">(</span>p_pswnueva, i,1<span class=\"token punctuation\">)</span>, p_pswvieja, v_letraigual<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token assign-left variable\">v_letraigual</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token keyword\">then</span>\n            v_sumaRepe:<span class=\"token operator\">=</span>v_sumaRepe+1<span class=\"token punctuation\">;</span>\n        end <span class=\"token keyword\">if</span><span class=\"token punctuation\">;</span>\n        v_letraigual:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> \n    end loop<span class=\"token punctuation\">;</span>\n    v_validar:<span class=\"token operator\">=</span>LanzarErrores<span class=\"token punctuation\">(</span>v_sumaRepe, v_numNum, v_numLetra<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token builtin class-name\">return</span> TRUE<span class=\"token punctuation\">;</span>\nend VerificacionPSW<span class=\"token punctuation\">;</span>\n/\n\ncreate or replace <span class=\"token keyword\">function</span> LanzarErrores<span class=\"token punctuation\">(</span>p_sumaRepe number, \n                                         p_numNum number, p_numLetra number<span class=\"token punctuation\">)</span>\n<span class=\"token builtin class-name\">return</span> number\nis\nbegin\n    <span class=\"token keyword\">case</span>\n        when p_sumaRepe<span class=\"token operator\">&lt;</span><span class=\"token number\">6</span> <span class=\"token keyword\">then</span>\n            raise_application_error<span class=\"token punctuation\">(</span>-20002, <span class=\"token string\">'La nueva contraseña debe tener al menos 5 caracteres diferentes con respecto a la antigua'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">else</span>\n            <span class=\"token builtin class-name\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    end <span class=\"token keyword\">case</span><span class=\"token punctuation\">;</span>          \nend LanzarErrores<span class=\"token punctuation\">;</span>\n/\n\n\ncreate or replace procedure CompararCaracteres<span class=\"token punctuation\">(</span>p_caracter varchar2,\n                                               p_psw varchar2,\n                                               p_letraigual <span class=\"token keyword\">in</span> out number<span class=\"token punctuation\">)</span>\nis\nbegin\n    <span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token punctuation\">..</span>length<span class=\"token punctuation\">(</span>p_psw<span class=\"token punctuation\">)</span> loop\n        <span class=\"token keyword\">if</span> substr<span class=\"token punctuation\">(</span>p_psw,i,1<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>p_caracter <span class=\"token keyword\">then</span>\n            p_letraigual:<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        end <span class=\"token keyword\">if</span><span class=\"token punctuation\">;</span>\n    end loop<span class=\"token punctuation\">;</span>\nend CompararCaracteres<span class=\"token punctuation\">;</span>\n/\n\n\ncreate or replace procedure ContarNumerosYLetras <span class=\"token punctuation\">(</span>p_caracter varchar2,\n                                                  p_numero  <span class=\"token keyword\">in</span> out number,\n                                                  p_letra   <span class=\"token keyword\">in</span> out number<span class=\"token punctuation\">)</span>\nis\nbegin\n    <span class=\"token keyword\">if</span> <span class=\"token assign-left variable\">p_caracter</span><span class=\"token operator\">=</span>REGEXP_REPLACE<span class=\"token punctuation\">(</span>p_caracter,<span class=\"token string\">'[0-9]'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">then</span>\n        p_numero:<span class=\"token operator\">=</span>p_numero+1<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span>\n        p_letra:<span class=\"token operator\">=</span>p_letra+1<span class=\"token punctuation\">;</span>\n    end <span class=\"token keyword\">if</span><span class=\"token punctuation\">;</span>\nend ContarNumerosYLetras<span class=\"token punctuation\">;</span>\n/</code></pre></div>\n<p>Creación de perfil.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">create profile PswSegura limit \n    PASSWORD_VERIFY_FUNCTION VerificacionPSW<span class=\"token punctuation\">;</span>\n\ndrop profile PswSegura<span class=\"token punctuation\">;</span></code></pre></div>\n<p>Asignación de usuario.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">alter user pruebapasswd profile PswSegura<span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>3. Realiza un procedimiento llamado MostrarPrivilegiosdelRol que reciba el nombre de un rol y muestre los privilegios de sistema y los privilegios sobre objetos que lo componen.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">exec</span> MostrarPrivileciosdelRol <span class=\"token punctuation\">(</span><span class=\"token string\">'Dsvret'</span><span class=\"token punctuation\">)</span>\n\ncreate or replace procedure MostrarPrivileciosdelRol <span class=\"token punctuation\">(</span>p_rol varchar2<span class=\"token punctuation\">)</span>\nis\n    v_validacion number:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nbegin\n    v_validacion:<span class=\"token operator\">=</span>ComprobarSiRolExiste<span class=\"token punctuation\">(</span>p_rol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token assign-left variable\">v_validacion</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token keyword\">then</span>\n        BuscarPrivilegiosDelSistema<span class=\"token punctuation\">(</span>p_rol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        dbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        dbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------------------------------------------------------'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        dbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        BuscarPrivilegiosSobreObjetos<span class=\"token punctuation\">(</span>p_rol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    end <span class=\"token keyword\">if</span><span class=\"token punctuation\">;</span>\nend MostrarPrivileciosdelRol<span class=\"token punctuation\">;</span>\n/\n\ncreate or replace procedure BuscarPrivilegiosDelSistema<span class=\"token punctuation\">(</span>p_rol varchar2<span class=\"token punctuation\">)</span>\nis\n    cursor c_sys\n    is\n    <span class=\"token keyword\">select</span> distinct privilege\n    from role_sys_privs\n    where role <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span>select distinct role \n                   from role_role_privs \n                   start with <span class=\"token assign-left variable\">role</span><span class=\"token operator\">=</span>p_rol\n                   connect by role <span class=\"token operator\">=</span> prior granted_role<span class=\"token punctuation\">)</span>\n    or role <span class=\"token operator\">=</span> p_rol<span class=\"token punctuation\">;</span>\n    v_sys c_sys%ROWTYPE<span class=\"token punctuation\">;</span>\nbegin\n    dbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'PRIVILEGIOS DEL SISTEMA'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    dbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------------------------------------------------------'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">v_sys</span> <span class=\"token keyword\">in</span> c_sys loop\n        dbms_output.put_line<span class=\"token punctuation\">(</span>v_sys.privilege<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    end loop<span class=\"token punctuation\">;</span>\nend BuscarPrivilegiosDelSistema<span class=\"token punctuation\">;</span>\n/\n\n\ncreate or replace procedure BuscarPrivilegiosSobreObjetos<span class=\"token punctuation\">(</span>p_rol varchar2<span class=\"token punctuation\">)</span>\nis\n    cursor c_tab\n    is\n    <span class=\"token keyword\">select</span> distinct privilege, table_name, owner\n    from role_tab_privs\n    where role <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span>select distinct role \n                   from role_role_privs \n                   start with <span class=\"token assign-left variable\">role</span><span class=\"token operator\">=</span>p_rol\n                   connect by role <span class=\"token operator\">=</span> prior granted_role<span class=\"token punctuation\">)</span>\n    or role <span class=\"token operator\">=</span> p_rol<span class=\"token punctuation\">;</span>\n    v_tab c_tab%ROWTYPE<span class=\"token punctuation\">;</span>\nbegin\n    dbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'PRIVILEGIOS SOBRE OBJETOS'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    dbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'--------------------------------------------------------------------------------'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">v_tab</span> <span class=\"token keyword\">in</span> c_tab loop\n        dbms_output.put_line<span class=\"token punctuation\">(</span>v_tab.privilege<span class=\"token operator\">||</span><span class=\"token string\">' sobre la tabla '</span><span class=\"token operator\">||</span>v_tab.table_name<span class=\"token operator\">||</span><span class=\"token string\">' del usuario '</span><span class=\"token operator\">||</span>v_tab.owner<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    end loop<span class=\"token punctuation\">;</span>\nend BuscarPrivilegiosSobreObjetos<span class=\"token punctuation\">;</span>\n/\n\n\ncreate or replace <span class=\"token keyword\">function</span> ComprobarSiRolExiste<span class=\"token punctuation\">(</span>p_rol varchar2<span class=\"token punctuation\">)</span>\n<span class=\"token builtin class-name\">return</span> number\nis\n    v_resultado varchar2<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbegin\n    <span class=\"token keyword\">select</span> role into v_resultado\n    from dba_roles\n    where <span class=\"token assign-left variable\">role</span><span class=\"token operator\">=</span>p_rol<span class=\"token punctuation\">;</span>\n    <span class=\"token builtin class-name\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nexception\n    when NO_DATA_FOUND <span class=\"token keyword\">then</span>\n        dbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'No existe el rol '</span><span class=\"token operator\">||</span>p_rol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token builtin class-name\">return</span> -1<span class=\"token punctuation\">;</span>\nend ComprobarSiRolExiste<span class=\"token punctuation\">;</span>\n/</code></pre></div>\n<p><strong>4. Realiza un procedimiento llamado PermisosdeAsobreB que reciba dos nombres de usuario y muestre los permisos que tiene el primero de ellos sobre objetos del segundo.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n<p><strong>5. Realiza un procedimiento llamado MostrarInfoPerfil que reciba el nombre de un perfil y muestre su composición y los usuarios que lo tienen asignado.</strong></p>\n<p>(Para que los perfiles funcionen, el parámetro de la base de datos resource_limit, deberá tener el valor a true.)</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">create procedure Infoperfil <span class=\"token punctuation\">(</span>p_perfil dba_profiles.profile%type<span class=\"token punctuation\">)</span>\nis\n\tcursor c_informacion\n\tis\n\t<span class=\"token keyword\">select</span> resource_name, limit\n\tfrom dba_profiles\n\twhere profile <span class=\"token operator\">=</span> p_perfil<span class=\"token punctuation\">;</span>\nbegin\n\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Composición de: '</span><span class=\"token operator\">||</span> p_perfil<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> c_informacion loop\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Recurso: '</span><span class=\"token operator\">||</span> i.resource_name <span class=\"token operator\">||</span> <span class=\"token string\">' Límites: '</span><span class=\"token operator\">||</span> i.limit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tend loop<span class=\"token punctuation\">;</span>\nend Infoperfil<span class=\"token punctuation\">;</span>\n/\n\n\ncreate procedure MostrarInfoPerfil <span class=\"token punctuation\">(</span>p_perfil dba_profiles.profile%type<span class=\"token punctuation\">)</span>\nis\n\tcursor c_perfiles\n\tis\n\t<span class=\"token keyword\">select</span> username\n\tfrom dba_users\n\twhere profile <span class=\"token operator\">=</span> p_perfil<span class=\"token punctuation\">;</span>\nbegin \n\tInfoperfil<span class=\"token punctuation\">(</span>p_perfil<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">i</span> <span class=\"token keyword\">in</span> c_perfiles loop\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Usuarios con ese perfil: '</span><span class=\"token operator\">||</span> i.username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tend loop<span class=\"token punctuation\">;</span>\nend MostrarInfoPerfil<span class=\"token punctuation\">;</span>\n/</code></pre></div>\n<p><strong>6. (ORACLE, Postgres) Realiza un procedimiento que reciba un nombre de usuario y nos muestre cuántas sesiones tiene abiertas en este momento. Además, para cada una de dichas sesiones nos mostrará la hora de comienzo y el nombre de la máquina, sistema operativo y programa desde el que fue abierta.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">Create or replace procedure ver.excepciones<span class=\"token punctuation\">(</span>p_user varchar2<span class=\"token punctuation\">)</span>\nis\n\tsi.existe number<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nbegin\n\tSelect count<span class=\"token punctuation\">(</span>*<span class=\"token punctuation\">)</span> into si.existe\n\tfrom dba_users\n\twhere <span class=\"token assign-left variable\">USERNAME</span><span class=\"token operator\">=</span>p_user<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> si.existe<span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token keyword\">then</span>\n\t\traise_application_error<span class=\"token punctuation\">(</span>-20001,<span class=\"token string\">'El usuario que buscas no existe'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tend <span class=\"token keyword\">if</span><span class=\"token punctuation\">;</span>\nend<span class=\"token punctuation\">;</span>\n/\n\n<span class=\"token comment\">#El nombre del sistema operativo no está disponible para buscar en Oracle, una solución que se puede hacer es buscar el usuario del sistema que está usando, pero no un sistema operativo.</span>\n\nCreate or replace procedure ver.sesiones<span class=\"token punctuation\">(</span>p_user varchar2<span class=\"token punctuation\">)</span>\nis\n\tcursor c.sesiones is\n\t<span class=\"token keyword\">select</span> MACHINE as maquina,to_char<span class=\"token punctuation\">(</span>LOGON_TIME,<span class=\"token string\">'YYYY/MM/DD HH24:MI'</span><span class=\"token punctuation\">)</span> as comienzo,program as programa\n\tfrom <span class=\"token function\">v</span><span class=\"token variable\">$session</span> \n\twhere <span class=\"token assign-left variable\">USERNAME</span><span class=\"token operator\">=</span>p_user<span class=\"token punctuation\">;</span>\n\tcontador number<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>:<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\nbegin\n\t<span class=\"token keyword\">for</span> v.sesiones <span class=\"token keyword\">in</span> c.sesiones loop\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Sesion '</span><span class=\"token operator\">||</span>contador<span class=\"token operator\">||</span><span class=\"token string\">'->'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Hora de comienzo: '</span><span class=\"token operator\">||</span>v.sesiones.comienzo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Nombre Máquina: '</span><span class=\"token operator\">||</span>v.sesiones.maquina<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Nombre Programa: '</span><span class=\"token operator\">||</span>v.sesiones.programa<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tcontador:<span class=\"token operator\">=</span>contador+1<span class=\"token punctuation\">;</span>\n\tend loop<span class=\"token punctuation\">;</span>\nend<span class=\"token punctuation\">;</span>\n/\n\nCreate or replace procedure ver.conexiones<span class=\"token punctuation\">(</span>p_user varchar2<span class=\"token punctuation\">)</span>\nis\nbegin\n\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Usuario: '</span><span class=\"token operator\">||</span>p_user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tver.excepciones<span class=\"token punctuation\">(</span>p_user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tver.sesiones.abiertas<span class=\"token punctuation\">(</span>p_user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tver.sesiones<span class=\"token punctuation\">(</span>p_user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nend<span class=\"token punctuation\">;</span>\n/</code></pre></div>\n<p><strong>7. (ORACLE) Realiza un procedimiento que muestre los usuarios que pueden conceder privilegios de sistema a otros usuarios y cuales son dichos privilegios.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">Create or replace procedure ver_usuario_simple<span class=\"token punctuation\">(</span>p_rol varchar2,p_privilegio varchar2<span class=\"token punctuation\">)</span>\nis\n\tcursor c_usuarios is\n\tSelect GRANTEE\n\tfrom dba_role_privs\n\twhere <span class=\"token assign-left variable\">GRANTED_ROLE</span><span class=\"token operator\">=</span>p_rol<span class=\"token punctuation\">;</span>\nbegin\n\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">v_usuarios</span> <span class=\"token keyword\">in</span> c_usuarios loop\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Usuario: '</span><span class=\"token operator\">||</span>v_usuarios.GRANTEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Privilegio: '</span><span class=\"token operator\">||</span>p_privilegio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span>chr<span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\tend loop<span class=\"token punctuation\">;</span>\nend<span class=\"token punctuation\">;</span>\n/\n\nCreate or replace procedure ver_usuario_compuesto<span class=\"token punctuation\">(</span>p_rol varchar2,p_privilegio varchar2<span class=\"token punctuation\">)</span>\nis\n\tcursor c_compuesto is\n\t<span class=\"token keyword\">select</span> GRANTEE\n   \tfrom dba_role_privs\n\tstart with GRANTED_ROLE <span class=\"token operator\">=</span> p_rol\n        connect by GRANTED_ROLE <span class=\"token operator\">=</span> prior GRANTEE<span class=\"token punctuation\">;</span>\n\tv_analizarprivilegio number<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nbegin\n\tSelect count<span class=\"token punctuation\">(</span>*<span class=\"token punctuation\">)</span> into v_analizarprivilegio\n\tfrom role_sys_privs\n\twhere <span class=\"token assign-left variable\">ROLE</span><span class=\"token operator\">=</span>p_rol\n\tand <span class=\"token assign-left variable\">PRIVILEGE</span><span class=\"token operator\">=</span>p_privilegio<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> v_analizarprivilegio <span class=\"token operator\">!=</span> <span class=\"token number\">0</span> <span class=\"token keyword\">then</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">v_compuesto</span> <span class=\"token keyword\">in</span> c_compuesto loop\n\t\t\tver_usuario_simple<span class=\"token punctuation\">(</span>v_compuesto.GRANTEE,p_privilegio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tend loop<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">else</span>\n\t\tver_usuario_simple<span class=\"token punctuation\">(</span>p_rol,p_privilegio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tend <span class=\"token keyword\">if</span><span class=\"token punctuation\">;</span>\nend<span class=\"token punctuation\">;</span>\n/\n\nCreate or replace procedure privilegios_superusuario_rol\nis\n\tcursor c_privs is\n\tSelect GRANTEE,PRIVILEGE\n\tfrom dba_sys_privs\n\twhere <span class=\"token assign-left variable\">ADMIN_OPTION</span><span class=\"token operator\">=</span><span class=\"token string\">'YES'</span>\n\tand GRANTEE <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span>Select ROLE\n\t\t\tFROM DBA_ROLES<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tv_compuesto number<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>:<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\tv_rol varchar2<span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>:<span class=\"token operator\">=</span><span class=\"token string\">'SIMPLE'</span><span class=\"token punctuation\">;</span>\nbegin\n\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">v_privs</span> <span class=\"token keyword\">in</span> c_privs loop\n\t\tSELECT count<span class=\"token punctuation\">(</span>*<span class=\"token punctuation\">)</span> into v_compuesto\n\t\tFROM DBA_ROLE_PRIVS\n\t\twhere <span class=\"token assign-left variable\">GRANTED_ROLE</span><span class=\"token operator\">=</span>v_privs.GRANTEE<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token assign-left variable\">v_compuesto</span><span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token keyword\">then</span>\n\t\t\tver_usuario_simple<span class=\"token punctuation\">(</span>v_privs.GRANTEE,v_privs.PRIVILEGE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">else</span>\n\t\t\tver_usuario_compuesto<span class=\"token punctuation\">(</span>v_privs.GRANTEE,v_privs.PRIVILEGE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tend <span class=\"token keyword\">if</span><span class=\"token punctuation\">;</span>\n\tend loop<span class=\"token punctuation\">;</span>\nend<span class=\"token punctuation\">;</span>\n/\n\n\nCreate or replace procedure privilegios_superusuario_directo\nis\n\tcursor c_privsd is\n\tSelect GRANTEE,PRIVILEGE\n\tfrom dba_sys_privs\n\twhere <span class=\"token assign-left variable\">ADMIN_OPTION</span><span class=\"token operator\">=</span><span class=\"token string\">'YES'</span>\n\tand GRANTEE <span class=\"token keyword\">in</span> <span class=\"token punctuation\">(</span>Select USERNAME\n\t\t\tFROM DBA_USERS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbegin\n\t<span class=\"token keyword\">for</span> <span class=\"token for-or-select variable\">v_privsd</span> <span class=\"token keyword\">in</span> c_privsd loop\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Usuario: '</span><span class=\"token operator\">||</span>v_privsd.GRANTEE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Privilegio: '</span><span class=\"token operator\">||</span>v_privsd.PRIVILEGE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tdbms_output.put_line<span class=\"token punctuation\">(</span>chr<span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n\tend loop<span class=\"token punctuation\">;</span>\nend<span class=\"token punctuation\">;</span>\n/\n\nCreate or replace procedure privilegios_superusuario\nis\n\t\nbegin\n\tdbms_output.put_line<span class=\"token punctuation\">(</span><span class=\"token string\">'Usuarios que pueden dar privilegios'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tprivilegios_superusuariodirecto<span class=\"token punctuation\">;</span>\n\tprivilegios_superusuariorol<span class=\"token punctuation\">;</span>\nend<span class=\"token punctuation\">;</span>\n/</code></pre></div>\n<h1 id=\"mysql\"><a href=\"#mysql\" aria-label=\"mysql permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MySQL:</h1>\n<p>Antes de comenzar crearemos una base de datos y un usuario de prueba para la realización de ejercicios:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">MariaDB <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>none<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> create database testdeusuarios<span class=\"token punctuation\">;</span>\nQuery OK, <span class=\"token number\">1</span> row affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.000</span> sec<span class=\"token punctuation\">)</span>\n\nMariaDB <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>none<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> use testdeusuarios<span class=\"token punctuation\">;</span>\nDatabase changed\nMariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> CREATE TABLE mitabla<span class=\"token punctuation\">(</span>\n    -<span class=\"token operator\">></span>          <span class=\"token function\">id</span> MEDIUMINT NOT NULL AUTO_INCREMENT,\n    -<span class=\"token operator\">></span>          nombre CHAR<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> NOT NULL,\n    -<span class=\"token operator\">></span>          edad INTEGER<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>,\n    -<span class=\"token operator\">></span>          salario INTEGER<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>,\n    -<span class=\"token operator\">></span>          PRIMARY KEY <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK, <span class=\"token number\">0</span> rows affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.031</span> sec<span class=\"token punctuation\">)</span>\nMariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> INSERT INTO mitabla <span class=\"token punctuation\">(</span>nombre, edad, salario<span class=\"token punctuation\">)</span> VALUES\n    -<span class=\"token operator\">></span>         <span class=\"token punctuation\">(</span><span class=\"token string\">\"Pedro\"</span>, <span class=\"token number\">24</span>, <span class=\"token number\">21000</span><span class=\"token punctuation\">)</span>,\n    -<span class=\"token operator\">></span>         <span class=\"token punctuation\">(</span><span class=\"token string\">\"Maria\"</span>, <span class=\"token number\">26</span>, <span class=\"token number\">24000</span><span class=\"token punctuation\">)</span>,\n    -<span class=\"token operator\">></span>         <span class=\"token punctuation\">(</span><span class=\"token string\">\"Juan\"</span>, <span class=\"token number\">28</span>, <span class=\"token number\">25000</span><span class=\"token punctuation\">)</span>,\n    -<span class=\"token operator\">></span>         <span class=\"token punctuation\">(</span><span class=\"token string\">\"Luis\"</span>, <span class=\"token number\">35</span>, <span class=\"token number\">28000</span><span class=\"token punctuation\">)</span>,\n    -<span class=\"token operator\">></span>         <span class=\"token punctuation\">(</span><span class=\"token string\">\"Monica\"</span>, <span class=\"token number\">42</span>, <span class=\"token number\">30000</span><span class=\"token punctuation\">)</span>,\n    -<span class=\"token operator\">></span>         <span class=\"token punctuation\">(</span><span class=\"token string\">\"Rosa\"</span>, <span class=\"token number\">43</span>, <span class=\"token number\">25000</span><span class=\"token punctuation\">)</span>,\n    -<span class=\"token operator\">></span>         <span class=\"token punctuation\">(</span><span class=\"token string\">\"Susana\"</span>, <span class=\"token number\">45</span>, <span class=\"token number\">39000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK, <span class=\"token number\">7</span> rows affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.017</span> sec<span class=\"token punctuation\">)</span>\nRecords: <span class=\"token number\">7</span>  Duplicates: <span class=\"token number\">0</span>  Warnings: <span class=\"token number\">0</span>\nMariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> CREATE <span class=\"token environment constant\">USER</span> <span class=\"token string\">'permisosuser'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED BY <span class=\"token string\">'fran'</span><span class=\"token punctuation\">;</span>\nQuery OK, <span class=\"token number\">0</span> rows affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.004</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>8. Averigua que privilegios de sistema hay en MySQL y como se asignan a un usuario.</strong></p>\n<p>En MySQL existen cinco niveles distintos de privilegios:</p>\n<ul>\n<li>Globales: se aplican al conjunto de todas las bases de datos en un servidor. Es el nivel más alto de privilegio, en el sentido de que su ámbito es el más general.</li>\n<li>De base de datos: se refieren a bases de datos individuales, y por extensión, a todos los objetos que contiene cada base de datos.</li>\n<li>De tabla: se aplican a tablas individuales, y por lo tanto, a todas las columnas de esas tabla.</li>\n<li>De columna: se aplican a una columna en una tabla concreta.</li>\n<li>De rutina: se aplican a los procedimientos almacenados. Aún no hemos visto nada sobre este tema, pero en MySQL se pueden almacenar procedimietos consistentes en varias consultas SQL.</li>\n<li>Privilegios\nMariaDB [information_schema]> show privileges;\n+-------------------------+---------------------------------------+-------------------------------------------------------+\n| Privilege               | Context                               | Comment                                               |\n+-------------------------+---------------------------------------+-------------------------------------------------------+\n| Alter                   | Tables                                | To alter the table                                    |\n| Alter routine           | Functions,Procedures                  | To alter or drop stored functions/procedures          |\n| Create                  | Databases,Tables,Indexes              | To create new databases and tables                    |\n| Create routine          | Databases                             | To use CREATE FUNCTION/PROCEDURE                      |\n| Create temporary tables | Databases                             | To use CREATE TEMPORARY TABLE                         |\n| Create view             | Tables                                | To create new views                                   |\n| Create user             | Server Admin                          | To create new users                                   |\n| Delete                  | Tables                                | To delete existing rows                               |\n| Delete versioning rows  | Tables                                | To delete versioning table historical rows            |\n| Drop                    | Databases,Tables                      | To drop databases, tables, and views                  |\n| Event                   | Server Admin                          | To create, alter, drop and execute events             |\n| Execute                 | Functions,Procedures                  | To execute stored routines                            |\n| File                    | File access on server                 | To read and write files on the server                 |\n| Grant option            | Databases,Tables,Functions,Procedures | To give to other users those privileges you possess   |\n| Index                   | Tables                                | To create or drop indexes                             |\n| Insert                  | Tables                                | To insert data into tables                            |\n| Lock tables             | Databases                             | To use LOCK TABLES (together with SELECT privilege)   |\n| Process                 | Server Admin                          | To view the plain text of currently executing queries |\n| Proxy                   | Server Admin                          | To make proxy user possible                           |\n| References              | Databases,Tables                      | To have references on tables                          |\n| Reload                  | Server Admin                          | To reload or refresh tables, logs and privileges      |\n| Replication client      | Server Admin                          | To ask where the slave or master servers are          |\n| Replication slave       | Server Admin                          | To read binary log events from the master             |\n| Select                  | Tables                                | To retrieve rows from table                           |\n| Show databases          | Server Admin                          | To see all databases with SHOW DATABASES              |\n| Show view               | Tables                                | To see views with SHOW CREATE VIEW                    |\n| Shutdown                | Server Admin                          | To shut down the server                               |\n| Super                   | Server Admin                          | To use KILL thread, SET GLOBAL, CHANGE MASTER, etc.   |\n| Trigger                 | Tables                                | To use triggers                                       |\n| Create tablespace       | Server Admin                          | To create/alter/drop tablespaces                      |\n| Update                  | Tables                                | To update existing rows                               |\n| Usage                   | Server Admin                          | No privileges - allow connect only                    |\n+-------------------------+---------------------------------------+-------------------------------------------------------+\n32 rows in set (0.001 sec)</li>\n<li>\n<p>Para asignar privilegios a un usuario:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">GRANT <span class=\"token string\">\"privilegio\"</span> ON *.* TO <span class=\"token string\">\"nombre_usuario\"</span>@<span class=\"token string\">\"localhost\"</span> identified by <span class=\"token string\">\"contraseña\"</span><span class=\"token builtin class-name\">.</span></code></pre></div>\n</li>\n<li>\n<p>Si queremos que al usuario al cuál hemos asignado un privilegio pueda asignarlo a su vez a otro usuario ejecutaremos:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">GRANT <span class=\"token string\">\"privilegio\"</span> ON *.* TO <span class=\"token string\">\"nombre_usuario\"</span>@<span class=\"token string\">\"localhost\"</span> identified by <span class=\"token string\">\"contraseña\"</span> with grant option<span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n<p><strong>9. Averigua cual es la forma de asignar y revocar privilegios sobre una tabla concreta en MySQL.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">#asignar permisos en una tabla concreta</span>\nMariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> grant <span class=\"token keyword\">select</span> on testdeusuarios.mitabla to <span class=\"token string\">'permisosuser'</span>@<span class=\"token string\">'localhost'</span><span class=\"token punctuation\">;</span>\nQuery OK, <span class=\"token number\">0</span> rows affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.001</span> sec<span class=\"token punctuation\">)</span>\n\nMariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> SHOW GRANTS FOR <span class=\"token string\">'permisosuser'</span>@<span class=\"token string\">'localhost'</span><span class=\"token punctuation\">;</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token operator\">|</span> Grants <span class=\"token keyword\">for</span> permisosuser@localhost                                                                                   <span class=\"token operator\">|</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token operator\">|</span> GRANT USAGE ON *.* TO <span class=\"token variable\"><span class=\"token variable\">`</span>permisosuser<span class=\"token variable\">`</span></span>@<span class=\"token variable\"><span class=\"token variable\">`</span>localhost<span class=\"token variable\">`</span></span> IDENTIFIED BY PASSWORD <span class=\"token string\">'*C21820D07C10B6E384D073EBC018312F95E2848E'</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> GRANT SELECT ON <span class=\"token variable\"><span class=\"token variable\">`</span>testdeusuarios<span class=\"token variable\">`</span></span><span class=\"token builtin class-name\">.</span><span class=\"token variable\"><span class=\"token variable\">`</span>mitabla<span class=\"token variable\">`</span></span> TO <span class=\"token variable\"><span class=\"token variable\">`</span>permisosuser<span class=\"token variable\">`</span></span>@<span class=\"token variable\"><span class=\"token variable\">`</span>localhost<span class=\"token variable\">`</span></span>                                            <span class=\"token operator\">|</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token number\">2</span> rows <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.000</span> sec<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#revocar permisos en una tabla concreta</span>\nMariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> revoke all privileges on testdeusuarios.mitabla from <span class=\"token string\">'permisosuser'</span>@<span class=\"token string\">'localhost'</span><span class=\"token punctuation\">;</span>\nQuery OK, <span class=\"token number\">0</span> rows affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.001</span> sec<span class=\"token punctuation\">)</span>\n\nMariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> SHOW GRANTS FOR <span class=\"token string\">'permisosuser'</span>@<span class=\"token string\">'localhost'</span><span class=\"token punctuation\">;</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token operator\">|</span> Grants <span class=\"token keyword\">for</span> permisosuser@localhost                                                                                   <span class=\"token operator\">|</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token operator\">|</span> GRANT USAGE ON *.* TO <span class=\"token variable\"><span class=\"token variable\">`</span>permisosuser<span class=\"token variable\">`</span></span>@<span class=\"token variable\"><span class=\"token variable\">`</span>localhost<span class=\"token variable\">`</span></span> IDENTIFIED BY PASSWORD <span class=\"token string\">'*C21820D07C10B6E384D073EBC018312F95E2848E'</span> <span class=\"token operator\">|</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token number\">1</span> row <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.000</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>10. Averigua si existe el concepto de rol en MySQL y señala las diferencias con los roles de ORACLE.</strong></p>\n<p>Si, en MySQL existen los roles, e identifican un conjunto de permisos, a partir de la versión 8 de MySQL ya están disponibles.</p>\n<p>Los roles son muy similares pero puesto a que MySQL los ha implementado hacer muy poco están algo menos desarrollados que en Oracle, por ejemplo, en Oracle existen roles que se utilizan para el uso de aplicaciones, también existen roles locales, externos o globales, y además se puede aumentar la seguridad del uso de roles añadiendoles contraseñas que permiten concretar aún más las funciones del rol que queramos crear.</p>\n<p><strong>11. Averigua si existe el concepto de perfil como conjunto de límites sobre el uso de recursos o sobre la contraseña en MySQL y señala las diferencias con los perfiles de ORACLE.</strong></p>\n<p><strong>MySQL:</strong></p>\n<p>Una forma de limitar los recursos de los servidores MySQL es asignar a la variable de sistema max<em>user</em>connections un valor distinto de cero. Sin embargo,este método es estrictamente global, y no está permitido para la administración de cuentas individuales. Además, limita sólo el número de conexiones simultáneas hechas usando una sóla cuenta, y no lo que un cliente puede hacer una vez conectado. Ambos tipos de control son interesantes para muchos administradores de MySQL, particularmente aquéllos que trabajan en ISPs.</p>\n<p>MySQL puede limitar:</p>\n<ul>\n<li>Número de consultas que un usuario pueda hacer cada hora.</li>\n<li>Número de updates que un usuario puede hacer cada hora.</li>\n<li>Número de veces que un usuario puede acceder al servidor a la hora.</li>\n<li>Número de conexiones simultaneas permitidas para cada usuario (como max<em>user</em>connections pero a nivel individual en lugar de global).</li>\n</ul>\n<p><strong>Oracle:</strong></p>\n<p>Un perfil de usuario es una forma de limitar los recursos que puede utilizar un usuario, cada usuario puede tener un único perfil, antes de asignar un perfil a un usuario es necesario que este perfil exista en la base de datos, un perfil se asigna en la creación de un usuario CREATE USER o modificándolo ALTER USER. </p>\n<ul>\n<li>Los recursos que limitamos son recursos del kernel: uso de la CPU, duración de sesion,...</li>\n<li>Y tambien limites de uso de las claves de acceso (passwords): duración, intentos de acceso, reuso, ... </li>\n</ul>\n<p>En este caso nos volvemos a encontrar con el mismo problema aunque ambos tengan un sistema para poder controlar el uso de recursos de los usuarios, MySQL se queda muy atrás en opciones de configuración.</p>\n<p>En Orcle la configuración es mucho mas detallada y te permite controlar prácticamente cualquier recurso utilizado por el usuario.</p>\n<p><strong>12. Realiza consultas al diccionario de datos de MySQL para averiguar todos los privilegios que tiene un usuario concreto.</strong></p>\n<p>Le añadiremos varios privilegios a un usuario y procederemos a ver todos los privilegios que utiliza:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">MariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> SHOW GRANTS FOR <span class=\"token string\">'permisosuser'</span>@<span class=\"token string\">'localhost'</span><span class=\"token punctuation\">;</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token operator\">|</span> Grants <span class=\"token keyword\">for</span> permisosuser@localhost                                                                                   <span class=\"token operator\">|</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token operator\">|</span> GRANT USAGE ON *.* TO <span class=\"token variable\"><span class=\"token variable\">`</span>permisosuser<span class=\"token variable\">`</span></span>@<span class=\"token variable\"><span class=\"token variable\">`</span>localhost<span class=\"token variable\">`</span></span> IDENTIFIED BY PASSWORD <span class=\"token string\">'*C21820D07C10B6E384D073EBC018312F95E2848E'</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> GRANT SELECT, INSERT, DELETE ON <span class=\"token variable\"><span class=\"token variable\">`</span>testdeusuarios<span class=\"token variable\">`</span></span><span class=\"token builtin class-name\">.</span><span class=\"token variable\"><span class=\"token variable\">`</span>mitabla<span class=\"token variable\">`</span></span> TO <span class=\"token variable\"><span class=\"token variable\">`</span>permisosuser<span class=\"token variable\">`</span></span>@<span class=\"token variable\"><span class=\"token variable\">`</span>localhost<span class=\"token variable\">`</span></span>                            <span class=\"token operator\">|</span>\n+---------------------------------------------------------------------------------------------------------------------+\n<span class=\"token number\">2</span> rows <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.000</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><strong>13. Realiza consultas al diccionario de datos en MySQL para averiguar qué usuarios pueden consultar una tabla concreta.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">MariaDB <span class=\"token punctuation\">[</span>testdeusuarios<span class=\"token punctuation\">]</span><span class=\"token operator\">></span> SELECT user, table_name FROM mysql.tables_priv<span class=\"token punctuation\">;</span>\n+--------------+------------+\n<span class=\"token operator\">|</span> user         <span class=\"token operator\">|</span> table_name <span class=\"token operator\">|</span>\n+--------------+------------+\n<span class=\"token operator\">|</span> Becario      <span class=\"token operator\">|</span> mitabla    <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> permisosuser <span class=\"token operator\">|</span> mitabla    <span class=\"token operator\">|</span>\n+--------------+------------+\n<span class=\"token number\">2</span> rows <span class=\"token keyword\">in</span> <span class=\"token builtin class-name\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.001</span> sec<span class=\"token punctuation\">)</span></code></pre></div>","timeToRead":13,"excerpt":"PRÁCTICA TEMA 3: USUARIOS ORACLE: 1. (ORACLE, Postgres, MySQL) Crea un usuario llamado Becario y, sin usar los roles de ORACLE, dale los…","frontmatter":{"title":"[ABD] - Gestión de Usuarios","cover":"https://img.icons8.com/ios/452/work.png","date":"2021-01-26T00:00:00.000Z","categories":["ABD"],"tags":["Gestión","Usuarios"]},"fields":{"slug":"/abd-gestion-de-usuarios","date":"January 25, 2021"}}},"pageContext":{"slug":"/abd-gestion-de-usuarios","nexttitle":"Práctica correo ovh","nextslug":"/practica-correo-ovh","prevtitle":"Sistemas de ficheros 'avanzados' ZFS/Btrfs","prevslug":"/sistemas-de-ficheros-avanzados-zfs-btrfs"}}}