{"componentChunkName":"component---src-templates-post-js","path":"/ejercicio-2-cortafuegos","result":{"data":{"markdownRemark":{"html":"<h2 id=\"implementación-de-un-cortafuegos-perimetral\"><a href=\"#implementaci%C3%B3n-de-un-cortafuegos-perimetral\" aria-label=\"implementación de un cortafuegos perimetral permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Implementación de un cortafuegos perimetral</h2>\n<h3 id=\"configura-un-cortafuegos-perimetral-en-una-máquina-con-dos-interfaces-de-red-externa-e-interna-debes-controlar-el-tráfico-a-la-máquina-cortafuego-y-el-trafico-a-los-equipos-de-la-lan\"><a href=\"#configura-un-cortafuegos-perimetral-en-una-m%C3%A1quina-con-dos-interfaces-de-red-externa-e-interna-debes-controlar-el-tr%C3%A1fico-a-la-m%C3%A1quina-cortafuego-y-el-trafico-a-los-equipos-de-la-lan\" aria-label=\"configura un cortafuegos perimetral en una máquina con dos interfaces de red externa e interna debes controlar el tráfico a la máquina cortafuego y el trafico a los equipos de la lan permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configura un cortafuegos perimetral en una máquina con dos interfaces de red (externa e interna). Debes controlar el tráfico a la máquina cortafuego y el trafico a los equipos de la LAN.</h3>\n<p>Realiza la configuración necesaria para que el cortafuegos sea consistente.</p>\n<ol>\n<li>\n<p>Permite poder hacer conexiones ssh al exterior desde la máquina cortafuegos.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">nft <span class=\"token function\">add</span> rule <span class=\"token function\">ip</span> FILTER OUTPUT oif eth0 tcp dport <span class=\"token number\">22</span> counter accept\nnft <span class=\"token function\">add</span> rule <span class=\"token function\">ip</span> FILTER INPUT ct state established,related counter accept</code></pre></div>\n</li>\n<li>\n<p>Permite hacer consultas DNS desde la máquina cortafuegos sólo al servidor 192.168.202.2. Comprueba que no puedes hacer un dig @1.1.1.1.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">3. Permite que la máquina cortafuegos pueda navegar por internet.\n```shell</code></pre></div>\n<ol start=\"4\">\n<li>\n<p>Los equipos de la red local deben poder tener conexión al exterior.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">5. Permitimos el ssh desde el cortafuego a la LAN\n```shell</code></pre></div>\n<ol start=\"6\">\n<li>\n<p>Permitimos hacer ping desde la LAN a la máquina cortafuegos.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">7. Permite realizar conexiones ssh desde los equipos de la LAN\n```shell</code></pre></div>\n<ol start=\"8\">\n<li>\n<p>Instala un servidor de correos en la máquina de la LAN. Permite el acceso desde el exterior y desde el cortafuego al servidor de correos. Para probarlo puedes ejecutar un telnet al puerto 25 tcp.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">9. Permite poder hacer conexiones ssh desde exterior a la LAN\n```shell\nnft add rule ip FILTER INPUT iif eth0 tcp dport 22 counter accept\nnft add rule ip FILTER OUTPUT ct state established,related counter accept</code></pre></div>\n<ol start=\"10\">\n<li>\n<p>Modifica la regla anterior, para que al acceder desde el exterior por ssh tengamos que conectar al puerto 2222, aunque el servidor ssh este configurado para acceder por el puerto 22.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">11. Permite hacer consultas DNS desde la LAN sólo al servidor 192.168.202.2. Comprueba que no puedes hacer un dig @1.1.1.1.\n```shell</code></pre></div>\n<ol start=\"12\">\n<li>\n<p>Permite que los equipos de la LAN puedan navegar por internet</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"></code></pre></div>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"></code></pre></div>","timeToRead":2,"excerpt":"Implementación de un cortafuegos perimetral Configura un cortafuegos perimetral en una máquina con dos interfaces de red (externa e interna…","frontmatter":{"title":"Ejercicio 2: Cortafuegos","cover":"https://img.icons8.com/ios/452/work.png","date":"2021-1-6","categories":["SAD"],"tags":["Cortafuegos","HTTPS","NFTABLES"]},"fields":{"slug":"/ejercicio-2-cortafuegos","date":"January 05, 2021"}}},"pageContext":{"slug":"/ejercicio-2-cortafuegos","nexttitle":"Tarea OVH. HTTPS","nextslug":"/tarea-ovh-https","prevtitle":"Práctica 2: rclone - Gestionando nuestro almacenamiento en la nube (unidad 1)","prevslug":"/practica-2-rclone-gestionando-nuestro-almacenamiento-en-la-nube-unidad-1"}}}